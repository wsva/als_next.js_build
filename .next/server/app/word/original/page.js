(()=>{var e={};e.id=1652,e.ids=[1652],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},56189:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>l,routeModule:()=>b,tree:()=>c}),a(41051),a(49789),a(35866);var r=a(23191),s=a(88716),n=a(37922),i=a.n(n),o=a(95231),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);a.d(t,d);let c=["",{children:["word",{children:["original",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,41051)),"/home/runner/work/als_next.js/als_next.js/src/app/word/original/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,49789)),"/home/runner/work/als_next.js/als_next.js/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/home/runner/work/als_next.js/als_next.js/src/app/word/original/page.tsx"],u="/word/original/page",f={require:a,loadChunk:()=>Promise.resolve()},b=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/word/original/page",pathname:"/word/original",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9633:(e,t,a)=>{let r={"17626542b799ad55d66a61eb1c6c83387f0dcdc7":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getOriginalByDomain),"21dad0493aed015526a61d45c462822ff3dbe078":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.saveCorrectionMap),"27292e0db1ea049094aca5cea9ce727e7660c6ad":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getOriginalCategory),"50109cb65c1da634a1805882896e3f4b886dc3b6":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.trashWord),"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getTextByOriginal),"5fb9f8b82dcff8496f64ded8cf754dc38af18221":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getWordInStore),"8123b9003e0dd95f542ea2ad28583619676cff06":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getOriginal),"9ca37af446368f4f1c00eda88cedaf4a6ff1320d":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.searchSentenceByKeyword),b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b:()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.searchWordInStore),d3974c3afa23da13df974e0a5eaa4527d6f92ffa:()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getTextByDomain),e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f:()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getText),e7f35a88891f29a76dee37b1ae73232f1f359a93:()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getTextCategory),f85ba165a1d481d90f9bccb76e2b9271e773c70c:()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.searchSentenceByLemma)};async function s(e,...t){return(await r[e]()).apply(null,t)}e.exports={"17626542b799ad55d66a61eb1c6c83387f0dcdc7":s.bind(null,"17626542b799ad55d66a61eb1c6c83387f0dcdc7"),"21dad0493aed015526a61d45c462822ff3dbe078":s.bind(null,"21dad0493aed015526a61d45c462822ff3dbe078"),"27292e0db1ea049094aca5cea9ce727e7660c6ad":s.bind(null,"27292e0db1ea049094aca5cea9ce727e7660c6ad"),"50109cb65c1da634a1805882896e3f4b886dc3b6":s.bind(null,"50109cb65c1da634a1805882896e3f4b886dc3b6"),"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c":s.bind(null,"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c"),"5fb9f8b82dcff8496f64ded8cf754dc38af18221":s.bind(null,"5fb9f8b82dcff8496f64ded8cf754dc38af18221"),"8123b9003e0dd95f542ea2ad28583619676cff06":s.bind(null,"8123b9003e0dd95f542ea2ad28583619676cff06"),"9ca37af446368f4f1c00eda88cedaf4a6ff1320d":s.bind(null,"9ca37af446368f4f1c00eda88cedaf4a6ff1320d"),b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b:s.bind(null,"b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b"),d3974c3afa23da13df974e0a5eaa4527d6f92ffa:s.bind(null,"d3974c3afa23da13df974e0a5eaa4527d6f92ffa"),e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f:s.bind(null,"e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f"),e7f35a88891f29a76dee37b1ae73232f1f359a93:s.bind(null,"e7f35a88891f29a76dee37b1ae73232f1f359a93"),f85ba165a1d481d90f9bccb76e2b9271e773c70c:s.bind(null,"f85ba165a1d481d90f9bccb76e2b9271e773c70c")}},54809:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,79404,23))},57371:(e,t,a)=>{"use strict";a.d(t,{default:()=>s.a});var r=a(670),s=a.n(r)},670:(e,t,a)=>{"use strict";let{createProxy:r}=a(68570);e.exports=r("/home/runner/work/als_next.js/als_next.js/node_modules/next/dist/client/link.js")},71774:(e,t,a)=>{"use strict";a.r(t),a.d(t,{getOriginal:()=>u,getOriginalByDomain:()=>l,getOriginalCategory:()=>c,getText:()=>m,getTextByDomain:()=>b,getTextByOriginal:()=>g,getTextCategory:()=>f,getWordInStore:()=>o,saveCorrectionMap:()=>w,searchSentenceByKeyword:()=>_,searchSentenceByLemma:()=>h,searchWordInStore:()=>d,trashWord:()=>p});var r=a(24330);a(60166);var s=a(13538),n=a(40644),i=a(53524);async function o(e,t,a,r){let n=i.Prisma.sql`
        select * from word_store t0 where 1 = 1
    `;i.Prisma.sql`
        select count(1) as total from word_store t0 where 1 = 1
    `;let o=i.Prisma.sql`
        and not exists(select 1 from word_trash t1 where t1.word = t0.word)
    `,d=e?i.Prisma.sql`
            and not exists(select 1 from qsa_card t1
                where (t1.question = t0.word or t1.suggestion = t0.word) and t1.user_id = ${e})
        `:i.Prisma.sql``,c=t?i.Prisma.sql`
            and t0.language = ${t}
        `:i.Prisma.sql``,l=i.Prisma.sql`
        order by count desc, word asc
    `,u=i.Prisma.sql`
        limit ${r} offset ${(a-1)*r}
    `;try{let e=i.Prisma.join([n,o,d,c,l,u]," "),t=await s._.$queryRaw(e),f=i.Prisma.sql`select count(1) as total from word_store`,b=await s._.$queryRaw(f),g=Number(b[0]?.total||0);return{status:"success",data:t,total_records:g,page:a,total_pages:Math.ceil(g/r)}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function d(e,t,a,r,n){let o=(e,t)=>e?i.Prisma.sql`
                select t0.*,
                (select string_agg(t1.uuid, ',') from qsa_card t1 where 1 =1 
                    and (t1.question = t0.word or t1.suggestion = t0.word)
                    and t1.user_id = ${e}
                ) as card_uuid,
                ${t} as sort_order
                from word_store t0 where 1 = 1
            `:i.Prisma.sql`
            select t0.*,
            null as card_uuid,
            ${t} as sort_order
            from word_store t0 where 1 = 1
        `,d=a.replaceAll(/\s+/g," ").replaceAll(/^\s+|\s+$/g,""),c=i.Prisma.sql`
        and lower(t0.word) = lower(${d})
    `,l=i.Prisma.sql`
        and lower(t0.word) != lower(${d})
        and lower(t0.word) like lower(${"%"+d+"%"})
    `,u=i.Prisma.join([o(e,1),c,i.Prisma.sql`union`,o(e,2),l]," ");try{let e=i.Prisma.join([i.Prisma.sql`select * from (`,u,i.Prisma.sql`) as t`,i.Prisma.sql`order by sort_order`,i.Prisma.sql`limit ${n} offset ${(r-1)*n}`]," "),t=await s._.$queryRaw(e),a=i.Prisma.join([i.Prisma.sql`select count(1) as total from (`,u,i.Prisma.sql`) as t`]," "),o=await s._.$queryRaw(a),d=Number(o[0]?.total||0);return{status:"success",data:t,total_records:d,page:r,total_pages:Math.ceil(d/n)}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function c(){try{let e=await s._.statistic_original.findMany({distinct:["domain","language"],select:{domain:!0,language:!0}});return{status:"success",data:e}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function l(e,t){try{let a=await s._.statistic_original.findMany({where:{domain:e,language:t},select:{uuid:!0,source:!0,domain:!0,language:!0}});return{status:"success",data:a}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function u(e){try{let t=await s._.statistic_original.findUnique({where:{uuid:e}});if(!t)return{status:"error",error:"no original found"};return{status:"success",data:t}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function f(){try{let e=await s._.$queryRaw(i.Prisma.sql`SELECT distinct t1.domain, t1.language
        FROM
        	statistic_text t0, statistic_original t1
        WHERE
            t0.original_uuid = t1.uuid
        `);return{status:"success",data:e}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function b(e,t){if(!(0,n.x)(e)||!(0,n.x)(t))return{status:"error",error:"invaid sql param"};try{let a=await s._.$queryRaw(i.Prisma.sql`SELECT t1.source source, t1.domain, t1.language,
        t0.uuid, t0.version, '' content, t0.created_by, t0.created_at, t0.updated_at
        FROM
        	statistic_text t0, statistic_original t1
        WHERE
            t0.original_uuid = t1.uuid
            and t1.domain = ${e}
            and t1.language = ${t}
        `);return{status:"success",data:a}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function g(e){if(!(0,n.x)(e))return{status:"error",error:"invaid sql param"};try{let t=await s._.$queryRaw(i.Prisma.sql`SELECT t1.source source, t1.domain, t1.language,
        t0.uuid, t0.version, '' content, t0.created_by, t0.created_at, t0.updated_at
        FROM
        	statistic_text t0, statistic_original t1
        WHERE
            t0.original_uuid = t1.uuid
            and t0.original_uuid = ${e}
        `);return{status:"success",data:t}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function m(e){if(!(0,n.x)(e))return{status:"error",error:"invaid sql param"};try{let t=await s._.$queryRaw(i.Prisma.sql`SELECT t1.source source, t0.* 
            FROM
                statistic_text t0, statistic_original t1
            WHERE
                t0.original_uuid = t1.uuid
                and t0.uuid=${e}
            `);return{status:"success",data:t}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function _(e){if(0==e.length)return{status:"error",error:"no keyword found"};try{let t=`SELECT t2.source source, t2.domain, t0.* 
            FROM
                statistic_sentence t0, statistic_text t1, statistic_original t2
            WHERE
                t0.text_uuid = t1.uuid
                and t1.original_uuid = t2.uuid
                ${e.map(e=>`and LOWER(t0.sentence) like '%${e.toLowerCase()}%'`).join(" ")}
                limit 100
            `,a=await s._.$queryRaw(i.Prisma.sql([t]));return{status:"success",data:a}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function h(e){if(0==e.length)return{status:"error",error:"no keyword found"};try{let t=`SELECT t2.source source, t2.domain, t0.* 
            FROM
                statistic_sentence t0, statistic_text t1, statistic_original t2
            WHERE
                t0.text_uuid = t1.uuid
                and t1.original_uuid = t2.uuid
                and exists (select 1 from statistic_lemma t3
                        where t3.sentence_uuid = t0.uuid
                        ${e.map(e=>`and t3.lemma = '${e}'`).join(" ")}
                    )
                limit 100
            `,a=await s._.$queryRaw(i.Prisma.sql([t]));return{status:"success",data:a}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function p(e,t){try{let a=await s._.word_trash.create({data:{uuid:(0,n.Fs)(),word:e,created_by:t,created_at:new Date,updated_at:new Date}});return{status:"success",data:a}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function w(e){try{let t=await s._.statistic_correction_map.create({data:e});return{status:"success",data:t}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}(0,a(40618).h)([o,d,c,l,u,f,b,g,m,_,h,p,w]),(0,r.j)("5fb9f8b82dcff8496f64ded8cf754dc38af18221",o),(0,r.j)("b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b",d),(0,r.j)("27292e0db1ea049094aca5cea9ce727e7660c6ad",c),(0,r.j)("17626542b799ad55d66a61eb1c6c83387f0dcdc7",l),(0,r.j)("8123b9003e0dd95f542ea2ad28583619676cff06",u),(0,r.j)("e7f35a88891f29a76dee37b1ae73232f1f359a93",f),(0,r.j)("d3974c3afa23da13df974e0a5eaa4527d6f92ffa",b),(0,r.j)("5d22d26a5bc6b5a20c845591229338f4b5ef7c4c",g),(0,r.j)("e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f",m),(0,r.j)("9ca37af446368f4f1c00eda88cedaf4a6ff1320d",_),(0,r.j)("f85ba165a1d481d90f9bccb76e2b9271e773c70c",h),(0,r.j)("50109cb65c1da634a1805882896e3f4b886dc3b6",p),(0,r.j)("21dad0493aed015526a61d45c462822ff3dbe078",w)},41051:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var r=a(19510),s=a(71774),n=a(57371);async function i({params:e,searchParams:t}){let{domain:a,language:i}=t,o=!("string"==typeof a&&"string"==typeof i&&a.length>0&&i.length>0),d=async()=>{let e=await (0,s.getOriginalCategory)();if("success"===e.status)return e.data.sort((e,t)=>e.domain.localeCompare(t.domain)||e.language.localeCompare(t.language)).map((e,t)=>r.jsx(n.default,{target:"_blank",className:"flex m-4 text-2xl font-bold text-blue-600 hover:underline",href:`/word/original?domain=${e.domain}&language=${e.language}`,children:`${e.domain}[${e.language}]`},t))},c=async()=>{let e=await (0,s.getOriginalByDomain)(a,i);if("success"===e.status)return e.data.sort((e,t)=>e.source.localeCompare(t.source)).map(e=>(0,r.jsxs)("div",{className:"flex flex-row items-end my-1 gap-4",children:[r.jsx(n.default,{target:"_blank",className:"text-2xl text-blue-600 hover:underline",href:`/word/original/${e.uuid}`,children:e.source}),r.jsx(n.default,{target:"_blank",className:"text-md text-blue-600 bg-yellow-100 hover:underline",href:`/word/text?original=${e.uuid}`,children:"text"})]},e.uuid))};return r.jsx(r.Fragment,{children:o?d():c()})}a(71159)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,2950,1167,6621,4349,7449],()=>a(56189));module.exports=r})();