(()=>{var e={};e.id=6666,e.ids=[6666],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},67637:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),a(31092),a(49789),a(35866);var s=a(23191),r=a(88716),i=a(37922),n=a.n(i),l=a(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(t,o);let d=["",{children:["card",{children:["[uuid]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,31092)),"/home/runner/work/als_next.js/als_next.js/src/app/card/[uuid]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,49789)),"/home/runner/work/als_next.js/als_next.js/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/runner/work/als_next.js/als_next.js/src/app/card/[uuid]/page.tsx"],u="/card/[uuid]/page",m={require:a,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/card/[uuid]/page",pathname:"/card/[uuid]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},56045:(e,t,a)=>{let s={"752d4765be8afd326d32b304cd957453103f93d0":()=>Promise.resolve().then(a.bind(a,1702)).then(e=>e.getUserByEmail),"7be741432e134b84b50ad1a2aed0d93168d824aa":()=>Promise.resolve().then(a.bind(a,1702)).then(e=>e.getUserByUsername),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:()=>Promise.resolve().then(a.bind(a,1702)).then(e=>e.signOutUser),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:()=>Promise.resolve().then(a.bind(a,1702)).then(e=>e.registerUser),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:()=>Promise.resolve().then(a.bind(a,1702)).then(e=>e.signInUser)};async function r(e,...t){return(await s[e]()).apply(null,t)}e.exports={"752d4765be8afd326d32b304cd957453103f93d0":r.bind(null,"752d4765be8afd326d32b304cd957453103f93d0"),"7be741432e134b84b50ad1a2aed0d93168d824aa":r.bind(null,"7be741432e134b84b50ad1a2aed0d93168d824aa"),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:r.bind(null,"ce85166cf1a23c9f2a22a49b4f82895537edcfe6"),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:r.bind(null,"ee535fd2e1d6ef6ab42586363f44c0cbea1161f9"),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:r.bind(null,"fe7b3552d9555bacd46a0fcf077d7272d19fd2c8")}},65388:(e,t,a)=>{Promise.resolve().then(a.bind(a,20456))},20456:(e,t,a)=>{"use strict";a.d(t,{default:()=>j});var s=a(10326),r=a(51223),i=a(66836),n=a(1311),l=a(36780),o=a(94861),d=a(40271),c=a(2222),u=a(38307),m=a(90831),p=a(14509),f=a(25750),g=a(17577),x=a(35047),b=a(74723),h=a(65825),v=a(53134);a(66401);var y=a(50813);function j({card_ext:e,email:t,edit_view:a,simple:j,create_new:w}){let _=(0,x.useSearchParams)(),[P,S]=(0,g.useState)(a),[U,N]=(0,g.useState)(),[q,A]=(0,g.useState)([]),[R,C]=(0,g.useState)([]),[$,I]=(0,g.useState)([]),{register:z,handleSubmit:k,formState:E,setValue:M,getValues:D,watch:F}=(0,b.cI)({}),V=(0,g.useRef)(null),{ref:G,...O}=z("answer"),Q=(0,g.useRef)(null),T=t=>{if(e){let a=(0,r.$s)(e,t);if(a)return a}let a=_.get(t);if(a)return decodeURIComponent(a)},Y=e=>y.zQ.map(e=>e.color)[e],H=async(e,t)=>{if(!Q.current)return;let a=Q.current,s=a.selectionStart,r=a.selectionEnd,i=a.value,n=i.slice(0,s)+e+i.slice(s,r)+t+i.slice(r);a.value=n,Q.current.value=n,setTimeout(()=>{a.focus();let i=e.length+t.length;s<r?a.setSelectionRange(s,r+i):a.setSelectionRange(s+i,r+i)},0)},K=async e=>{if(!U){h.Am.error("loading");return}if(e.familiarity||(e.familiarity=0),"string"==typeof e.familiarity&&(e.familiarity=parseInt(e.familiarity||"0",10)),"success"===(await (0,v.z_)({...U,...e,created_at:U?.created_at?U.created_at:new Date,updated_at:new Date})).status)h.Am.success("save card success");else{h.Am.error("save card failed");return}if("success"===(await (0,v.pl)({uuid:U.uuid,tag_list_new:$.filter(e=>!R.includes(e)),tag_list_remove:R.filter(e=>!$.includes(e))})).status)h.Am.success("save tag successfully"),C($);else{h.Am.error("save tag failed");return}w&&setTimeout(()=>{window.location.reload()},1e3)};return s.jsx("form",{ref:V,onSubmit:k(K),children:(0,s.jsxs)("div",{className:"w-full space-y-4 mb-10 px-2",children:[U&&U.user_id!==t&&s.jsx("div",{className:"flex flex-row my-1 items-start justify-start gap-4",children:s.jsx(i.O,{className:"text-blue-500 underline",target:"_blank",href:`/card/others?user_id=${U.user_id}`,children:U.user_id})}),(0,s.jsxs)("div",{className:"flex flex-row my-1 items-end justify-end gap-4",children:[s.jsx(n.A,{color:"primary",variant:"solid",size:"sm",onPress:()=>S(!P),children:P?"View":"Edit"}),s.jsx(n.A,{color:"primary",type:"submit",variant:"solid",size:"sm",isLoading:E.isSubmitting,children:"Save"}),s.jsx(n.A,{color:"danger",variant:"solid",size:"sm",onPress:async()=>{U?.uuid&&("success"==(await (0,v.yJ)(U.uuid)).status?h.Am.error("remove card successfully"):h.Am.error("remove card failed"))},children:"Remove"})]}),P?(0,s.jsxs)(s.Fragment,{children:[s.jsx(l.Y,{label:"question",classNames:{input:"text-xl leading-tight font-roboto"},defaultValue:T("question")||"",...z("question")}),!j&&s.jsx(o.g,{"aria-label":"select familiarity",selectionMode:"single",defaultSelectedKeys:[`${F("familiarity",T("familiarity")||0)}`],...z("familiarity"),children:s.jsx(d.y,{items:y.zQ,children:y.zQ.map(e=>s.jsx(c.R,{className:`${Y(e.value)}`,children:`${e.value} - ${e.label}`},e.value))})}),s.jsx(u.X,{color:"success",value:$,onValueChange:I,orientation:"horizontal",children:q.map(e=>s.jsx(m.K,{value:e.uuid,children:e.tag},e.uuid))}),!j&&s.jsx(l.Y,{label:"suggestion",classNames:{input:"text-xl leading-tight font-roboto"},minRows:1,maxRows:3,defaultValue:T("suggestion")||"",...z("suggestion")}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 px-3 py-0.5 bg-default-100 hover:bg-default-200 rounded-medium",children:[s.jsx("label",{className:"text-foreground-500 text-small pb-0.5 pe-2 max-w-full text-ellipsis overflow-hidden",children:"answer"}),(0,s.jsxs)(p.g,{size:"sm",radius:"none",className:"flex flex-row items-center justify-start gap-1",children:[["#","⬌","■","=","≈","➤","\uD83E\uDC46"].map((e,t)=>s.jsx(n.A,{isIconOnly:!0,className:"text-xl",onPress:()=>H(e,""),children:e},`char1-${t}`)),["\xe4","\xc4","\xf6","\xd6","\xfc","\xdc","\xdf","\xe9","€"].map((e,t)=>s.jsx(n.A,{isIconOnly:!0,className:"text-xl",onPress:()=>H(e,""),children:e},`char2-${t}`)),[["B","**","**"],["„“","„","“"],["‚‘","‚","‘"],["C","`````\n","\n`````"]].map((e,t)=>s.jsx(n.A,{isIconOnly:!0,className:"text-xl",onPress:()=>H(e[1],e[2]),children:e[0]},`char3-${t}`))]}),s.jsx("textarea",{className:"w-full text-xl leading-tight font-roboto px-1.5 outline-none bg-transparent resize-none",defaultValue:T("answer")||"",rows:10,autoComplete:"off",autoCorrect:"off",spellCheck:"false",...O,ref:e=>{G(e),Q.current=e}})]}),s.jsx(l.Y,{label:"note",classNames:{input:"text-xl leading-tight font-roboto"},defaultValue:T("note")||"",...z("note")})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("pre",{className:"text-3xl leading-tight font-roboto font-bold text-wrap",children:F("question",T("question")||"")}),s.jsx(f.j,{}),s.jsx(o.g,{"aria-label":"select familiarity",selectionMode:"single",isDisabled:!0,defaultSelectedKeys:[`${F("familiarity",T("familiarity")||0)}`],...z("familiarity"),children:s.jsx(d.y,{items:y.zQ,children:y.zQ.map(e=>s.jsx(c.R,{className:`${Y(e.value)}`,children:`${e.value} - ${e.label}`},e.value))})}),s.jsx(u.X,{color:"success",value:$,onValueChange:I,orientation:"horizontal",isDisabled:!0,children:q.filter(e=>$.includes(e.uuid)).map(e=>s.jsx(m.K,{value:e.uuid,children:e.tag},e.uuid))}),s.jsx(f.j,{}),s.jsx("div",{className:"text-md font-roboto mx-8",children:F("suggestion",T("suggestion")||"")}),s.jsx(f.j,{}),s.jsx("div",{className:"MD my-1 text-xl leading-tight font-roboto indent-0 whitespace-pre-wrap break-words hyphens-auto",dangerouslySetInnerHTML:{__html:(0,r.Hp)(F("answer",T("answer"))||"")}}),s.jsx(f.j,{}),s.jsx("pre",{className:"text-md font-roboto mx-8",children:F("note",T("note")||"")})]})]})})}},50813:(e,t,a)=>{"use strict";var s,r;a.d(t,{_Y:()=>i,j8:()=>n,ll:()=>l,nr:()=>o,vA:()=>s,zQ:()=>d}),function(e){e.Normal="normal",e.Easy="easy",e.Unspecified="unspecified",e.Uncomplete="uncomplete"}(s||(s={}));let i=[{value:"unspecified",description:"all"},{value:"normal",description:"familiarity < 6"},{value:"easy",description:"familiarity = 6"},{value:"uncomplete",description:"question or answer is empty"}],n="unspecified",l="all tagged",o="not tagged";!function(e){e[e.NewlyAdded=0]="NewlyAdded",e[e.StillUnfamiliar=1]="StillUnfamiliar",e[e.PassiveUnderstanding=2]="PassiveUnderstanding",e[e.RecognitionWithoutUnderstanding=3]="RecognitionWithoutUnderstanding",e[e.UnderstandingInContext=4]="UnderstandingInContext",e[e.ActiveRecall=5]="ActiveRecall",e[e.NaturalUsage=6]="NaturalUsage"}(r||(r={}));let d=[{value:0,description:"Newly Added",label:"newly added",color:"bg-slate-200"},{value:1,description:"Still Unfamiliar",label:"strange",color:"bg-red-200"},{value:2,description:"Passive Understanding",label:"known",color:"bg-orange-200"},{value:3,description:"Recognition Without Understanding",label:"familiar",color:"bg-amber-200"},{value:4,description:"Understanding in Context",label:"skilled",color:"bg-cyan-200"},{value:5,description:"Active Recall",label:"practiced",color:"bg-green-200"},{value:6,description:"Natural Usage",label:"easy & never appear again",color:"bg-lime-200"}]},51223:(e,t,a)=>{"use strict";a.d(t,{$s:()=>o,Fs:()=>l,Hp:()=>d,p6:()=>n}),a(20339);var s=a(41092),r=a(66053),i=a(47463);let n=e=>{let t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0"),r=e.getHours().toString().padStart(2,"0"),i=e.getMinutes().toString().padStart(2,"0"),n=e.getSeconds().toString().padStart(2,"0");return`${t}-${a}-${s} ${r}:${i}:${n}`},l=()=>(0,i.Z)().replaceAll("-","");function o(e,t){return e[t]}let d=e=>s.Z.sanitize(r.TU.parse(e,{async:!1,pedantic:!1,gfm:!0}))},31092:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(19510);a(71159);var r=a(68570);let i=(0,r.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/[uuid]/CardForm.tsx`),{__esModule:n,$$typeof:l}=i;i.default;let o=(0,r.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/[uuid]/CardForm.tsx#default`);var d=a(35089),c=a(15316);async function u({params:e,searchParams:t}){let a=await (0,d.I8)(),r=a?.user?.email||"",i="string"==typeof t.question?decodeURIComponent(t.question):"",n="string"==typeof t.tags?decodeURIComponent(t.tags):"",l="string"==typeof t.suggestion?decodeURIComponent(t.suggestion):"",u={question:i,suggestion:l,answer:"string"==typeof t.answer?decodeURIComponent(t.answer):"",note:"string"==typeof t.note?decodeURIComponent(t.note):"",tag_list_suggestion:n.split(",")},m="string"==typeof e.uuid&&"add"!==e.uuid?await (0,c.getCard)(e.uuid):void 0;return s.jsx(s.Fragment,{children:m?.status==="success"?s.jsx(o,{card_ext:m.data,email:r,edit_view:!!t.edit,simple:!1,create_new:!1}):s.jsx(o,{card_ext:u,email:r,edit_view:!!t.edit,simple:"simple"in t,create_new:!0})})}},66401:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[8948,2950,9588,6621,934,3656,4349,3945,6836,5011,6619,4723,6332,847,1200],()=>a(67637));module.exports=s})();