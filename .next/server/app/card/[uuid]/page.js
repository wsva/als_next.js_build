(()=>{var e={};e.id=6666,e.ids=[6666],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},67637:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>c,pages:()=>u,routeModule:()=>m,tree:()=>d}),s(31092),s(49789),s(35866);var a=s(23191),r=s(88716),i=s(37922),n=s.n(i),l=s(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["card",{children:["[uuid]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,31092)),"/home/runner/work/als_next.js/als_next.js/src/app/card/[uuid]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,49789)),"/home/runner/work/als_next.js/als_next.js/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/home/runner/work/als_next.js/als_next.js/src/app/card/[uuid]/page.tsx"],c="/card/[uuid]/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/card/[uuid]/page",pathname:"/card/[uuid]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},65388:(e,t,s)=>{Promise.resolve().then(s.bind(s,20456))},20456:(e,t,s)=>{"use strict";s.d(t,{default:()=>b});var a=s(10326),r=s(51223),i=s(66836),n=s(1311),l=s(36780),o=s(94861),d=s(40271),u=s(2222),c=s(38307),p=s(90831),m=s(14509),g=s(25750),x=s(17577),f=s(35047),h=s(74723),v=s(65825),y=s(53134);s(66401);var j=s(50813);function b({card_ext:e,email:t,edit_view:s,simple:b,create_new:w}){let _=(0,f.useSearchParams)(),[S,N]=(0,x.useState)(s),[P,q]=(0,x.useState)(),[A,U]=(0,x.useState)([]),[R,C]=(0,x.useState)([]),[$,z]=(0,x.useState)([]),{register:I,handleSubmit:k,formState:M,setValue:D,getValues:E,watch:F}=(0,h.cI)({}),V=(0,x.useRef)(null),{ref:G,...Q}=I("answer"),O=(0,x.useRef)(null),T=t=>{if(e){let s=(0,r.$s)(e,t);if(s)return s}let s=_.get(t);if(s)return decodeURIComponent(s)},Y=e=>j.zQ.map(e=>e.color)[e],H=async(e,t)=>{if(!O.current)return;let s=O.current,a=s.selectionStart,r=s.selectionEnd,i=s.value,n=i.slice(0,a)+e+i.slice(a,r)+t+i.slice(r);s.value=n,O.current.value=n,setTimeout(()=>{s.focus();let i=e.length+t.length;a<r?s.setSelectionRange(a,r+i):s.setSelectionRange(a+i,r+i)},0)},K=async e=>{if(!P){v.Am.error("loading");return}if(e.familiarity||(e.familiarity=0),"string"==typeof e.familiarity&&(e.familiarity=parseInt(e.familiarity||"0",10)),"success"===(await (0,y.z_)({...P,...e,created_at:P?.created_at?P.created_at:new Date,updated_at:new Date})).status)v.Am.success("save card success");else{v.Am.error("save card failed");return}if("success"===(await (0,y.pl)({uuid:P.uuid,tag_list_new:$.filter(e=>!R.includes(e)),tag_list_remove:R.filter(e=>!$.includes(e))})).status)v.Am.success("save tag successfully"),C($);else{v.Am.error("save tag failed");return}w&&setTimeout(()=>{window.location.reload()},1e3)};return a.jsx("form",{ref:V,onSubmit:k(K),children:(0,a.jsxs)("div",{className:"w-full space-y-4 mb-10 px-2",children:[P&&P.user_id!==t&&a.jsx("div",{className:"flex flex-row my-1 items-start justify-start gap-4",children:a.jsx(i.O,{className:"text-blue-500 underline",target:"_blank",href:`/card/others?user_id=${P.user_id}`,children:P.user_id})}),(0,a.jsxs)("div",{className:"flex flex-row my-1 items-end justify-end gap-4",children:[a.jsx(n.A,{color:"primary",variant:"solid",size:"sm",onPress:()=>N(!S),children:S?"View":"Edit"}),a.jsx(n.A,{color:"primary",type:"submit",variant:"solid",size:"sm",isLoading:M.isSubmitting,children:"Save"}),a.jsx(n.A,{color:"danger",variant:"solid",size:"sm",onPress:async()=>{P?.uuid&&("success"==(await (0,y.yJ)(P.uuid)).status?v.Am.error("remove card successfully"):v.Am.error("remove card failed"))},children:"Remove"})]}),S?(0,a.jsxs)(a.Fragment,{children:[a.jsx(l.Y,{label:"question",classNames:{input:"text-xl leading-tight font-roboto"},defaultValue:T("question")||"",...I("question")}),!b&&a.jsx(o.g,{"aria-label":"select familiarity",selectionMode:"single",defaultSelectedKeys:[`${F("familiarity",T("familiarity")||0)}`],...I("familiarity"),children:a.jsx(d.y,{items:j.zQ,children:j.zQ.map(e=>a.jsx(u.R,{className:`${Y(e.value)}`,children:`${e.value} - ${e.label}`},e.value))})}),a.jsx(c.X,{color:"success",value:$,onValueChange:z,orientation:"horizontal",children:A.map(e=>a.jsx(p.K,{value:e.uuid,children:e.tag},e.uuid))}),!b&&a.jsx(l.Y,{label:"suggestion",classNames:{input:"text-xl leading-tight font-roboto"},minRows:1,maxRows:3,defaultValue:T("suggestion")||"",...I("suggestion")}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 px-3 py-0.5 bg-default-100 hover:bg-default-200 rounded-medium",children:[a.jsx("label",{className:"text-foreground-500 text-small pb-0.5 pe-2 max-w-full text-ellipsis overflow-hidden",children:"answer"}),(0,a.jsxs)(m.g,{size:"sm",radius:"none",className:"flex flex-row items-center justify-start gap-1",children:[["#","⬌","■","=","≈","➤","\uD83E\uDC46"].map((e,t)=>a.jsx(n.A,{isIconOnly:!0,className:"text-xl",onPress:()=>H(e,""),children:e},`char1-${t}`)),["\xe4","\xc4","\xf6","\xd6","\xfc","\xdc","\xdf","\xe9","€"].map((e,t)=>a.jsx(n.A,{isIconOnly:!0,className:"text-xl",onPress:()=>H(e,""),children:e},`char2-${t}`)),[["B","**","**"],["„“","„","“"],["‚‘","‚","‘"],["C","`````\n","\n`````"]].map((e,t)=>a.jsx(n.A,{isIconOnly:!0,className:"text-xl",onPress:()=>H(e[1],e[2]),children:e[0]},`char3-${t}`))]}),a.jsx("textarea",{className:"w-full text-xl leading-tight font-roboto px-1.5 outline-none bg-transparent resize-none",defaultValue:T("answer")||"",rows:10,autoComplete:"off",autoCorrect:"off",spellCheck:"false",...Q,ref:e=>{G(e),O.current=e}})]}),a.jsx(l.Y,{label:"note",classNames:{input:"text-xl leading-tight font-roboto"},defaultValue:T("note")||"",...I("note")})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx("pre",{className:"text-3xl leading-tight font-roboto font-bold text-wrap",children:F("question",T("question")||"")}),a.jsx(g.j,{}),a.jsx(o.g,{"aria-label":"select familiarity",selectionMode:"single",isDisabled:!0,defaultSelectedKeys:[`${F("familiarity",T("familiarity")||0)}`],...I("familiarity"),children:a.jsx(d.y,{items:j.zQ,children:j.zQ.map(e=>a.jsx(u.R,{className:`${Y(e.value)}`,children:`${e.value} - ${e.label}`},e.value))})}),a.jsx(c.X,{color:"success",value:$,onValueChange:z,orientation:"horizontal",isDisabled:!0,children:A.filter(e=>$.includes(e.uuid)).map(e=>a.jsx(p.K,{value:e.uuid,children:e.tag},e.uuid))}),a.jsx(g.j,{}),a.jsx("div",{className:"text-md font-roboto mx-8",children:F("suggestion",T("suggestion")||"")}),a.jsx(g.j,{}),a.jsx("div",{className:"MD my-1 text-xl leading-tight font-roboto indent-0 whitespace-pre-wrap break-words hyphens-auto",dangerouslySetInnerHTML:{__html:(0,r.Hp)(F("answer",T("answer"))||"")}}),a.jsx(g.j,{}),a.jsx("pre",{className:"text-md font-roboto mx-8",children:F("note",T("note")||"")})]})]})})}},50813:(e,t,s)=>{"use strict";var a,r;s.d(t,{_Y:()=>i,j8:()=>n,ll:()=>l,nr:()=>o,vA:()=>a,zQ:()=>d}),function(e){e.Normal="normal",e.Easy="easy",e.Unspecified="unspecified",e.Uncomplete="uncomplete"}(a||(a={}));let i=[{value:"unspecified",description:"all"},{value:"normal",description:"familiarity < 6"},{value:"easy",description:"familiarity = 6"},{value:"uncomplete",description:"question or answer is empty"}],n="unspecified",l="all tagged",o="not tagged";!function(e){e[e.NewlyAdded=0]="NewlyAdded",e[e.StillUnfamiliar=1]="StillUnfamiliar",e[e.PassiveUnderstanding=2]="PassiveUnderstanding",e[e.RecognitionWithoutUnderstanding=3]="RecognitionWithoutUnderstanding",e[e.UnderstandingInContext=4]="UnderstandingInContext",e[e.ActiveRecall=5]="ActiveRecall",e[e.NaturalUsage=6]="NaturalUsage"}(r||(r={}));let d=[{value:0,description:"Newly Added",label:"newly added",color:"bg-slate-200"},{value:1,description:"Still Unfamiliar",label:"strange",color:"bg-red-200"},{value:2,description:"Passive Understanding",label:"known",color:"bg-orange-200"},{value:3,description:"Recognition Without Understanding",label:"familiar",color:"bg-amber-200"},{value:4,description:"Understanding in Context",label:"skilled",color:"bg-cyan-200"},{value:5,description:"Active Recall",label:"practiced",color:"bg-green-200"},{value:6,description:"Natural Usage",label:"easy & never appear again",color:"bg-lime-200"}]},51223:(e,t,s)=>{"use strict";s.d(t,{$s:()=>o,Fs:()=>l,Hp:()=>d,p6:()=>n}),s(20339);var a=s(41092),r=s(66053),i=s(47463);let n=e=>{let t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),r=e.getHours().toString().padStart(2,"0"),i=e.getMinutes().toString().padStart(2,"0"),n=e.getSeconds().toString().padStart(2,"0");return`${t}-${s}-${a} ${r}:${i}:${n}`},l=()=>(0,i.Z)().replaceAll("-","");function o(e,t){return e[t]}let d=e=>a.Z.sanitize(r.TU.parse(e,{async:!1,pedantic:!1,gfm:!0}))},31092:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var a=s(19510);s(71159);var r=s(68570);let i=(0,r.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/[uuid]/CardForm.tsx`),{__esModule:n,$$typeof:l}=i;i.default;let o=(0,r.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/[uuid]/CardForm.tsx#default`);var d=s(35089),u=s(15316);async function c({params:e,searchParams:t}){let s=await (0,d.I8)(),r=s?.user?.email||"",i="string"==typeof t.question?decodeURIComponent(t.question):"",n="string"==typeof t.tags?decodeURIComponent(t.tags):"",l="string"==typeof t.suggestion?decodeURIComponent(t.suggestion):"",c={question:i,suggestion:l,answer:"string"==typeof t.answer?decodeURIComponent(t.answer):"",note:"string"==typeof t.note?decodeURIComponent(t.note):"",tag_list_suggestion:n.split(",")},p="string"==typeof e.uuid&&"add"!==e.uuid?await (0,u.getCard)(e.uuid):void 0;return a.jsx(a.Fragment,{children:p?.status==="success"?a.jsx(o,{card_ext:p.data,email:r,edit_view:!!t.edit,simple:!1,create_new:!1}):a.jsx(o,{card_ext:c,email:r,edit_view:!!t.edit,simple:"simple"in t,create_new:!0})})}},66401:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,2950,4963,6621,934,3656,4349,3945,6836,5011,6619,783,6332,7449,3181],()=>s(67637));module.exports=a})();