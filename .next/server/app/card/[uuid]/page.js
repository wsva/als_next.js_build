(()=>{var e={};e.id=666,e.ids=[666],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},67637:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>i.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>c,routeModule:()=>b,tree:()=>o}),t(31092),t(92352),t(35866);var s=t(23191),n=t(88716),r=t(37922),i=t.n(r),d=t(95231),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);t.d(a,l);let o=["",{children:["card",{children:["[uuid]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,31092)),"/home/runner/work/als_next.js/als_next.js/src/app/card/[uuid]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,92352)),"/home/runner/work/als_next.js/als_next.js/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/runner/work/als_next.js/als_next.js/src/app/card/[uuid]/page.tsx"],u="/card/[uuid]/page",f={require:t,loadChunk:()=>Promise.resolve()},b=new s.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/card/[uuid]/page",pathname:"/card/[uuid]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},99737:(e,a,t)=>{let s={"752d4765be8afd326d32b304cd957453103f93d0":()=>Promise.resolve().then(t.bind(t,29484)).then(e=>e.getUserByEmail),"7be741432e134b84b50ad1a2aed0d93168d824aa":()=>Promise.resolve().then(t.bind(t,29484)).then(e=>e.getUserByUsername),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:()=>Promise.resolve().then(t.bind(t,29484)).then(e=>e.signOutUser),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:()=>Promise.resolve().then(t.bind(t,29484)).then(e=>e.registerUser),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:()=>Promise.resolve().then(t.bind(t,29484)).then(e=>e.signInUser),"0032af294b820d5b2f6ecb599810073224fb8405":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.getCardTest),"2c8f731e7c04d6b71f833304321e741fa16aeefd":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.saveCard),"32a3617889b58b88de5846c96efc11d8a1322d4a":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.saveTag),"40b0e9a5fae5e29abe9213bb007d11cec6f7e31f":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.getCard),"479742cc8645e1909d54f38cd9fe015e9621ab60":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.removeCard),"50b8ee2c01702d556b77028eb169eaff9ea0f820":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.getCardsOfMy),"523b5dd287e6725b6f91274aca1051653bfdf0e6":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.removeTag),"59141756fe4b901c2b6407bb9725bab62d2967e1":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.createTag),"651d629a9efc5ac1f2e83ecc837477b8129dac19":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.getTagAll),"6d2e69b109044da9a0608b4844be959036b9b175":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.setCardFamiliarity),"92a63b1efc916ff008d1272dc5a65580af78af67":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.getCardsOfOthers),ae2756021412af3c7533170046625d9bfe173ca7:()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.saveCardTag),b9098ba02eb30e332c60e216b96eda5868da288a:()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.getTag),fbde93d90dfb682967795128b2ca856ab81d14aa:()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.getCardTag)};async function n(e,...a){return(await s[e]()).apply(null,a)}e.exports={"752d4765be8afd326d32b304cd957453103f93d0":n.bind(null,"752d4765be8afd326d32b304cd957453103f93d0"),"7be741432e134b84b50ad1a2aed0d93168d824aa":n.bind(null,"7be741432e134b84b50ad1a2aed0d93168d824aa"),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:n.bind(null,"ce85166cf1a23c9f2a22a49b4f82895537edcfe6"),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:n.bind(null,"ee535fd2e1d6ef6ab42586363f44c0cbea1161f9"),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:n.bind(null,"fe7b3552d9555bacd46a0fcf077d7272d19fd2c8"),"0032af294b820d5b2f6ecb599810073224fb8405":n.bind(null,"0032af294b820d5b2f6ecb599810073224fb8405"),"2c8f731e7c04d6b71f833304321e741fa16aeefd":n.bind(null,"2c8f731e7c04d6b71f833304321e741fa16aeefd"),"32a3617889b58b88de5846c96efc11d8a1322d4a":n.bind(null,"32a3617889b58b88de5846c96efc11d8a1322d4a"),"40b0e9a5fae5e29abe9213bb007d11cec6f7e31f":n.bind(null,"40b0e9a5fae5e29abe9213bb007d11cec6f7e31f"),"479742cc8645e1909d54f38cd9fe015e9621ab60":n.bind(null,"479742cc8645e1909d54f38cd9fe015e9621ab60"),"50b8ee2c01702d556b77028eb169eaff9ea0f820":n.bind(null,"50b8ee2c01702d556b77028eb169eaff9ea0f820"),"523b5dd287e6725b6f91274aca1051653bfdf0e6":n.bind(null,"523b5dd287e6725b6f91274aca1051653bfdf0e6"),"59141756fe4b901c2b6407bb9725bab62d2967e1":n.bind(null,"59141756fe4b901c2b6407bb9725bab62d2967e1"),"651d629a9efc5ac1f2e83ecc837477b8129dac19":n.bind(null,"651d629a9efc5ac1f2e83ecc837477b8129dac19"),"6d2e69b109044da9a0608b4844be959036b9b175":n.bind(null,"6d2e69b109044da9a0608b4844be959036b9b175"),"92a63b1efc916ff008d1272dc5a65580af78af67":n.bind(null,"92a63b1efc916ff008d1272dc5a65580af78af67"),ae2756021412af3c7533170046625d9bfe173ca7:n.bind(null,"ae2756021412af3c7533170046625d9bfe173ca7"),b9098ba02eb30e332c60e216b96eda5868da288a:n.bind(null,"b9098ba02eb30e332c60e216b96eda5868da288a"),fbde93d90dfb682967795128b2ca856ab81d14aa:n.bind(null,"fbde93d90dfb682967795128b2ca856ab81d14aa")}},65388:(e,a,t)=>{Promise.resolve().then(t.bind(t,20456))},20456:(e,a,t)=>{"use strict";t.d(a,{default:()=>j});var s=t(10326),n=t(51223),r=t(66836),i=t(1311),d=t(36780),l=t(94861),o=t(40271),c=t(2222),u=t(38307),f=t(90831),b=t(14509),m=t(25750),p=t(17577),g=t(35047),x=t(74723),h=t(65825),v=t(53134);t(66401);var y=t(50813);function j({card_ext:e,email:a,edit_view:t,simple:j,create_new:w}){let _=(0,g.useSearchParams)(),[P,S]=(0,p.useState)(t),[U,C]=(0,p.useState)(),[N,q]=(0,p.useState)([]),[A,R]=(0,p.useState)([]),[$,I]=(0,p.useState)([]),{register:k,handleSubmit:T,formState:z,setValue:M,getValues:E,watch:O}=(0,x.cI)({}),D=(0,p.useRef)(null),{ref:F,...V}=k("answer"),G=(0,p.useRef)(null),Q=a=>{if(e){let t=(0,n.$s)(e,a);if(t)return t}let t=_.get(a);if(t)return decodeURIComponent(t)},Y=e=>y.zQ.map(e=>e.color)[e],H=async(e,a)=>{if(!G.current)return;let t=G.current,s=t.selectionStart,n=t.selectionEnd,r=t.value,i=r.slice(0,s)+e+r.slice(s,n)+a+r.slice(n);t.value=i,G.current.value=i,setTimeout(()=>{t.focus();let r=e.length+a.length;s<n?t.setSelectionRange(s,n+r):t.setSelectionRange(s+r,n+r)},0)},K=async e=>{if(!U){h.Am.error("loading");return}if(e.familiarity||(e.familiarity=0),"string"==typeof e.familiarity&&(e.familiarity=parseInt(e.familiarity||"0",10)),"success"===(await (0,v.z_)({...U,...e,created_at:U?.created_at?U.created_at:new Date,updated_at:new Date})).status)h.Am.success("save card success");else{h.Am.error("save card failed");return}if("success"===(await (0,v.pl)({uuid:U.uuid,tag_list_new:$.filter(e=>!A.includes(e)),tag_list_remove:A.filter(e=>!$.includes(e))})).status)h.Am.success("save tag successfully"),R($);else{h.Am.error("save tag failed");return}w&&setTimeout(()=>{window.location.reload()},1e3)};return s.jsx("form",{ref:D,onSubmit:T(K),children:(0,s.jsxs)("div",{className:"w-full space-y-4 mb-10 px-2",children:[U&&U.user_id!==a&&s.jsx("div",{className:"flex flex-row my-1 items-start justify-start gap-4",children:s.jsx(r.O,{className:"text-blue-500 underline",target:"_blank",href:`/card/others?user_id=${U.user_id}`,children:U.user_id})}),(0,s.jsxs)("div",{className:"flex flex-row my-1 items-end justify-end gap-4",children:[s.jsx(i.A,{color:"primary",variant:"solid",onPress:()=>S(!P),children:P?"View":"Edit"}),s.jsx(i.A,{color:"primary",type:"submit",variant:"solid",isLoading:z.isSubmitting,children:"Save"}),s.jsx(i.A,{color:"danger",variant:"solid",onPress:async()=>{U?.uuid&&("success"==(await (0,v.yJ)(U.uuid)).status?h.Am.error("remove card successfully"):h.Am.error("remove card failed"))},children:"Remove"})]}),P?(0,s.jsxs)(s.Fragment,{children:[s.jsx(d.Y,{label:"question",classNames:{input:"text-xl leading-tight font-roboto"},defaultValue:Q("question")||"",...k("question")}),!j&&s.jsx(l.g,{"aria-label":"select familiarity",selectionMode:"single",defaultSelectedKeys:[`${O("familiarity",Q("familiarity")||0)}`],...k("familiarity"),children:s.jsx(o.y,{items:y.zQ,children:y.zQ.map(e=>s.jsx(c.R,{className:`${Y(e.value)}`,children:`${e.value} - ${e.label}`},e.value))})}),s.jsx(u.X,{color:"success",value:$,onValueChange:I,orientation:"horizontal",children:N.map(e=>s.jsx(f.K,{value:e.uuid,children:e.tag},e.uuid))}),!j&&s.jsx(d.Y,{label:"suggestion",classNames:{input:"text-xl leading-tight font-roboto"},minRows:1,maxRows:3,defaultValue:Q("suggestion")||"",...k("suggestion")}),(0,s.jsxs)("div",{className:"flex flex-col gap-1 px-3 py-0.5 bg-default-100 hover:bg-default-200 rounded-medium",children:[s.jsx("label",{className:"text-foreground-500 text-small pb-0.5 pe-2 max-w-full text-ellipsis overflow-hidden",children:"answer"}),(0,s.jsxs)(b.g,{size:"sm",radius:"none",className:"flex flex-row items-center justify-start gap-1",children:[["#","⬌","■","=","≈","➤","\uD83E\uDC46"].map((e,a)=>s.jsx(i.A,{isIconOnly:!0,className:"text-xl",onPress:()=>H(e,""),children:e},`char1-${a}`)),["\xe4","\xc4","\xf6","\xd6","\xfc","\xdc","\xdf","€","`````"].map((e,a)=>s.jsx(i.A,{isIconOnly:!0,className:"text-xl",onPress:()=>H(e,""),children:e},`char2-${a}`)),["**"].map((e,a)=>s.jsx(i.A,{isIconOnly:!0,className:"text-xl",onPress:()=>H(e,e),children:e},`char3-${a}`))]}),s.jsx("textarea",{className:"w-full text-xl leading-tight font-roboto px-1.5 outline-none bg-transparent resize-none",defaultValue:Q("answer")||"",rows:10,autoComplete:"off",autoCorrect:"off",spellCheck:"false",...V,ref:e=>{F(e),G.current=e}})]}),s.jsx(d.Y,{label:"note",classNames:{input:"text-xl leading-tight font-roboto"},defaultValue:Q("note")||"",...k("note")})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("pre",{className:"text-3xl leading-tight font-roboto font-bold text-wrap",children:O("question",Q("question")||"")}),s.jsx(m.j,{}),s.jsx(l.g,{"aria-label":"select familiarity",selectionMode:"single",isDisabled:!0,defaultSelectedKeys:[`${O("familiarity",Q("familiarity")||0)}`],...k("familiarity"),children:s.jsx(o.y,{items:y.zQ,children:y.zQ.map(e=>s.jsx(c.R,{className:`${Y(e.value)}`,children:`${e.value} - ${e.label}`},e.value))})}),s.jsx(u.X,{color:"success",value:$,onValueChange:I,orientation:"horizontal",isDisabled:!0,children:N.filter(e=>$.includes(e.uuid)).map(e=>s.jsx(f.K,{value:e.uuid,children:e.tag},e.uuid))}),s.jsx(m.j,{}),s.jsx("div",{className:"text-md font-roboto mx-8",children:O("suggestion",Q("suggestion")||"")}),s.jsx(m.j,{}),s.jsx("div",{className:"MD my-1 text-xl leading-tight font-roboto indent-0 whitespace-pre-wrap break-words hyphens-auto",dangerouslySetInnerHTML:{__html:(0,n.Hp)(O("answer",Q("answer"))||"")}}),s.jsx(m.j,{}),s.jsx("pre",{className:"text-md font-roboto mx-8",children:O("note",Q("note")||"")})]})]})})}},50813:(e,a,t)=>{"use strict";var s,n;t.d(a,{_Y:()=>r,j8:()=>i,ll:()=>d,nr:()=>l,vA:()=>s,zQ:()=>o}),function(e){e.Normal="normal",e.Easy="easy",e.Unspecified="unspecified",e.Uncomplete="uncomplete"}(s||(s={}));let r=[{value:"unspecified",description:"all"},{value:"normal",description:"familiarity < 6"},{value:"easy",description:"familiarity = 6"},{value:"uncomplete",description:"question or answer is empty"}],i="unspecified",d="all tagged",l="not tagged";!function(e){e[e.NewlyAdded=0]="NewlyAdded",e[e.StillUnfamiliar=1]="StillUnfamiliar",e[e.PassiveUnderstanding=2]="PassiveUnderstanding",e[e.RecognitionWithoutUnderstanding=3]="RecognitionWithoutUnderstanding",e[e.UnderstandingInContext=4]="UnderstandingInContext",e[e.ActiveRecall=5]="ActiveRecall",e[e.NaturalUsage=6]="NaturalUsage"}(n||(n={}));let o=[{value:0,description:"Newly Added",label:"newly added",color:"bg-slate-200"},{value:1,description:"Still Unfamiliar",label:"strange",color:"bg-red-200"},{value:2,description:"Passive Understanding",label:"known",color:"bg-orange-200"},{value:3,description:"Recognition Without Understanding",label:"familiar",color:"bg-amber-200"},{value:4,description:"Understanding in Context",label:"skilled",color:"bg-cyan-200"},{value:5,description:"Active Recall",label:"practiced",color:"bg-green-200"},{value:6,description:"Natural Usage",label:"easy & never appear again",color:"bg-lime-200"}]},51223:(e,a,t)=>{"use strict";t.d(a,{$s:()=>l,Fs:()=>d,Hp:()=>o,p6:()=>i}),t(20339);var s=t(41092),n=t(66053),r=t(47463);let i=e=>{let a=e.getFullYear(),t=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0"),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0"),i=e.getSeconds().toString().padStart(2,"0");return`${a}-${t}-${s} ${n}:${r}:${i}`},d=()=>(0,r.Z)().replaceAll("-","");function l(e,a){return e[a]}let o=e=>s.Z.sanitize(n.TU.parse(e,{async:!1,pedantic:!1,gfm:!0}))},31092:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var s=t(19510);t(71159);var n=t(68570);let r=(0,n.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/[uuid]/CardForm.tsx`),{__esModule:i,$$typeof:d}=r;r.default;let l=(0,n.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/[uuid]/CardForm.tsx#default`);var o=t(83862),c=t(15316);async function u({params:e,searchParams:a}){let t=await (0,o.I8)(),n=t?.user?.email||"",r="string"==typeof a.question?decodeURIComponent(a.question):"",i="string"==typeof a.tags?decodeURIComponent(a.tags):"",d="string"==typeof a.suggestion?decodeURIComponent(a.suggestion):"",u={question:r,suggestion:d,answer:"string"==typeof a.answer?decodeURIComponent(a.answer):"",note:"string"==typeof a.note?decodeURIComponent(a.note):"",tag_list_suggestion:i.split(",")},f="string"==typeof e.uuid&&"add"!==e.uuid?await (0,c.getCard)(e.uuid):void 0;return s.jsx(s.Fragment,{children:f?.status==="success"?s.jsx(l,{card_ext:f.data,email:n,edit_view:!!a.edit,simple:!1,create_new:!1}):s.jsx(l,{card_ext:u,email:n,edit_view:!!a.edit,simple:"simple"in a,create_new:!0})})}},66401:()=>{}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[948,136,372,621,892,945,723,340,851],()=>t(67637));module.exports=s})();