(()=>{var e={};e.id=8226,e.ids=[8226],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},25566:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>o,routeModule:()=>x,tree:()=>c}),a(42168),a(49789),a(35866);var r=a(23191),n=a(88716),s=a(37922),i=a.n(s),l=a(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(t,d);let c=["",{children:["card",{children:["test",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,42168)),"/home/runner/work/als_next.js/als_next.js/src/app/card/test/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,49789)),"/home/runner/work/als_next.js/als_next.js/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/home/runner/work/als_next.js/als_next.js/src/app/card/test/page.tsx"],u="/card/test/page",f={require:a,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/card/test/page",pathname:"/card/test",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},10590:(e,t,a)=>{let r={"17626542b799ad55d66a61eb1c6c83387f0dcdc7":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getOriginalByDomain),"21dad0493aed015526a61d45c462822ff3dbe078":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.saveCorrectionMap),"27292e0db1ea049094aca5cea9ce727e7660c6ad":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getOriginalCategory),"50109cb65c1da634a1805882896e3f4b886dc3b6":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.trashWord),"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getTextByOriginal),"5fb9f8b82dcff8496f64ded8cf754dc38af18221":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getWordInStore),"8123b9003e0dd95f542ea2ad28583619676cff06":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getOriginal),"9ca37af446368f4f1c00eda88cedaf4a6ff1320d":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.searchSentenceByKeyword),b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b:()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.searchWordInStore),d3974c3afa23da13df974e0a5eaa4527d6f92ffa:()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getTextByDomain),e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f:()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getText),e7f35a88891f29a76dee37b1ae73232f1f359a93:()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getTextCategory),f85ba165a1d481d90f9bccb76e2b9271e773c70c:()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.searchSentenceByLemma)};async function n(e,...t){return(await r[e]()).apply(null,t)}e.exports={"17626542b799ad55d66a61eb1c6c83387f0dcdc7":n.bind(null,"17626542b799ad55d66a61eb1c6c83387f0dcdc7"),"21dad0493aed015526a61d45c462822ff3dbe078":n.bind(null,"21dad0493aed015526a61d45c462822ff3dbe078"),"27292e0db1ea049094aca5cea9ce727e7660c6ad":n.bind(null,"27292e0db1ea049094aca5cea9ce727e7660c6ad"),"50109cb65c1da634a1805882896e3f4b886dc3b6":n.bind(null,"50109cb65c1da634a1805882896e3f4b886dc3b6"),"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c":n.bind(null,"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c"),"5fb9f8b82dcff8496f64ded8cf754dc38af18221":n.bind(null,"5fb9f8b82dcff8496f64ded8cf754dc38af18221"),"8123b9003e0dd95f542ea2ad28583619676cff06":n.bind(null,"8123b9003e0dd95f542ea2ad28583619676cff06"),"9ca37af446368f4f1c00eda88cedaf4a6ff1320d":n.bind(null,"9ca37af446368f4f1c00eda88cedaf4a6ff1320d"),b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b:n.bind(null,"b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b"),d3974c3afa23da13df974e0a5eaa4527d6f92ffa:n.bind(null,"d3974c3afa23da13df974e0a5eaa4527d6f92ffa"),e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f:n.bind(null,"e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f"),e7f35a88891f29a76dee37b1ae73232f1f359a93:n.bind(null,"e7f35a88891f29a76dee37b1ae73232f1f359a93"),f85ba165a1d481d90f9bccb76e2b9271e773c70c:n.bind(null,"f85ba165a1d481d90f9bccb76e2b9271e773c70c")}},31330:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,79404,23)),Promise.resolve().then(a.bind(a,25899))},46242:(e,t,a)=>{"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return n}});let r=a(15424);function n(e){let{createServerReference:t}=a(56493);return t(e,r.callServer)}},25899:(e,t,a)=>{"use strict";a.d(t,{default:()=>j});var r=a(10326),n=a(1311),s=a(14509),i=a(99884),l=a(70175),d=a(88336),c=a(38647),o=a(23869),u=a(36780),f=a(17577),x=a(51223),p=a(90434),b=a(61980),m=a(82816),h=a(60449),g=a(53134),v=a(50813);a(66401);var y=a(65825);function j({user_id:e,item:t}){let[a,j]=(0,f.useState)(!1),[w,P]=(0,f.useState)(!1),[_,N]=(0,f.useState)(),S=e=>v.zQ.map(e=>e.color)[e],C=async a=>{if(e!==t.user_id){y.Am.error("this is not your card");return}let{repetitions:r,interval_days:n,ease_factor:s}=t;n||(n=0),s||(s=0),r||(r=0),a<3?(r=0,n=1):(n=0===r?1:1===r?6:Math.round(n*s),r+=1),(s+=.1-(5-a)*(.08+(5-a)*.02))<1.3&&(s=1.3);let i=new Date;i.setDate(i.getDate()+n),await (0,g.gY)({uuid:t.uuid,card_uuid:t.card_uuid,user_id:t.user_id,interval_days:n,ease_factor:s,repetitions:r,familiarity:a,last_review_at:new Date,next_review_at:i})?window.location.reload():y.Am.error("save review error")};return(0,r.jsxs)("div",{className:"flex flex-col my-5 mx-5",children:[(0,r.jsxs)("div",{className:"flex flex-row gap-4 items-end justify-end",children:[r.jsx(n.A,{as:p.default,target:"_blank",color:"secondary",href:`/card/${t.uuid}/?edit=y`,children:"EDIT"}),r.jsx(n.A,{color:"secondary",onPress:()=>window.location.reload(),children:"NEXT"})]}),r.jsx("div",{className:"flex flex-row items-center justify-center",children:t.card.question.length<30?r.jsx("div",{className:"my-5 font-bold text-2xl md:text-4xl lg:text-6xl xl:text-8xl",children:r.jsx("pre",{className:"font-roboto leading-none",children:t.card.question})}):r.jsx("div",{className:"my-5 font-bold text-base md:text-xl lg:text-2xl xl:text-4xl",children:r.jsx("pre",{className:"font-roboto leading-none",children:t.card.question})})}),(0,r.jsxs)("div",{className:"flex flex-row my-5 items-center justify-center gap-4",children:[t.card.suggestion.length>0?r.jsx(n.A,{color:"primary",variant:"solid",onPress:()=>j(!a),children:a?"hide suggestion":"show suggestion"}):null,r.jsx(n.A,{color:"primary",variant:"solid",onPress:()=>P(!w),children:w?"hide answer":"show answer"}),r.jsx(s.g,{variant:"solid",color:"primary",children:(0,r.jsxs)(i.F,{placement:"bottom-end",children:[r.jsx(l.S,{children:(0,r.jsxs)(n.A,{children:["feedback ",r.jsx(b.QBW,{})]})}),r.jsx(d.a,{disallowEmptySelection:!0,className:"max-w-[300px]",selectionMode:"single",onSelectionChange:async e=>{e.currentKey&&await C(parseInt(e.currentKey))},children:r.jsx(c.d,{items:v.zQ,children:v.zQ.map(e=>r.jsx(o.W,{description:e.description,className:`${S(e.value)}`,children:`${e.value} - ${e.label}`},e.value))})})]})})]}),a?r.jsx(u.Y,{isDisabled:!0,classNames:{input:"text-2xl leading-tight font-roboto"},defaultValue:t.card.suggestion}):null,w?r.jsx("div",{className:"MD my-1 text-base md:text-xl lg:text-2xl xl:text-4xl leading-tight font-roboto indent-0 whitespace-pre-wrap break-words hyphens-auto",dangerouslySetInnerHTML:{__html:(0,x.Hp)(t.card.answer)}}):null,w?r.jsx(u.Y,{isDisabled:!0,classNames:{input:"text-2xl leading-tight font-roboto"},defaultValue:t.card.note}):null,t.card.note.indexOf('"lemma":"')>=0&&r.jsx("div",{className:"flex flex-row gap-4 items-center justify-center",children:r.jsx(n.A,{color:"primary",onPress:async()=>{let e=t.card.note.match(/"lemma":"([^"]+)"/);if(e){let t=[e[1].trim()];N(await (0,h.s7)(t))}},children:"View Examples"})}),_&&"success"===_.status&&r.jsx(m.Z,{list:_.data})]})}},82816:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(10326),n=a(90434);function s({list:e,email:t}){return r.jsx("div",{className:"flex flex-col w-full gap-4 py-4",children:e.map(e=>(0,r.jsxs)("div",{className:"flex flex-col w-full items-start bg-slate-200 rounded-md p-1",children:[e.sentence&&r.jsx("div",{className:"text-xl whitespace-pre-wrap",children:e.sentence}),e.source&&r.jsx("div",{className:"text-base",children:e.source}),(0,r.jsxs)("div",{className:"flex flex-row w-full items-end justify-end gap-4",children:[r.jsx(n.default,{className:"text-blue-600 hover:underline",target:"_blank",href:`/word/text/${e.text_uuid}`,children:"View in Text"}),r.jsx(n.default,{className:"text-blue-600 hover:underline",target:"_blank",href:`/card/add?edit=y&content=${encodeURIComponent(e.sentence)}`,children:"Add to Cards"})]})]},e.uuid))})}a(17577)},50813:(e,t,a)=>{"use strict";var r,n;a.d(t,{_Y:()=>s,j8:()=>i,ll:()=>l,nr:()=>d,vA:()=>r,zQ:()=>c}),function(e){e.Normal="normal",e.Easy="easy",e.Unspecified="unspecified",e.Uncomplete="uncomplete"}(r||(r={}));let s=[{value:"unspecified",description:"all"},{value:"normal",description:"familiarity < 6"},{value:"easy",description:"familiarity = 6"},{value:"uncomplete",description:"question or answer is empty"}],i="unspecified",l="all tagged",d="not tagged";!function(e){e[e.NewlyAdded=0]="NewlyAdded",e[e.StillUnfamiliar=1]="StillUnfamiliar",e[e.PassiveUnderstanding=2]="PassiveUnderstanding",e[e.RecognitionWithoutUnderstanding=3]="RecognitionWithoutUnderstanding",e[e.UnderstandingInContext=4]="UnderstandingInContext",e[e.ActiveRecall=5]="ActiveRecall",e[e.NaturalUsage=6]="NaturalUsage"}(n||(n={}));let c=[{value:0,description:"Newly Added",label:"newly added",color:"bg-slate-200"},{value:1,description:"Still Unfamiliar",label:"strange",color:"bg-red-200"},{value:2,description:"Passive Understanding",label:"known",color:"bg-orange-200"},{value:3,description:"Recognition Without Understanding",label:"familiar",color:"bg-amber-200"},{value:4,description:"Understanding in Context",label:"skilled",color:"bg-cyan-200"},{value:5,description:"Active Recall",label:"practiced",color:"bg-green-200"},{value:6,description:"Natural Usage",label:"easy & never appear again",color:"bg-lime-200"}]},51223:(e,t,a)=>{"use strict";a.d(t,{$s:()=>d,Fs:()=>l,Hp:()=>c,p6:()=>i}),a(20339);var r=a(41092),n=a(66053),s=a(47463);let i=e=>{let t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0"),n=e.getHours().toString().padStart(2,"0"),s=e.getMinutes().toString().padStart(2,"0"),i=e.getSeconds().toString().padStart(2,"0");return`${t}-${a}-${r} ${n}:${s}:${i}`},l=()=>(0,s.Z)().replaceAll("-","");function d(e,t){return e[t]}let c=e=>r.Z.sanitize(n.TU.parse(e,{async:!1,pedantic:!1,gfm:!0}))},57371:(e,t,a)=>{"use strict";a.d(t,{default:()=>n.a});var r=a(670),n=a.n(r)},670:(e,t,a)=>{"use strict";let{createProxy:r}=a(68570);e.exports=r("/home/runner/work/als_next.js/als_next.js/node_modules/next/dist/client/link.js")},42168:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var r=a(19510),n=a(15316),s=a(35089);a(71159);var i=a(68570);let l=(0,i.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/test/TestForm.tsx`),{__esModule:d,$$typeof:c}=l;l.default;let o=(0,i.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/test/TestForm.tsx#default`);var u=a(57371);async function f({params:e,searchParams:t}){let a=await (0,s.I8)(),i=a?.user?.email||"",l="string"==typeof t.tag?t.tag:"",d=[];if(!l){let e=await (0,n.getTagAll)(i);"success"===e.status&&(d=e.data)}let c="string"==typeof t.uuid?t.uuid:"",f=l?c?await (0,n.getCardTestByUUID)(c):await (0,n.getCardTest)(i,l):void 0;return r.jsx(r.Fragment,{children:l?f?.status==="success"?r.jsx(o,{user_id:i,item:f.data}):r.jsx("div",{className:"text-2xl",children:"no card for test"}):(0,r.jsxs)("div",{className:"flex flex-col items-start justify-center my-4",children:[r.jsx("div",{className:"text-2xl",children:"Select a tag as the scope"}),d.map(e=>(0,r.jsxs)(u.default,{target:"_blank",className:"flex m-4 text-2xl font-bold text-blue-600 hover:underline",href:`/card/test?tag=${e.uuid}`,children:[e.tag," ",e.description?`(${e.description})`:""]},e.uuid))]})})}},66401:()=>{},854:(e,t,a)=>{"use strict";a.d(t,{$:()=>s});var r=a(17577);function n(e){return null}n.getCollectionNode=function*(e){let{children:t,title:a,items:n}=e;yield{type:"section",props:e,hasChildNodes:!0,rendered:a,"aria-label":e["aria-label"],*childNodes(){if("function"==typeof t){if(!n)throw Error("props.children was a function but props.items is missing");for(let e of n)yield{type:"item",value:e,renderer:t}}else{let e=[];r.Children.forEach(t,t=>{e.push({type:"item",element:t})}),yield*e}}}};let s=n},14509:(e,t,a)=>{"use strict";a.d(t,{g:()=>d});var r=a(82416),n=a(33657),s=a(98349),i=a(10326),l=(0,s.Gp)((e,t)=>{let{Component:a,domRef:s,context:l,children:d,classNames:c,getButtonGroupProps:o}=(0,r.i)({...e,ref:t});return(0,i.jsx)(n.D,{value:l,children:(0,i.jsx)(a,{ref:s,className:c,...o(),children:d})})});l.displayName="HeroUI.ButtonGroup";var d=l},82416:(e,t,a)=>{"use strict";a.d(t,{i:()=>c});var r=a(4601),n=a(19747),s=a(98349),i=a(58435),l=a(17577),d=a(92256);function c(e){var t,a;let c=(0,n.w)(),[o,u]=(0,s.oe)(e,r.D.variantKeys),{ref:f,as:x,children:p,color:b="default",size:m="md",variant:h="solid",radius:g,isDisabled:v=!1,isIconOnly:y=!1,disableRipple:j=null!=(t=null==c?void 0:c.disableRipple)&&t,disableAnimation:w=null!=(a=null==c?void 0:c.disableAnimation)&&a,className:P,..._}=o,N=(0,i.gy)(f),S=(0,l.useMemo)(()=>(0,r.D)({...u,className:P}),[(0,d.Xx)(u),P]);return{Component:x||"div",children:p,domRef:N,context:(0,l.useMemo)(()=>({size:m,color:b,variant:h,radius:g,isIconOnly:y,isDisabled:v,disableAnimation:w,disableRipple:j,fullWidth:!!(null==e?void 0:e.fullWidth)}),[m,b,h,g,v,y,w,j,null==e?void 0:e.fullWidth]),classNames:S,getButtonGroupProps:(0,l.useCallback)(()=>({role:"group",..._}),[_])}}},36780:(e,t,a)=>{"use strict";a.d(t,{Y:()=>h});var r=a(64382),n=a(28142),s=a(98349),i=a(18982),l=a(17577);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(null,arguments)}var c=function(e,t){if("function"==typeof e){e(t);return}e.current=t};let o=function(e,t){var a=(0,l.useRef)();return(0,l.useCallback)(function(r){e.current=r,a.current&&c(a.current,null),a.current=t,t&&c(t,r)},[t])};var u=function(){},f=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],x=l.forwardRef(function(e,t){e.cacheMeasurements,e.maxRows,e.minRows;var a=e.onChange;e.onHeightChange;var r=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(t.includes(r))continue;a[r]=e[r]}return a}(e,f);r.value;var n=o(l.useRef(null),t);return l.useRef(0),l.useRef(),l.createElement("textarea",d({},r,{onChange:void 0===a?u:a,ref:n}))}),p=a(88621),b=a(10326),m=(0,s.Gp)(({style:e,minRows:t=3,maxRows:a=8,cacheMeasurements:s=!1,disableAutosize:d=!1,onHeightChange:c,...o},u)=>{let{Component:f,label:m,description:h,startContent:g,endContent:v,hasHelper:y,shouldLabelBeOutside:j,shouldLabelBeInside:w,isInvalid:P,errorMessage:_,getBaseProps:N,getLabelProps:S,getInputProps:C,getInnerWrapperProps:A,getInputWrapperProps:U,getHelperWrapperProps:q,getDescriptionProps:k,getErrorMessageProps:R,isClearable:$,getClearButtonProps:M}=(0,r.G)({...o,ref:u,isMultiline:!0}),[T,D]=(0,l.useState)(t>1),[E,I]=(0,l.useState)(!1),B=m?(0,b.jsx)("label",{...S(),children:m}):null,G=C(),H=d?(0,b.jsx)("textarea",{...G,style:(0,i.d)(G.style,null!=e?e:{})}):(0,b.jsx)(x,{...G,cacheMeasurements:s,"data-hide-scroll":(0,n.PB)(!E),maxRows:a,minRows:t,style:(0,i.d)(G.style,null!=e?e:{}),onHeightChange:(e,r)=>{1===t&&D(e>=2*r.rowHeight),a>t&&I(e>=a*r.rowHeight),null==c||c(e,r)}}),O=(0,l.useMemo)(()=>$?(0,b.jsx)("button",{...M(),children:(0,b.jsx)(p.f,{})}):null,[$,M]),W=(0,l.useMemo)(()=>g||v?(0,b.jsxs)("div",{...A(),children:[g,H,v]}):(0,b.jsx)("div",{...A(),children:H}),[g,G,v,A]),F=P&&_,Y=F||h;return(0,b.jsxs)(f,{...N(),children:[j?B:null,(0,b.jsxs)("div",{...U(),"data-has-multiple-rows":(0,n.PB)(T),children:[w?B:null,W,O]}),y&&Y?(0,b.jsx)("div",{...q(),children:F?(0,b.jsx)("div",{...R(),children:_}):(0,b.jsx)("div",{...k(),children:h})}):null]})});m.displayName="HeroUI.Textarea";var h=m},38647:(e,t,a)=>{"use strict";a.d(t,{d:()=>r});var r=a(854).$}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,2950,4963,6621,934,3656,4349,3945,1980,6911,7449,3181,6949],()=>a(25566));module.exports=r})();