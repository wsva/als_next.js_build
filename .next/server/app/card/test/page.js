(()=>{var e={};e.id=8226,e.ids=[8226],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},25566:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o}),a(42168),a(49789),a(35866);var n=a(23191),r=a(88716),s=a(37922),l=a.n(s),i=a(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);a.d(t,d);let o=["",{children:["card",{children:["test",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,42168)),"/home/runner/work/als_next.js/als_next.js/src/app/card/test/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,49789)),"/home/runner/work/als_next.js/als_next.js/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/runner/work/als_next.js/als_next.js/src/app/card/test/page.tsx"],u="/card/test/page",f={require:a,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/card/test/page",pathname:"/card/test",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},10590:(e,t,a)=>{let n={"17626542b799ad55d66a61eb1c6c83387f0dcdc7":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getOriginalByDomain),"21dad0493aed015526a61d45c462822ff3dbe078":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.saveCorrectionMap),"27292e0db1ea049094aca5cea9ce727e7660c6ad":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getOriginalCategory),"50109cb65c1da634a1805882896e3f4b886dc3b6":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.trashWord),"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getTextByOriginal),"5fb9f8b82dcff8496f64ded8cf754dc38af18221":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getWordInStore),"8123b9003e0dd95f542ea2ad28583619676cff06":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getOriginal),"9ca37af446368f4f1c00eda88cedaf4a6ff1320d":()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.searchSentenceByKeyword),b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b:()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.searchWordInStore),d3974c3afa23da13df974e0a5eaa4527d6f92ffa:()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getTextByDomain),e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f:()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getText),e7f35a88891f29a76dee37b1ae73232f1f359a93:()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.getTextCategory),f85ba165a1d481d90f9bccb76e2b9271e773c70c:()=>Promise.resolve().then(a.bind(a,98956)).then(e=>e.searchSentenceByLemma)};async function r(e,...t){return(await n[e]()).apply(null,t)}e.exports={"17626542b799ad55d66a61eb1c6c83387f0dcdc7":r.bind(null,"17626542b799ad55d66a61eb1c6c83387f0dcdc7"),"21dad0493aed015526a61d45c462822ff3dbe078":r.bind(null,"21dad0493aed015526a61d45c462822ff3dbe078"),"27292e0db1ea049094aca5cea9ce727e7660c6ad":r.bind(null,"27292e0db1ea049094aca5cea9ce727e7660c6ad"),"50109cb65c1da634a1805882896e3f4b886dc3b6":r.bind(null,"50109cb65c1da634a1805882896e3f4b886dc3b6"),"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c":r.bind(null,"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c"),"5fb9f8b82dcff8496f64ded8cf754dc38af18221":r.bind(null,"5fb9f8b82dcff8496f64ded8cf754dc38af18221"),"8123b9003e0dd95f542ea2ad28583619676cff06":r.bind(null,"8123b9003e0dd95f542ea2ad28583619676cff06"),"9ca37af446368f4f1c00eda88cedaf4a6ff1320d":r.bind(null,"9ca37af446368f4f1c00eda88cedaf4a6ff1320d"),b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b:r.bind(null,"b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b"),d3974c3afa23da13df974e0a5eaa4527d6f92ffa:r.bind(null,"d3974c3afa23da13df974e0a5eaa4527d6f92ffa"),e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f:r.bind(null,"e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f"),e7f35a88891f29a76dee37b1ae73232f1f359a93:r.bind(null,"e7f35a88891f29a76dee37b1ae73232f1f359a93"),f85ba165a1d481d90f9bccb76e2b9271e773c70c:r.bind(null,"f85ba165a1d481d90f9bccb76e2b9271e773c70c")}},31330:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,79404,23)),Promise.resolve().then(a.bind(a,25899))},46242:(e,t,a)=>{"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return r}});let n=a(15424);function r(e){let{createServerReference:t}=a(56493);return t(e,n.callServer)}},25899:(e,t,a)=>{"use strict";a.d(t,{default:()=>j});var n=a(10326),r=a(1311),s=a(14509),l=a(99884),i=a(70175),d=a(88336),o=a(38647),c=a(23869),u=a(36780),f=a(17577),x=a(51223),p=a(90434),b=a(61980),m=a(82816),h=a(60449),g=a(53134),v=a(50813);a(66401);var y=a(65825);function j({user_id:e,item:t}){let[a,j]=(0,f.useState)(!1),[w,P]=(0,f.useState)(!1),[_,N]=(0,f.useState)(),S=e=>v.zQ.map(e=>e.color)[e],C=async a=>{if(e!==t.user_id){y.Am.error("this is not your card");return}let{uuid:n,repetitions:r,interval_days:s,ease_factor:l}=t;s||(s=0),l||(l=0),r||(r=0),a<3?(r=0,s=1):(s=0===r?1:1===r?6:Math.round(s*l),r+=1),(l+=.1-(5-a)*(.08+(5-a)*.02))<1.3&&(l=1.3);let i=new Date;i.setDate(i.getDate()+s),await (0,g.gY)({uuid:n,interval_days:s,ease_factor:l,repetitions:r,familiarity:a,last_review_at:new Date,next_review_at:i})?window.location.reload():y.Am.error("save review error")};return(0,n.jsxs)("div",{className:"flex flex-col my-5 mx-5",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-4 items-end justify-end",children:[n.jsx(r.A,{as:p.default,target:"_blank",color:"secondary",href:`/card/${t.uuid}/?edit=y`,children:"EDIT"}),n.jsx(r.A,{color:"secondary",onPress:()=>window.location.reload(),children:"NEXT"})]}),n.jsx("div",{className:"flex flex-row items-center justify-center",children:t.question.length<30?n.jsx("div",{className:"my-5 font-bold text-2xl md:text-4xl lg:text-6xl xl:text-8xl",children:n.jsx("pre",{className:"font-roboto leading-none",children:t.question})}):n.jsx("div",{className:"my-5 font-bold text-base md:text-xl lg:text-2xl xl:text-4xl",children:n.jsx("pre",{className:"font-roboto leading-none",children:t.question})})}),(0,n.jsxs)("div",{className:"flex flex-row my-5 items-center justify-center gap-4",children:[t.suggestion.length>0?n.jsx(r.A,{color:"primary",variant:"solid",onPress:()=>j(!a),children:a?"hide suggestion":"show suggestion"}):null,n.jsx(r.A,{color:"primary",variant:"solid",onPress:()=>P(!w),children:w?"hide answer":"show answer"}),n.jsx(s.g,{variant:"solid",color:"primary",children:(0,n.jsxs)(l.F,{placement:"bottom-end",children:[n.jsx(i.S,{children:(0,n.jsxs)(r.A,{children:["feedback ",n.jsx(b.QBW,{})]})}),n.jsx(d.a,{disallowEmptySelection:!0,className:"max-w-[300px]",selectionMode:"single",onSelectionChange:async e=>{e.currentKey&&await C(parseInt(e.currentKey))},children:n.jsx(o.d,{items:v.zQ,children:v.zQ.map(e=>n.jsx(c.W,{description:e.description,className:`${S(e.value)}`,children:`${e.value} - ${e.label}`},e.value))})})]})})]}),a?n.jsx(u.Y,{isDisabled:!0,classNames:{input:"text-2xl leading-tight font-roboto"},defaultValue:t.suggestion}):null,w?n.jsx("div",{className:"MD my-1 text-base md:text-xl lg:text-2xl xl:text-4xl leading-tight font-roboto indent-0 whitespace-pre-wrap break-words hyphens-auto",dangerouslySetInnerHTML:{__html:(0,x.Hp)(t.answer)}}):null,w?n.jsx(u.Y,{isDisabled:!0,classNames:{input:"text-2xl leading-tight font-roboto"},defaultValue:t.note}):null,t.note.indexOf('"lemma":"')>=0&&n.jsx("div",{className:"flex flex-row gap-4 items-center justify-center",children:n.jsx(r.A,{color:"primary",onPress:async()=>{let e=t.note.match(/"lemma":"([^"]+)"/);if(e){let t=[e[1].trim()];N(await (0,h.s7)(t))}},children:"View Examples"})}),_&&"success"===_.status&&n.jsx(m.Z,{list:_.data})]})}},82816:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var n=a(10326),r=a(90434);function s({list:e,email:t}){return n.jsx("div",{className:"flex flex-col w-full gap-4 py-4",children:e.map(e=>(0,n.jsxs)("div",{className:"flex flex-col w-full items-start bg-slate-200 rounded-md p-1",children:[e.sentence&&n.jsx("div",{className:"text-xl whitespace-pre-wrap",children:e.sentence}),e.source&&n.jsx("div",{className:"text-base",children:e.source}),(0,n.jsxs)("div",{className:"flex flex-row w-full items-end justify-end gap-4",children:[n.jsx(r.default,{className:"text-blue-600 hover:underline",target:"_blank",href:`/word/text/${e.text_uuid}`,children:"View in Text"}),n.jsx(r.default,{className:"text-blue-600 hover:underline",target:"_blank",href:`/card/add?edit=y&content=${encodeURIComponent(e.sentence)}`,children:"Add to Cards"})]})]},e.uuid))})}a(17577)},50813:(e,t,a)=>{"use strict";var n,r;a.d(t,{_Y:()=>s,j8:()=>l,ll:()=>i,nr:()=>d,vA:()=>n,zQ:()=>o}),function(e){e.Normal="normal",e.Easy="easy",e.Unspecified="unspecified",e.Uncomplete="uncomplete"}(n||(n={}));let s=[{value:"unspecified",description:"all"},{value:"normal",description:"familiarity < 6"},{value:"easy",description:"familiarity = 6"},{value:"uncomplete",description:"question or answer is empty"}],l="unspecified",i="all tagged",d="not tagged";!function(e){e[e.NewlyAdded=0]="NewlyAdded",e[e.StillUnfamiliar=1]="StillUnfamiliar",e[e.PassiveUnderstanding=2]="PassiveUnderstanding",e[e.RecognitionWithoutUnderstanding=3]="RecognitionWithoutUnderstanding",e[e.UnderstandingInContext=4]="UnderstandingInContext",e[e.ActiveRecall=5]="ActiveRecall",e[e.NaturalUsage=6]="NaturalUsage"}(r||(r={}));let o=[{value:0,description:"Newly Added",label:"newly added",color:"bg-slate-200"},{value:1,description:"Still Unfamiliar",label:"strange",color:"bg-red-200"},{value:2,description:"Passive Understanding",label:"known",color:"bg-orange-200"},{value:3,description:"Recognition Without Understanding",label:"familiar",color:"bg-amber-200"},{value:4,description:"Understanding in Context",label:"skilled",color:"bg-cyan-200"},{value:5,description:"Active Recall",label:"practiced",color:"bg-green-200"},{value:6,description:"Natural Usage",label:"easy & never appear again",color:"bg-lime-200"}]},51223:(e,t,a)=>{"use strict";a.d(t,{$s:()=>d,Fs:()=>i,Hp:()=>o,p6:()=>l}),a(20339);var n=a(41092),r=a(66053),s=a(47463);let l=e=>{let t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),n=e.getDate().toString().padStart(2,"0"),r=e.getHours().toString().padStart(2,"0"),s=e.getMinutes().toString().padStart(2,"0"),l=e.getSeconds().toString().padStart(2,"0");return`${t}-${a}-${n} ${r}:${s}:${l}`},i=()=>(0,s.Z)().replaceAll("-","");function d(e,t){return e[t]}let o=e=>n.Z.sanitize(r.TU.parse(e,{async:!1,pedantic:!1,gfm:!0}))},57371:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var n=a(670),r=a.n(n)},670:(e,t,a)=>{"use strict";let{createProxy:n}=a(68570);e.exports=n("/home/runner/work/als_next.js/als_next.js/node_modules/next/dist/client/link.js")},42168:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var n=a(19510),r=a(15316),s=a(35089);a(71159);var l=a(68570);let i=(0,l.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/test/TestForm.tsx`),{__esModule:d,$$typeof:o}=i;i.default;let c=(0,l.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/test/TestForm.tsx#default`);var u=a(57371);async function f({params:e,searchParams:t}){let a=await (0,s.I8)(),l=a?.user?.email||"",i="string"==typeof t.tag?t.tag:"",d=[];if(!i){let e=await (0,r.getTagAll)(l);"success"===e.status&&(d=e.data)}let o="string"==typeof t.uuid?t.uuid:"",f=i?o?await (0,r.getCardTestByUUID)(o):await (0,r.getCardTest)(l,i):void 0;return n.jsx(n.Fragment,{children:i?f?.status==="success"?n.jsx(c,{user_id:l,item:f.data}):n.jsx("div",{className:"text-2xl",children:"no card for test"}):(0,n.jsxs)("div",{className:"flex flex-col items-start justify-center my-4",children:[n.jsx("div",{className:"text-2xl",children:"Select a tag as the scope"}),d.map(e=>(0,n.jsxs)(u.default,{target:"_blank",className:"flex m-4 text-2xl font-bold text-blue-600 hover:underline",href:`/card/test?tag=${e.uuid}`,children:[e.tag," ",e.description?`(${e.description})`:""]},e.uuid))]})})}},66401:()=>{},854:(e,t,a)=>{"use strict";a.d(t,{$:()=>s});var n=a(17577);function r(e){return null}r.getCollectionNode=function*(e){let{children:t,title:a,items:r}=e;yield{type:"section",props:e,hasChildNodes:!0,rendered:a,"aria-label":e["aria-label"],*childNodes(){if("function"==typeof t){if(!r)throw Error("props.children was a function but props.items is missing");for(let e of r)yield{type:"item",value:e,renderer:t}}else{let e=[];n.Children.forEach(t,t=>{e.push({type:"item",element:t})}),yield*e}}}};let s=r},14509:(e,t,a)=>{"use strict";a.d(t,{g:()=>d});var n=a(82416),r=a(33657),s=a(98349),l=a(10326),i=(0,s.Gp)((e,t)=>{let{Component:a,domRef:s,context:i,children:d,classNames:o,getButtonGroupProps:c}=(0,n.i)({...e,ref:t});return(0,l.jsx)(r.D,{value:i,children:(0,l.jsx)(a,{ref:s,className:o,...c(),children:d})})});i.displayName="HeroUI.ButtonGroup";var d=i},82416:(e,t,a)=>{"use strict";a.d(t,{i:()=>o});var n=a(4601),r=a(19747),s=a(98349),l=a(58435),i=a(17577),d=a(92256);function o(e){var t,a;let o=(0,r.w)(),[c,u]=(0,s.oe)(e,n.D.variantKeys),{ref:f,as:x,children:p,color:b="default",size:m="md",variant:h="solid",radius:g,isDisabled:v=!1,isIconOnly:y=!1,disableRipple:j=null!=(t=null==o?void 0:o.disableRipple)&&t,disableAnimation:w=null!=(a=null==o?void 0:o.disableAnimation)&&a,className:P,..._}=c,N=(0,l.gy)(f),S=(0,i.useMemo)(()=>(0,n.D)({...u,className:P}),[(0,d.Xx)(u),P]);return{Component:x||"div",children:p,domRef:N,context:(0,i.useMemo)(()=>({size:m,color:b,variant:h,radius:g,isIconOnly:y,isDisabled:v,disableAnimation:w,disableRipple:j,fullWidth:!!(null==e?void 0:e.fullWidth)}),[m,b,h,g,v,y,w,j,null==e?void 0:e.fullWidth]),classNames:S,getButtonGroupProps:(0,i.useCallback)(()=>({role:"group",..._}),[_])}}},36780:(e,t,a)=>{"use strict";a.d(t,{Y:()=>h});var n=a(64382),r=a(28142),s=a(98349),l=a(18982),i=a(17577);function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(null,arguments)}var o=function(e,t){if("function"==typeof e){e(t);return}e.current=t};let c=function(e,t){var a=(0,i.useRef)();return(0,i.useCallback)(function(n){e.current=n,a.current&&o(a.current,null),a.current=t,t&&o(t,n)},[t])};var u=function(){},f=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],x=i.forwardRef(function(e,t){e.cacheMeasurements,e.maxRows,e.minRows;var a=e.onChange;e.onHeightChange;var n=function(e,t){if(null==e)return{};var a={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(t.includes(n))continue;a[n]=e[n]}return a}(e,f);n.value;var r=c(i.useRef(null),t);return i.useRef(0),i.useRef(),i.createElement("textarea",d({},n,{onChange:void 0===a?u:a,ref:r}))}),p=a(88621),b=a(10326),m=(0,s.Gp)(({style:e,minRows:t=3,maxRows:a=8,cacheMeasurements:s=!1,disableAutosize:d=!1,onHeightChange:o,...c},u)=>{let{Component:f,label:m,description:h,startContent:g,endContent:v,hasHelper:y,shouldLabelBeOutside:j,shouldLabelBeInside:w,isInvalid:P,errorMessage:_,getBaseProps:N,getLabelProps:S,getInputProps:C,getInnerWrapperProps:A,getInputWrapperProps:U,getHelperWrapperProps:q,getDescriptionProps:k,getErrorMessageProps:R,isClearable:$,getClearButtonProps:M}=(0,n.G)({...c,ref:u,isMultiline:!0}),[T,D]=(0,i.useState)(t>1),[E,I]=(0,i.useState)(!1),B=m?(0,b.jsx)("label",{...S(),children:m}):null,G=C(),H=d?(0,b.jsx)("textarea",{...G,style:(0,l.d)(G.style,null!=e?e:{})}):(0,b.jsx)(x,{...G,cacheMeasurements:s,"data-hide-scroll":(0,r.PB)(!E),maxRows:a,minRows:t,style:(0,l.d)(G.style,null!=e?e:{}),onHeightChange:(e,n)=>{1===t&&D(e>=2*n.rowHeight),a>t&&I(e>=a*n.rowHeight),null==o||o(e,n)}}),O=(0,i.useMemo)(()=>$?(0,b.jsx)("button",{...M(),children:(0,b.jsx)(p.f,{})}):null,[$,M]),W=(0,i.useMemo)(()=>g||v?(0,b.jsxs)("div",{...A(),children:[g,H,v]}):(0,b.jsx)("div",{...A(),children:H}),[g,G,v,A]),F=P&&_,Y=F||h;return(0,b.jsxs)(f,{...N(),children:[j?B:null,(0,b.jsxs)("div",{...U(),"data-has-multiple-rows":(0,r.PB)(T),children:[w?B:null,W,O]}),y&&Y?(0,b.jsx)("div",{...q(),children:F?(0,b.jsx)("div",{...R(),children:_}):(0,b.jsx)("div",{...k(),children:h})}):null]})});m.displayName="HeroUI.Textarea";var h=m},38647:(e,t,a)=>{"use strict";a.d(t,{d:()=>n});var n=a(854).$}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),n=t.X(0,[8948,2950,1167,6621,934,3656,4349,3945,1980,6911,7449,3181,6949],()=>a(25566));module.exports=n})();