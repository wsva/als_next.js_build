(()=>{var e={};e.id=967,e.ids=[967],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},45432:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>l.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>o,routeModule:()=>b,tree:()=>c}),t(25981),t(92352),t(35866);var s=t(23191),r=t(88716),n=t(37922),l=t.n(n),i=t(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(a,d);let c=["",{children:["card",{children:["my",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,25981)),"/home/runner/work/als_next.js/als_next.js/src/app/card/my/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,92352)),"/home/runner/work/als_next.js/als_next.js/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/home/runner/work/als_next.js/als_next.js/src/app/card/my/page.tsx"],u="/card/my/page",f={require:t,loadChunk:()=>Promise.resolve()},b=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/card/my/page",pathname:"/card/my",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},99737:(e,a,t)=>{let s={"752d4765be8afd326d32b304cd957453103f93d0":()=>Promise.resolve().then(t.bind(t,29484)).then(e=>e.getUserByEmail),"7be741432e134b84b50ad1a2aed0d93168d824aa":()=>Promise.resolve().then(t.bind(t,29484)).then(e=>e.getUserByUsername),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:()=>Promise.resolve().then(t.bind(t,29484)).then(e=>e.signOutUser),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:()=>Promise.resolve().then(t.bind(t,29484)).then(e=>e.registerUser),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:()=>Promise.resolve().then(t.bind(t,29484)).then(e=>e.signInUser),"0032af294b820d5b2f6ecb599810073224fb8405":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.getCardTest),"2c8f731e7c04d6b71f833304321e741fa16aeefd":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.saveCard),"32a3617889b58b88de5846c96efc11d8a1322d4a":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.saveTag),"40b0e9a5fae5e29abe9213bb007d11cec6f7e31f":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.getCard),"479742cc8645e1909d54f38cd9fe015e9621ab60":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.removeCard),"50b8ee2c01702d556b77028eb169eaff9ea0f820":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.getCardsOfMy),"523b5dd287e6725b6f91274aca1051653bfdf0e6":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.removeTag),"59141756fe4b901c2b6407bb9725bab62d2967e1":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.createTag),"651d629a9efc5ac1f2e83ecc837477b8129dac19":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.getTagAll),"6d2e69b109044da9a0608b4844be959036b9b175":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.setCardFamiliarity),"92a63b1efc916ff008d1272dc5a65580af78af67":()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.getCardsOfOthers),ae2756021412af3c7533170046625d9bfe173ca7:()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.saveCardTag),b9098ba02eb30e332c60e216b96eda5868da288a:()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.getTag),fbde93d90dfb682967795128b2ca856ab81d14aa:()=>Promise.resolve().then(t.bind(t,15316)).then(e=>e.getCardTag)};async function r(e,...a){return(await s[e]()).apply(null,a)}e.exports={"752d4765be8afd326d32b304cd957453103f93d0":r.bind(null,"752d4765be8afd326d32b304cd957453103f93d0"),"7be741432e134b84b50ad1a2aed0d93168d824aa":r.bind(null,"7be741432e134b84b50ad1a2aed0d93168d824aa"),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:r.bind(null,"ce85166cf1a23c9f2a22a49b4f82895537edcfe6"),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:r.bind(null,"ee535fd2e1d6ef6ab42586363f44c0cbea1161f9"),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:r.bind(null,"fe7b3552d9555bacd46a0fcf077d7272d19fd2c8"),"0032af294b820d5b2f6ecb599810073224fb8405":r.bind(null,"0032af294b820d5b2f6ecb599810073224fb8405"),"2c8f731e7c04d6b71f833304321e741fa16aeefd":r.bind(null,"2c8f731e7c04d6b71f833304321e741fa16aeefd"),"32a3617889b58b88de5846c96efc11d8a1322d4a":r.bind(null,"32a3617889b58b88de5846c96efc11d8a1322d4a"),"40b0e9a5fae5e29abe9213bb007d11cec6f7e31f":r.bind(null,"40b0e9a5fae5e29abe9213bb007d11cec6f7e31f"),"479742cc8645e1909d54f38cd9fe015e9621ab60":r.bind(null,"479742cc8645e1909d54f38cd9fe015e9621ab60"),"50b8ee2c01702d556b77028eb169eaff9ea0f820":r.bind(null,"50b8ee2c01702d556b77028eb169eaff9ea0f820"),"523b5dd287e6725b6f91274aca1051653bfdf0e6":r.bind(null,"523b5dd287e6725b6f91274aca1051653bfdf0e6"),"59141756fe4b901c2b6407bb9725bab62d2967e1":r.bind(null,"59141756fe4b901c2b6407bb9725bab62d2967e1"),"651d629a9efc5ac1f2e83ecc837477b8129dac19":r.bind(null,"651d629a9efc5ac1f2e83ecc837477b8129dac19"),"6d2e69b109044da9a0608b4844be959036b9b175":r.bind(null,"6d2e69b109044da9a0608b4844be959036b9b175"),"92a63b1efc916ff008d1272dc5a65580af78af67":r.bind(null,"92a63b1efc916ff008d1272dc5a65580af78af67"),ae2756021412af3c7533170046625d9bfe173ca7:r.bind(null,"ae2756021412af3c7533170046625d9bfe173ca7"),b9098ba02eb30e332c60e216b96eda5868da288a:r.bind(null,"b9098ba02eb30e332c60e216b96eda5868da288a"),fbde93d90dfb682967795128b2ca856ab81d14aa:r.bind(null,"fbde93d90dfb682967795128b2ca856ab81d14aa")}},67767:(e,a,t)=>{Promise.resolve().then(t.bind(t,39380))},39380:(e,a,t)=>{"use strict";t.d(a,{default:()=>m});var s=t(10326),r=t(17577),n=t(76917),l=t(34310),i=t(25750),d=t(41316),c=t(92715),o=t(42088),u=t(20111);t(53134);var f=t(50813),b=t(61980);function m({email:e,tag_list:a}){let[t,m]=(0,r.useState)(f.vA.Normal),[x,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(f.j8),[v,j]=(0,r.useState)([]),[y,w]=(0,r.useState)(1),[_,N]=(0,r.useState)(0),[P,S]=(0,r.useState)(""),[C,U]=(0,r.useState)(1),A=(e,a)=>s.jsx(n.e,{placement:"top-end",className:"bg-slate-300",content:s.jsx("div",{className:"p-1",children:a}),children:s.jsx(l.z,{color:t===e?"success":"default",isDisabled:x,onClick:async()=>{m(e),w(1),U(C+1)},children:e})},e),k=(e,a)=>s.jsx(l.z,{color:g===e?"success":"default",isDisabled:x,onClick:async()=>{h(e),w(1),U(C+1)},children:a},e);return(0,s.jsxs)("div",{className:"flex flex-col w-full gap-2 py-2 px-2",children:[(0,s.jsxs)("div",{className:"flex flex-row flex-wrap w-full items-center justify-start gap-1",children:[s.jsx("div",{className:"w-16",children:"Type"}),f._Y.map(e=>A(e.value,e.description))]}),s.jsx(i.j,{}),(0,s.jsxs)("div",{className:"flex flex-row flex-wrap w-full items-center justify-start gap-1",children:[s.jsx("div",{className:"w-16",children:"Tag"}),k(f.j8,f.j8),s.jsx(i.j,{orientation:"vertical",className:"mx-2 h-5"}),k(f.ll,f.ll),k(f.nr,f.nr),s.jsx(i.j,{orientation:"vertical",className:"mx-2 h-5"}),a.map(e=>k(e.uuid,e.tag))]}),s.jsx(i.j,{}),(0,s.jsxs)("div",{className:"flex flex-row w-full items-center justify-start gap-1",children:[s.jsx("div",{className:"w-16",children:"Cards"}),s.jsx(d.Y,{isClearable:!0,radius:"md",size:"sm",placeholder:"search question",startContent:s.jsx(b.Goc,{className:"text-black/50 mb-0.5 dark:text-white/90 text-slate-400 pointer-events-none flex-shrink-0"}),value:P,onClear:()=>S(""),onChange:e=>S(e.target.value),onKeyDown:e=>{"Enter"==e.key&&(w(1),U(C+1))}})]}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[s.jsx("div",{children:"Page"}),s.jsx(c.g,{showControls:!0,loop:!0,variant:"bordered",total:_,page:y,onChange:e=>{w(e),U(C+1)}})]}),x?s.jsx("div",{className:"flex flex-row w-full items-center justify-center gap-4",children:s.jsx(o.Z,{label:"Loading..."})}):s.jsx(u.Z,{email:e,card_list:v,edit_view:t==f.vA.Uncomplete}),(0,s.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[s.jsx("div",{children:"Page"}),s.jsx(c.g,{showControls:!0,loop:!0,variant:"bordered",total:_,page:y,onChange:e=>{w(e),U(C+1)}})]})]})}},20111:(e,a,t)=>{"use strict";t.d(a,{Z:()=>C});var s=t(10326),r=t(17577),n=t(66836),l=t(76917),i=t(14509),d=t(56655),c=t(41368),o=t(24558),u=t(99884),f=t(70175),b=t(88336),m=t(38647),x=t(23869),p=t(53134),g=t(42088),h=t(38307),v=t(90831),j=t(74723),y=t(65825);function w({email:e,card:a,tag_list:t}){let[l,i]=(0,r.useState)(!1),[d,c]=(0,r.useState)(t||[]),[o,u]=(0,r.useState)([]),[f,b]=(0,r.useState)([]),{handleSubmit:m}=(0,j.cI)(),x=async()=>{let e={uuid:a.uuid,tag_list_new:f.filter(e=>!o.includes(e)),tag_list_remove:o.filter(e=>!f.includes(e))};"success"===(await (0,p.pl)(e)).status?y.Am.success("save tag successfully"):y.Am.error("save tag failed")};return s.jsx(s.Fragment,{children:l?s.jsx(g.Z,{}):s.jsx("form",{onSubmit:m(x),children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex flex-row items-center justify-start gap-1",children:d.length>0?s.jsx(h.X,{color:"success",value:f,onValueChange:b,orientation:"vertical",children:d.map(e=>s.jsx(v.K,{value:e.uuid,children:e.tag},e.uuid))}):s.jsx("div",{children:"not tag found"})}),s.jsx("div",{className:"flex flex-row items-center justify-end gap-1",children:s.jsx(n.O,{as:"button",type:"submit",className:"bg-blue-500 rounded-md text-slate-50 px-2",children:"save"})})]})})})}var _=t(50813),N=t(51223);function P({email:e,card:a}){let[t,l]=(0,r.useState)([]),[i,d]=(0,r.useState)([]),{handleSubmit:c}=(0,j.cI)(),o=async()=>{let t={...a,uuid:(0,N.Fs)(),user_id:e,familiarity:0,note:(a.note?a.note+"\n":"")+`{"collect_from":${JSON.stringify(a.user_id)}, "source_uuid":${JSON.stringify(a.uuid)}}`,updated_at:new Date};if("success"===(await (0,p.z_)(t)).status)y.Am.success("save card successfully");else{y.Am.error("save card failed");return}"success"===(await (0,p.pl)({uuid:a.uuid,tag_list_new:i})).status?y.Am.success("save tag successfully"):y.Am.error("save tag failed")};return s.jsx("form",{onSubmit:c(o),children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[s.jsx("div",{className:"flex flex-row items-center justify-start gap-1",children:t.length>0?s.jsx(h.X,{color:"success",value:i,onValueChange:d,children:t.map(e=>s.jsx(v.K,{value:e.uuid,children:e.tag},e.uuid))}):s.jsx("div",{className:"px-1 pt-1",children:"not tag found"})}),s.jsx("div",{className:"flex flex-row items-center justify-end gap-1",children:s.jsx(n.O,{as:"button",type:"submit",className:"bg-blue-500 rounded-md text-slate-50 px-2",children:"save"})})]})})}function S({email:e,card:a,edit_view:t,tag_list:g}){let[h,v]=(0,r.useState)(a.familiarity),[j,N]=(0,r.useState)(g||[]),S=a.user_id===e,C=e=>S?_.zQ.map(e=>e.color)[e]:_.zQ.map(e=>e.color)[0];return(0,s.jsxs)("div",{className:`flex flex-col w-full items-start rounded-md p-1 ${C(h)}`,children:[s.jsx("div",{className:"flex flex-row w-full items-center justify-start gap-2",children:s.jsx(n.O,{target:"_blank",href:`/card/${a.uuid}${t?"?edit=y":""}`,className:"text-2xl text-blue-600 hover:underline",children:s.jsx("pre",{className:"font-roboto leading-none text-wrap",children:a.question})})}),!S&&s.jsx(n.O,{target:"_blank",href:`/card/market?user_id=${a.user_id}`,className:"text-sm text-gray-500 hover:underline",children:`by ${a.user_id}`}),(0,s.jsxs)("div",{className:"flex flex-row w-full items-end justify-end gap-4",children:[S&&s.jsx(l.e,{content:`current: ${h}
${_.zQ.map(e=>e.description)[h]}`,children:s.jsx(i.g,{variant:"solid",color:"primary",children:(0,s.jsxs)(u.F,{placement:"bottom-end",children:[s.jsx(f.S,{children:s.jsx(n.O,{as:"button",isBlock:!0,className:"text-xl",children:"set familiarity"})}),s.jsx(b.a,{disallowEmptySelection:!0,className:"max-w-[300px]",selectionMode:"single",defaultSelectedKeys:[h],onSelectionChange:async t=>{if(t.currentKey){let s=parseInt(t.currentKey);v(s),"success"===(await (0,p.lq)(e,a.uuid,s)).status?y.Am.success("save familiarity successfully"):y.Am.error("save familiarity failed")}},children:s.jsx(m.d,{items:_.zQ,children:_.zQ.map(e=>s.jsx(x.W,{description:e.description,className:`${C(e.value)}`,children:`${e.value} - ${e.label}`},e.value))})})]})})}),S&&(0,s.jsxs)(d.j,{placement:"top-end",classNames:{content:"bg-slate-200"},children:[s.jsx(c.b,{children:s.jsx(n.O,{as:"button",isBlock:!0,className:"text-xl",children:"edit tag"})}),s.jsx(o.g,{children:s.jsx(w,{email:e,card:a,tag_list:j})})]}),!S&&(0,s.jsxs)(d.j,{placement:"top-end",classNames:{content:"bg-slate-200"},children:[s.jsx(c.b,{children:s.jsx(n.O,{as:"button",isBlock:!0,className:"text-xl",children:"collect"})}),s.jsx(o.g,{children:s.jsx(P,{email:e,card:a})})]})]})]})}function C({email:e,edit_view:a,card_list:t}){return s.jsx("div",{className:"flex flex-col w-full gap-2",children:t.map(t=>s.jsx(S,{email:e,card:t,edit_view:a},t.uuid))})}},50813:(e,a,t)=>{"use strict";var s,r;t.d(a,{_Y:()=>n,j8:()=>l,ll:()=>i,nr:()=>d,vA:()=>s,zQ:()=>c}),function(e){e.Normal="normal",e.Easy="easy",e.Unspecified="unspecified",e.Uncomplete="uncomplete"}(s||(s={}));let n=[{value:"unspecified",description:"all"},{value:"normal",description:"familiarity < 6"},{value:"easy",description:"familiarity = 6"},{value:"uncomplete",description:"question or answer is empty"}],l="unspecified",i="all tagged",d="not tagged";!function(e){e[e.NewlyAdded=0]="NewlyAdded",e[e.StillUnfamiliar=1]="StillUnfamiliar",e[e.PassiveUnderstanding=2]="PassiveUnderstanding",e[e.RecognitionWithoutUnderstanding=3]="RecognitionWithoutUnderstanding",e[e.UnderstandingInContext=4]="UnderstandingInContext",e[e.ActiveRecall=5]="ActiveRecall",e[e.NaturalUsage=6]="NaturalUsage"}(r||(r={}));let c=[{value:0,description:"Newly Added",label:"newly added",color:"bg-slate-200"},{value:1,description:"Still Unfamiliar",label:"strange",color:"bg-red-200"},{value:2,description:"Passive Understanding",label:"known",color:"bg-orange-200"},{value:3,description:"Recognition Without Understanding",label:"familiar",color:"bg-amber-200"},{value:4,description:"Understanding in Context",label:"skilled",color:"bg-cyan-200"},{value:5,description:"Active Recall",label:"practiced",color:"bg-green-200"},{value:6,description:"Natural Usage",label:"easy & never appear again",color:"bg-lime-200"}]},51223:(e,a,t)=>{"use strict";t.d(a,{$s:()=>d,Fs:()=>i,Hp:()=>c,p6:()=>l}),t(20339);var s=t(41092),r=t(66053),n=t(47463);let l=e=>{let a=e.getFullYear(),t=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0"),r=e.getHours().toString().padStart(2,"0"),n=e.getMinutes().toString().padStart(2,"0"),l=e.getSeconds().toString().padStart(2,"0");return`${a}-${t}-${s} ${r}:${n}:${l}`},i=()=>(0,n.Z)().replaceAll("-","");function d(e,a){return e[a]}let c=e=>s.Z.sanitize(r.TU.parse(e,{async:!1,pedantic:!1,gfm:!0}))},25981:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var s=t(19510);t(71159);var r=t(68570);let n=(0,r.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/my/CardFilter.tsx`),{__esModule:l,$$typeof:i}=n;n.default;let d=(0,r.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/my/CardFilter.tsx#default`);var c=t(83862),o=t(15316);async function u({params:e,searchParams:a}){let t=await (0,c.I8)(),r=t?.user?.email||"",n=await (0,o.getTagAll)(r),l="success"===n.status?n.data:[];return s.jsx(d,{email:r,tag_list:l})}}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[948,136,372,621,892,945,723,980,340,851],()=>t(45432));module.exports=s})();