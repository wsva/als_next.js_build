(()=>{var e={};e.id=967,e.ids=[967],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},45432:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>d}),s(25981),s(49789),s(35866);var a=s(23191),r=s(88716),l=s(37922),i=s.n(l),n=s(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let d=["",{children:["card",{children:["my",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,25981)),"/home/runner/work/als_next.js/als_next.js/src/app/card/my/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,49789)),"/home/runner/work/als_next.js/als_next.js/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],o=["/home/runner/work/als_next.js/als_next.js/src/app/card/my/page.tsx"],u="/card/my/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/card/my/page",pathname:"/card/my",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},56045:(e,t,s)=>{let a={"752d4765be8afd326d32b304cd957453103f93d0":()=>Promise.resolve().then(s.bind(s,1702)).then(e=>e.getUserByEmail),"7be741432e134b84b50ad1a2aed0d93168d824aa":()=>Promise.resolve().then(s.bind(s,1702)).then(e=>e.getUserByUsername),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:()=>Promise.resolve().then(s.bind(s,1702)).then(e=>e.signOutUser),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:()=>Promise.resolve().then(s.bind(s,1702)).then(e=>e.registerUser),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:()=>Promise.resolve().then(s.bind(s,1702)).then(e=>e.signInUser)};async function r(e,...t){return(await a[e]()).apply(null,t)}e.exports={"752d4765be8afd326d32b304cd957453103f93d0":r.bind(null,"752d4765be8afd326d32b304cd957453103f93d0"),"7be741432e134b84b50ad1a2aed0d93168d824aa":r.bind(null,"7be741432e134b84b50ad1a2aed0d93168d824aa"),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:r.bind(null,"ce85166cf1a23c9f2a22a49b4f82895537edcfe6"),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:r.bind(null,"ee535fd2e1d6ef6ab42586363f44c0cbea1161f9"),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:r.bind(null,"fe7b3552d9555bacd46a0fcf077d7272d19fd2c8")}},67767:(e,t,s)=>{Promise.resolve().then(s.bind(s,39380))},39380:(e,t,s)=>{"use strict";s.d(t,{default:()=>f});var a=s(10326),r=s(17577),l=s(76917),i=s(34310),n=s(25750),c=s(41316),d=s(92715),o=s(42088),u=s(20111);s(53134);var x=s(50813),m=s(61980);function f({email:e,tag_list:t}){let[s,f]=(0,r.useState)(x.vA.Normal),[p,g]=(0,r.useState)(!1),[h,j]=(0,r.useState)(x.j8),[v,b]=(0,r.useState)([]),[y,w]=(0,r.useState)(1),[_,N]=(0,r.useState)(0),[S,P]=(0,r.useState)(""),[U,A]=(0,r.useState)(1),k=(e,t)=>a.jsx(l.e,{placement:"top-end",className:"bg-slate-300",content:a.jsx("div",{className:"p-1",children:t}),children:a.jsx(i.z,{color:s===e?"success":"default",isDisabled:p,onClick:async()=>{f(e),w(1),A(U+1)},children:e})},e),q=(e,t)=>a.jsx(i.z,{color:h===e?"success":"default",isDisabled:p,onClick:async()=>{j(e),w(1),A(U+1)},children:t},e);return(0,a.jsxs)("div",{className:"flex flex-col w-full gap-2 py-2 px-2",children:[(0,a.jsxs)("div",{className:"flex flex-row flex-wrap w-full items-center justify-start gap-1",children:[a.jsx("div",{className:"w-16",children:"Type"}),x._Y.map(e=>k(e.value,e.description))]}),a.jsx(n.j,{}),(0,a.jsxs)("div",{className:"flex flex-row flex-wrap w-full items-center justify-start gap-1",children:[a.jsx("div",{className:"w-16",children:"Tag"}),q(x.j8,x.j8),a.jsx(n.j,{orientation:"vertical",className:"mx-2 h-5"}),q(x.ll,x.ll),q(x.nr,x.nr),a.jsx(n.j,{orientation:"vertical",className:"mx-2 h-5"}),t.map(e=>q(e.uuid,e.tag))]}),a.jsx(n.j,{}),(0,a.jsxs)("div",{className:"flex flex-row w-full items-center justify-start gap-1",children:[a.jsx("div",{className:"w-16",children:"Cards"}),a.jsx(c.Y,{isClearable:!0,radius:"md",size:"sm",placeholder:"search question",startContent:a.jsx(m.Goc,{className:"text-black/50 mb-0.5 dark:text-white/90 text-slate-400 pointer-events-none flex-shrink-0"}),value:S,onClear:()=>P(""),onChange:e=>P(e.target.value),onKeyDown:e=>{"Enter"==e.key&&(w(1),A(U+1))}})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[a.jsx("div",{children:"Page"}),a.jsx(d.g,{showControls:!0,loop:!0,variant:"bordered",total:_,page:y,onChange:e=>{w(e),A(U+1)}})]}),p?a.jsx("div",{className:"flex flex-row w-full items-center justify-center gap-4",children:a.jsx(o.Z,{label:"Loading..."})}):a.jsx(u.Z,{email:e,card_list:v,edit_view:s==x.vA.Uncomplete}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[a.jsx("div",{children:"Page"}),a.jsx(d.g,{showControls:!0,loop:!0,variant:"bordered",total:_,page:y,onChange:e=>{w(e),A(U+1)}})]})]})}},20111:(e,t,s)=>{"use strict";s.d(t,{Z:()=>U});var a=s(10326),r=s(17577),l=s(66836),i=s(76917),n=s(14509),c=s(56655),d=s(41368),o=s(24558),u=s(99884),x=s(70175),m=s(88336),f=s(38647),p=s(23869),g=s(53134),h=s(42088),j=s(38307),v=s(90831),b=s(74723),y=s(65825);function w({email:e,card:t,tag_list:s}){let[i,n]=(0,r.useState)(!1),[c,d]=(0,r.useState)(s||[]),[o,u]=(0,r.useState)([]),[x,m]=(0,r.useState)([]),{handleSubmit:f}=(0,b.cI)(),p=async()=>{let e={uuid:t.uuid,tag_list_new:x.filter(e=>!o.includes(e)),tag_list_remove:o.filter(e=>!x.includes(e))};"success"===(await (0,g.pl)(e)).status?y.Am.success("save tag successfully"):y.Am.error("save tag failed")};return a.jsx(a.Fragment,{children:i?a.jsx(h.Z,{}):a.jsx("form",{onSubmit:f(p),children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[a.jsx("div",{className:"flex flex-row items-center justify-start gap-1",children:c.length>0?a.jsx(j.X,{color:"success",value:x,onValueChange:m,orientation:"vertical",children:c.map(e=>a.jsx(v.K,{value:e.uuid,children:e.tag},e.uuid))}):a.jsx("div",{children:"not tag found"})}),a.jsx("div",{className:"flex flex-row items-center justify-end gap-1",children:a.jsx(l.O,{as:"button",type:"submit",className:"bg-blue-500 rounded-md text-slate-50 px-2",children:"save"})})]})})})}var _=s(50813),N=s(51223);function S({email:e,card:t}){let[s,i]=(0,r.useState)([]),[n,c]=(0,r.useState)([]),{handleSubmit:d}=(0,b.cI)(),o=async()=>{let s={...t,uuid:(0,N.Fs)(),user_id:e,familiarity:0,note:(t.note?t.note+"\n":"")+`{"collect_from":${JSON.stringify(t.user_id)}, "source_uuid":${JSON.stringify(t.uuid)}}`,updated_at:new Date};if("success"===(await (0,g.z_)(s)).status)y.Am.success("save card successfully");else{y.Am.error("save card failed");return}"success"===(await (0,g.pl)({uuid:t.uuid,tag_list_new:n})).status?y.Am.success("save tag successfully"):y.Am.error("save tag failed")};return a.jsx("form",{onSubmit:d(o),children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[a.jsx("div",{className:"flex flex-row items-center justify-start gap-1",children:s.length>0?a.jsx(j.X,{color:"success",value:n,onValueChange:c,children:s.map(e=>a.jsx(v.K,{value:e.uuid,children:e.tag},e.uuid))}):a.jsx("div",{className:"px-1 pt-1",children:"not tag found"})}),a.jsx("div",{className:"flex flex-row items-center justify-end gap-1",children:a.jsx(l.O,{as:"button",type:"submit",className:"bg-blue-500 rounded-md text-slate-50 px-2",children:"save"})})]})})}function P({email:e,card:t,edit_view:s,tag_list:h}){let[j,v]=(0,r.useState)(t.familiarity),[b,N]=(0,r.useState)(h||[]),P=t.user_id===e,U=e=>P?_.zQ.map(e=>e.color)[e]:_.zQ.map(e=>e.color)[0];return(0,a.jsxs)("div",{className:`flex flex-col w-full items-start rounded-md p-1 ${U(j)}`,children:[a.jsx("div",{className:"flex flex-row w-full items-center justify-start gap-2",children:a.jsx(l.O,{target:"_blank",href:`/card/${t.uuid}${s?"?edit=y":""}`,className:"text-2xl text-blue-600 hover:underline",children:a.jsx("pre",{className:"font-roboto leading-none text-wrap",children:t.question})})}),!P&&a.jsx(l.O,{target:"_blank",href:`/card/market?user_id=${t.user_id}`,className:"text-sm text-gray-500 hover:underline",children:`by ${t.user_id}`}),(0,a.jsxs)("div",{className:"flex flex-row w-full items-end justify-end gap-4",children:[P&&a.jsx(i.e,{content:`current: ${j}
${_.zQ.map(e=>e.description)[j]}`,children:a.jsx(n.g,{variant:"solid",color:"primary",children:(0,a.jsxs)(u.F,{placement:"bottom-end",children:[a.jsx(x.S,{children:a.jsx(l.O,{as:"button",isBlock:!0,className:"text-xl",children:"set familiarity"})}),a.jsx(m.a,{disallowEmptySelection:!0,className:"max-w-[300px]",selectionMode:"single",defaultSelectedKeys:[j],onSelectionChange:async s=>{if(s.currentKey){let a=parseInt(s.currentKey);v(a),"success"===(await (0,g.lq)(e,t.uuid,a)).status?y.Am.success("save familiarity successfully"):y.Am.error("save familiarity failed")}},children:a.jsx(f.d,{items:_.zQ,children:_.zQ.map(e=>a.jsx(p.W,{description:e.description,className:`${U(e.value)}`,children:`${e.value} - ${e.label}`},e.value))})})]})})}),P&&(0,a.jsxs)(c.j,{placement:"top-end",classNames:{content:"bg-slate-200"},children:[a.jsx(d.b,{children:a.jsx(l.O,{as:"button",isBlock:!0,className:"text-xl",children:"edit tag"})}),a.jsx(o.g,{children:a.jsx(w,{email:e,card:t,tag_list:b})})]}),!P&&(0,a.jsxs)(c.j,{placement:"top-end",classNames:{content:"bg-slate-200"},children:[a.jsx(d.b,{children:a.jsx(l.O,{as:"button",isBlock:!0,className:"text-xl",children:"collect"})}),a.jsx(o.g,{children:a.jsx(S,{email:e,card:t})})]})]})]})}function U({email:e,edit_view:t,card_list:s}){return a.jsx("div",{className:"flex flex-col w-full gap-2",children:s.map(s=>a.jsx(P,{email:e,card:s,edit_view:t},s.uuid))})}},50813:(e,t,s)=>{"use strict";var a,r;s.d(t,{_Y:()=>l,j8:()=>i,ll:()=>n,nr:()=>c,vA:()=>a,zQ:()=>d}),function(e){e.Normal="normal",e.Easy="easy",e.Unspecified="unspecified",e.Uncomplete="uncomplete"}(a||(a={}));let l=[{value:"unspecified",description:"all"},{value:"normal",description:"familiarity < 6"},{value:"easy",description:"familiarity = 6"},{value:"uncomplete",description:"question or answer is empty"}],i="unspecified",n="all tagged",c="not tagged";!function(e){e[e.NewlyAdded=0]="NewlyAdded",e[e.StillUnfamiliar=1]="StillUnfamiliar",e[e.PassiveUnderstanding=2]="PassiveUnderstanding",e[e.RecognitionWithoutUnderstanding=3]="RecognitionWithoutUnderstanding",e[e.UnderstandingInContext=4]="UnderstandingInContext",e[e.ActiveRecall=5]="ActiveRecall",e[e.NaturalUsage=6]="NaturalUsage"}(r||(r={}));let d=[{value:0,description:"Newly Added",label:"newly added",color:"bg-slate-200"},{value:1,description:"Still Unfamiliar",label:"strange",color:"bg-red-200"},{value:2,description:"Passive Understanding",label:"known",color:"bg-orange-200"},{value:3,description:"Recognition Without Understanding",label:"familiar",color:"bg-amber-200"},{value:4,description:"Understanding in Context",label:"skilled",color:"bg-cyan-200"},{value:5,description:"Active Recall",label:"practiced",color:"bg-green-200"},{value:6,description:"Natural Usage",label:"easy & never appear again",color:"bg-lime-200"}]},51223:(e,t,s)=>{"use strict";s.d(t,{$s:()=>c,Fs:()=>n,Hp:()=>d,p6:()=>i}),s(20339);var a=s(41092),r=s(66053),l=s(47463);let i=e=>{let t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),r=e.getHours().toString().padStart(2,"0"),l=e.getMinutes().toString().padStart(2,"0"),i=e.getSeconds().toString().padStart(2,"0");return`${t}-${s}-${a} ${r}:${l}:${i}`},n=()=>(0,l.Z)().replaceAll("-","");function c(e,t){return e[t]}let d=e=>a.Z.sanitize(r.TU.parse(e,{async:!1,pedantic:!1,gfm:!0}))},25981:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(19510);s(71159);var r=s(68570);let l=(0,r.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/my/CardFilter.tsx`),{__esModule:i,$$typeof:n}=l;l.default;let c=(0,r.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/my/CardFilter.tsx#default`);var d=s(35089),o=s(15316);async function u({params:e,searchParams:t}){let s=await (0,d.I8)(),r=s?.user?.email||"",l=await (0,o.getTagAll)(r),i="success"===l.status?l.data:[];return a.jsx(c,{email:r,tag_list:i})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,2950,9588,6621,934,3656,4349,3945,6836,1980,6619,6917,2088,7440,4723,854,847,1200],()=>s(45432));module.exports=a})();