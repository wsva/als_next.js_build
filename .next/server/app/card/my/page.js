(()=>{var e={};e.id=967,e.ids=[967],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},45432:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>o}),s(25981),s(49789),s(35866);var a=s(23191),r=s(88716),l=s(37922),i=s.n(l),n=s(95231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let o=["",{children:["card",{children:["my",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,25981)),"/home/runner/work/als_next.js/als_next.js/src/app/card/my/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,49789)),"/home/runner/work/als_next.js/als_next.js/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/home/runner/work/als_next.js/als_next.js/src/app/card/my/page.tsx"],u="/card/my/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/card/my/page",pathname:"/card/my",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},67767:(e,t,s)=>{Promise.resolve().then(s.bind(s,39380))},39380:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var a=s(10326),r=s(17577),l=s(76917),i=s(34310),n=s(25750),c=s(41316),o=s(92715),d=s(42088),u=s(20111);s(53134);var x=s(50813),m=s(61980);function p({email:e,tag_list:t}){let[s,p]=(0,r.useState)(x.vA.Normal),[g,f]=(0,r.useState)(!1),[j,h]=(0,r.useState)(x.j8),[v,y]=(0,r.useState)([]),[w,b]=(0,r.useState)(1),[_,N]=(0,r.useState)(0),[S,A]=(0,r.useState)(""),[P,k]=(0,r.useState)(1),q=(e,t)=>a.jsx(l.e,{placement:"top-end",className:"bg-slate-300",content:a.jsx("div",{className:"p-1",children:t}),children:a.jsx(i.z,{color:s===e?"success":"default",isDisabled:g,onClick:async()=>{p(e),b(1),k(P+1)},children:e})},e),C=(e,t)=>a.jsx(i.z,{color:j===e?"success":"default",isDisabled:g,onClick:async()=>{h(e),b(1),k(P+1)},children:t},e);return(0,a.jsxs)("div",{className:"flex flex-col w-full gap-2 py-2 px-2",children:[(0,a.jsxs)("div",{className:"flex flex-row flex-wrap w-full items-center justify-start gap-1",children:[a.jsx("div",{className:"w-16",children:"Type"}),x._Y.map(e=>q(e.value,e.description))]}),a.jsx(n.j,{}),(0,a.jsxs)("div",{className:"flex flex-row flex-wrap w-full items-center justify-start gap-1",children:[a.jsx("div",{className:"w-16",children:"Tag"}),C(x.j8,x.j8),a.jsx(n.j,{orientation:"vertical",className:"mx-2 h-5"}),C(x.ll,x.ll),C(x.nr,x.nr),a.jsx(n.j,{orientation:"vertical",className:"mx-2 h-5"}),t.map(e=>C(e.uuid,e.tag))]}),a.jsx(n.j,{}),(0,a.jsxs)("div",{className:"flex flex-row w-full items-center justify-start gap-1",children:[a.jsx("div",{className:"w-16",children:"Cards"}),a.jsx(c.Y,{isClearable:!0,radius:"md",size:"sm",placeholder:"search question",startContent:a.jsx(m.Goc,{className:"text-black/50 mb-0.5 dark:text-white/90 text-slate-400 pointer-events-none flex-shrink-0"}),value:S,onClear:()=>A(""),onChange:e=>A(e.target.value),onKeyDown:e=>{"Enter"==e.key&&(b(1),k(P+1))}})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[a.jsx("div",{children:"Page"}),a.jsx(o.g,{showControls:!0,loop:!0,variant:"bordered",total:_,page:w,onChange:e=>{b(e),k(P+1)}})]}),g?a.jsx("div",{className:"flex flex-row w-full items-center justify-center gap-4",children:a.jsx(d.Z,{label:"Loading..."})}):a.jsx(u.Z,{email:e,card_list:v,edit_view:s==x.vA.Uncomplete}),(0,a.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[a.jsx("div",{children:"Page"}),a.jsx(o.g,{showControls:!0,loop:!0,variant:"bordered",total:_,page:w,onChange:e=>{b(e),k(P+1)}})]})]})}},20111:(e,t,s)=>{"use strict";s.d(t,{Z:()=>P});var a=s(10326),r=s(17577),l=s(66836),i=s(76917),n=s(14509),c=s(56655),o=s(41368),d=s(24558),u=s(99884),x=s(70175),m=s(88336),p=s(38647),g=s(23869),f=s(53134),j=s(42088),h=s(38307),v=s(90831),y=s(74723),w=s(65825);function b({email:e,card:t,tag_list:s}){let[i,n]=(0,r.useState)(!1),[c,o]=(0,r.useState)(s||[]),[d,u]=(0,r.useState)([]),[x,m]=(0,r.useState)([]),{handleSubmit:p}=(0,y.cI)(),g=async()=>{let e={uuid:t.uuid,tag_list_new:x.filter(e=>!d.includes(e)),tag_list_remove:d.filter(e=>!x.includes(e))};"success"===(await (0,f.pl)(e)).status?w.Am.success("save tag successfully"):w.Am.error("save tag failed")};return a.jsx(a.Fragment,{children:i?a.jsx(j.Z,{}):a.jsx("form",{onSubmit:p(g),children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[a.jsx("div",{className:"flex flex-row items-center justify-start gap-1",children:c.length>0?a.jsx(h.X,{color:"success",value:x,onValueChange:m,orientation:"vertical",children:c.map(e=>a.jsx(v.K,{value:e.uuid,children:e.tag},e.uuid))}):a.jsx("div",{children:"not tag found"})}),a.jsx("div",{className:"flex flex-row items-center justify-end gap-1",children:a.jsx(l.O,{as:"button",type:"submit",className:"bg-blue-500 rounded-md text-slate-50 px-2",children:"save"})})]})})})}var _=s(50813),N=s(51223);function S({email:e,card:t}){let[s,i]=(0,r.useState)([]),[n,c]=(0,r.useState)([]),{handleSubmit:o}=(0,y.cI)(),d=async()=>{let s={...t,uuid:(0,N.Fs)(),user_id:e,familiarity:0,note:(t.note?t.note+"\n":"")+`{"collect_from":${JSON.stringify(t.user_id)}, "source_uuid":${JSON.stringify(t.uuid)}}`,updated_at:new Date};if("success"===(await (0,f.z_)(s)).status)w.Am.success("save card successfully");else{w.Am.error("save card failed");return}"success"===(await (0,f.pl)({uuid:t.uuid,tag_list_new:n})).status?w.Am.success("save tag successfully"):w.Am.error("save tag failed")};return a.jsx("form",{onSubmit:o(d),children:(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[a.jsx("div",{className:"flex flex-row items-center justify-start gap-1",children:s.length>0?a.jsx(h.X,{color:"success",value:n,onValueChange:c,children:s.map(e=>a.jsx(v.K,{value:e.uuid,children:e.tag},e.uuid))}):a.jsx("div",{className:"px-1 pt-1",children:"not tag found"})}),a.jsx("div",{className:"flex flex-row items-center justify-end gap-1",children:a.jsx(l.O,{as:"button",type:"submit",className:"bg-blue-500 rounded-md text-slate-50 px-2",children:"save"})})]})})}function A({email:e,card:t,edit_view:s,tag_list:j}){let[h,v]=(0,r.useState)(t.familiarity),[y,N]=(0,r.useState)(j||[]),A=t.user_id===e,P=e=>A?_.zQ.map(e=>e.color)[e]:_.zQ.map(e=>e.color)[0];return(0,a.jsxs)("div",{className:`flex flex-col w-full items-start rounded-md p-1 ${P(h)}`,children:[a.jsx("div",{className:"flex flex-row w-full items-center justify-start gap-2",children:a.jsx(l.O,{target:"_blank",href:`/card/${t.uuid}${s?"?edit=y":""}`,className:"text-2xl text-blue-600 hover:underline",children:a.jsx("pre",{className:"font-roboto leading-none text-wrap",children:t.question})})}),!A&&a.jsx(l.O,{target:"_blank",href:`/card/market?user_id=${t.user_id}`,className:"text-sm text-gray-500 hover:underline",children:`by ${t.user_id}`}),(0,a.jsxs)("div",{className:"flex flex-row w-full items-end justify-end gap-4",children:[A&&a.jsx(i.e,{content:`current: ${h}
${_.zQ.map(e=>e.description)[h]}`,children:a.jsx(n.g,{variant:"solid",color:"primary",children:(0,a.jsxs)(u.F,{placement:"bottom-end",children:[a.jsx(x.S,{children:a.jsx(l.O,{as:"button",isBlock:!0,className:"text-xl",children:"set familiarity"})}),a.jsx(m.a,{disallowEmptySelection:!0,className:"max-w-[300px]",selectionMode:"single",defaultSelectedKeys:[h],onSelectionChange:async e=>{if(e.currentKey){let s=parseInt(e.currentKey);v(s),await (0,f.lq)(t.uuid,s)?w.Am.success("save familiarity successfully"):w.Am.error("save familiarity failed")}},children:a.jsx(p.d,{items:_.zQ,children:_.zQ.map(e=>a.jsx(g.W,{description:e.description,className:`${P(e.value)}`,children:`${e.value} - ${e.label}`},e.value))})})]})})}),A&&(0,a.jsxs)(c.j,{placement:"top-end",classNames:{content:"bg-slate-200"},children:[a.jsx(o.b,{children:a.jsx(l.O,{as:"button",isBlock:!0,className:"text-xl",children:"edit tag"})}),a.jsx(d.g,{children:a.jsx(b,{email:e,card:t,tag_list:y})})]}),!A&&(0,a.jsxs)(c.j,{placement:"top-end",classNames:{content:"bg-slate-200"},children:[a.jsx(o.b,{children:a.jsx(l.O,{as:"button",isBlock:!0,className:"text-xl",children:"collect"})}),a.jsx(d.g,{children:a.jsx(S,{email:e,card:t})})]})]})]})}function P({email:e,edit_view:t,card_list:s}){return a.jsx("div",{className:"flex flex-col w-full gap-2",children:s.map(s=>a.jsx(A,{email:e,card:s,edit_view:t},s.uuid))})}},50813:(e,t,s)=>{"use strict";var a,r;s.d(t,{_Y:()=>l,j8:()=>i,ll:()=>n,nr:()=>c,vA:()=>a,zQ:()=>o}),function(e){e.Normal="normal",e.Easy="easy",e.Unspecified="unspecified",e.Uncomplete="uncomplete"}(a||(a={}));let l=[{value:"unspecified",description:"all"},{value:"normal",description:"familiarity < 6"},{value:"easy",description:"familiarity = 6"},{value:"uncomplete",description:"question or answer is empty"}],i="unspecified",n="all tagged",c="not tagged";!function(e){e[e.NewlyAdded=0]="NewlyAdded",e[e.StillUnfamiliar=1]="StillUnfamiliar",e[e.PassiveUnderstanding=2]="PassiveUnderstanding",e[e.RecognitionWithoutUnderstanding=3]="RecognitionWithoutUnderstanding",e[e.UnderstandingInContext=4]="UnderstandingInContext",e[e.ActiveRecall=5]="ActiveRecall",e[e.NaturalUsage=6]="NaturalUsage"}(r||(r={}));let o=[{value:0,description:"Newly Added",label:"newly added",color:"bg-slate-200"},{value:1,description:"Still Unfamiliar",label:"strange",color:"bg-red-200"},{value:2,description:"Passive Understanding",label:"known",color:"bg-orange-200"},{value:3,description:"Recognition Without Understanding",label:"familiar",color:"bg-amber-200"},{value:4,description:"Understanding in Context",label:"skilled",color:"bg-cyan-200"},{value:5,description:"Active Recall",label:"practiced",color:"bg-green-200"},{value:6,description:"Natural Usage",label:"easy & never appear again",color:"bg-lime-200"}]},51223:(e,t,s)=>{"use strict";s.d(t,{$s:()=>c,Fs:()=>n,Hp:()=>o,p6:()=>i}),s(20339);var a=s(41092),r=s(66053),l=s(47463);let i=e=>{let t=e.getFullYear(),s=(e.getMonth()+1).toString().padStart(2,"0"),a=e.getDate().toString().padStart(2,"0"),r=e.getHours().toString().padStart(2,"0"),l=e.getMinutes().toString().padStart(2,"0"),i=e.getSeconds().toString().padStart(2,"0");return`${t}-${s}-${a} ${r}:${l}:${i}`},n=()=>(0,l.Z)().replaceAll("-","");function c(e,t){return e[t]}let o=e=>a.Z.sanitize(r.TU.parse(e,{async:!1,pedantic:!1,gfm:!0}))},25981:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(19510);s(71159);var r=s(68570);let l=(0,r.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/my/CardFilter.tsx`),{__esModule:i,$$typeof:n}=l;l.default;let c=(0,r.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/card/my/CardFilter.tsx#default`);var o=s(35089),d=s(15316);async function u({params:e,searchParams:t}){let s=await (0,o.I8)(),r=s?.user?.email||"",l=await (0,d.getTagAll)(r),i="success"===l.status?l.data:[];return a.jsx(c,{email:r,tag_list:i})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[8948,2950,1167,6621,934,3656,4349,3945,6836,1980,6619,6917,2088,7440,783,854,7449,3181],()=>s(45432));module.exports=a})();