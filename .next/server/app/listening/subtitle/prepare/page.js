(()=>{var e={};e.id=744,e.ids=[744],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},80249:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d}),n(89381),n(92352),n(35866);var s=n(23191),r=n(88716),i=n(37922),a=n.n(i),l=n(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);n.d(t,o);let d=["",{children:["listening",{children:["subtitle",{children:["prepare",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,89381)),"/home/runner/work/als_next.js/als_next.js/src/app/listening/subtitle/prepare/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(n.bind(n,92352)),"/home/runner/work/als_next.js/als_next.js/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/runner/work/als_next.js/als_next.js/src/app/listening/subtitle/prepare/page.tsx"],u="/listening/subtitle/prepare/page",p={require:n,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/listening/subtitle/prepare/page",pathname:"/listening/subtitle/prepare",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},16209:(e,t,n)=>{let s={"752d4765be8afd326d32b304cd957453103f93d0":()=>Promise.resolve().then(n.bind(n,29484)).then(e=>e.getUserByEmail),"7be741432e134b84b50ad1a2aed0d93168d824aa":()=>Promise.resolve().then(n.bind(n,29484)).then(e=>e.getUserByUsername),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:()=>Promise.resolve().then(n.bind(n,29484)).then(e=>e.signOutUser),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:()=>Promise.resolve().then(n.bind(n,29484)).then(e=>e.registerUser),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:()=>Promise.resolve().then(n.bind(n,29484)).then(e=>e.signInUser)};async function r(e,...t){return(await s[e]()).apply(null,t)}e.exports={"752d4765be8afd326d32b304cd957453103f93d0":r.bind(null,"752d4765be8afd326d32b304cd957453103f93d0"),"7be741432e134b84b50ad1a2aed0d93168d824aa":r.bind(null,"7be741432e134b84b50ad1a2aed0d93168d824aa"),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:r.bind(null,"ce85166cf1a23c9f2a22a49b4f82895537edcfe6"),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:r.bind(null,"ee535fd2e1d6ef6ab42586363f44c0cbea1161f9"),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:r.bind(null,"fe7b3552d9555bacd46a0fcf077d7272d19fd2c8")}},79460:(e,t,n)=>{Promise.resolve().then(n.bind(n,70094))},69562:(e,t,n)=>{"use strict";var s;n.d(t,{H:()=>s}),function(e){class t{constructor(e,t){if(this.init_status="error",this.init_error="not initialized",this.position=0,this.start_time="",this.end_time="",this.start_ms=0,this.end_ms=0,this.extend_start_ms=0,this.extend_end_ms=0,this.content_list=[],this.translation_list=[],e.length<2){this.init_status="error",this.init_error="too few lines";return}if(!e[0].match(/^\d+$/)){this.init_status="error",this.init_error=`invalid position number: ${e[0]}`;return}let n=r(e[1]);if(!n){this.init_status="error",this.init_error=`invalid time format: ${e[1]}`;return}this.init_status="success",this.init_error="",this.position=parseInt(e[0]),this.start_time=n.start_time,this.start_ms=n.start_ms,this.end_time=n.end_time,this.end_ms=n.end_ms,t?(e.length>2&&this.content_list.push(this.cleanStyle(e[2])),e.length>3&&e.slice(3).forEach(e=>this.translation_list.push(this.cleanStyle(e)))):e.length>2&&e.slice(2).forEach(e=>this.content_list.push(this.cleanStyle(e)))}append(e){this.end_time=e.end_time,this.end_ms=e.end_ms,this.content_list.push(...e.content_list),this.translation_list.push(...e.translation_list)}playMedia(e,t){e.paused||e.pause();let n=t?this.extend_start_ms:this.start_ms,s=t?this.extend_end_ms:this.end_ms;e.currentTime=n/1e3,e.play();let r=setTimeout(()=>{e.removeEventListener("pause",i),e.pause()},s-n);function i(){clearTimeout(r)}e.addEventListener("pause",i)}getTip(){let e=this.content_list.join(" ").replaceAll(/[a-zA-Z0-9äÄöÖüÜßé]/g,"_"),t=0,n="";for(let s of e)"_"===s?t++:t>0&&(n+=`${t}`,t=0),n+=s;return t>0&&(n+=`${t}`),n}cleanStyle(e){return e.replace(/^<font [^>]*>/,"").replace(/<\/font>$/,"")}content(){return this.content_list.join(" ")}translation(){return this.translation_list.join("\n")}first_line(){return this.content_list?this.content_list[0]:""}last_line(){return this.content_list?this.content_list[this.content_list.length-1]:""}time_str(){return`${this.start_time} --> ${this.end_time}`}}e.Item=t;let n=(e,t,n,s)=>36e5*parseInt(e)+6e4*parseInt(t)+1e3*parseInt(n)+parseInt(s),s=e=>{let t=`${Math.floor(e/1e3/60/60)}`.padStart(2,"0"),n=`${Math.floor(e/1e3/60%60)}`.padStart(2,"0"),s=`${Math.floor(e/1e3%60)}`.padStart(2,"0"),r=`${Math.floor(e%1e3)}`.padStart(2,"0");return`${t}:${n}:${s},${r}`},r=e=>{let t=e.match(/((\d{2}):(\d{2}):(\d{2}),(\d{3})) --> ((\d{2}):(\d{2}):(\d{2}),(\d{3}))/);return t?{start_time:t[1],start_ms:n(t[2],t[3],t[4],t[5]),end_time:t[6],end_ms:n(t[7],t[8],t[9],t[10])}:null},i=(e,t)=>`${s(e)} --> ${s(t)}`,a=e=>{let t=e.trim().replaceAll("\r\n","\n").replaceAll("\r","\n").split("\n"),n=[],s=[];for(let e of t){if(""===(e=e.trim())){s.length>0&&(n.push(s),s=[]);continue}s.push(e)}return s.length>0&&n.push(s),n},l=e=>{let t=[];for(let n of e){if(t.length>0&&t[t.length-1].last_line().match(/[a-zA-Z0-9äÄöÖüÜßé,:-]$/)&&n.first_line().match(/^[0-9a-z]/)){t[t.length-1].append(n);continue}t.push(n)}for(let e=0;e<t.length;e++)t[e].position=e+1;return t};e.parse_srt_content=(e,n)=>{let s=a(e),r=[],i=s.map(e=>{let s=new t(e,n);return"error"===s.init_status&&r.push(s.init_error),s}).filter(e=>e.content_list.length>0);if(0===r.length){let e=l(l(l(i)));for(let t=0;t<e.length;t++)e[t].position=t+1,e[t].extend_start_ms=t>0?e[t-1].start_ms:e[t].start_ms,e[t].extend_end_ms=t+1<e.length?e[t+1].end_ms:e[t].end_ms;return{status:"success",data:e}}return{status:"error",error:r.join("\n")}},e.build_srt_content=e=>{let t="";return e.forEach(e=>{t+=`${e.position}
${i(e.start_ms,e.end_ms)}
`,e.content_list.length>0&&(t+=`${e.content()}
`),e.translation_list.length>0&&(t+=`${e.translation()}
`),t+=`
`}),t},e.hideWord=e=>{let t=e.replaceAll(/[a-zA-Z0-9äÄöÖüÜßé]/g,"_"),n=0,s="";for(let e of t)"_"===e?n++:n>0&&(s+=`${n}`,n=0),s+=e;return n>0&&(s+=`${n}`),s},e.pureContent=e=>e.replaceAll(/[^a-zA-Z0-9äÄöÖüÜßé]/g,""),e.splitContent=(e,t)=>{let n=[],s="";for(let r of e){if(r.match(/[a-zA-Z0-9äÄöÖüÜßé]/)){s+=r;continue}""!==s&&(n.push({isWord:!0,content:s}),s=""),t||n.push({isWord:!1,content:r})}return""!==s&&n.push({isWord:!0,content:s}),n},e.from_breakpoints=e=>{let n=[];for(let s=1;s<e.length;s++){let r=[`${s}`,i(e[s-1],e[s]),"content"];n.push(new t(r,!1))}return n}}(s||(s={}))},70094:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var s=n(10326),r=n(17577),i=n(41316),a=n(14509),l=n(99884),o=n(70175),d=n(1311),c=n(88336),u=n(23869),p=n(69562),h=n(61980);function m(){let[e,t]=(0,r.useState)(!1),[n,m]=(0,r.useState)(""),[_,f]=(0,r.useState)(""),[x,b]=(0,r.useState)(""),g=(0,r.useRef)(null),y=t=>{let n=p.H.parse_srt_content(t,e);"success"===n.status?n.data.length>0&&(b(p.H.build_srt_content(n.data)),m("")):m(n.error)};return(0,s.jsxs)("div",{className:"flex flex-col gap-4 my-2",children:[(0,s.jsxs)("div",{className:"flex flex-row my-1 items-center justify-center gap-4",children:[s.jsx(i.Y,{className:"hidden",type:"file",ref:g,onChange:async e=>{let t=e.target.files[0];f(t.name);let n=(await t.text()).trim().replaceAll("\r\n","\n").replaceAll("\r","\n"),s=[];for(let e of n.split("\n"))if(!(s.length<1)||"1"===e){if(s.length>0&&e.endsWith("`;"))break;s.push(e)}y(s.join("\n"))}}),s.jsx(a.g,{variant:"solid",color:"primary",children:(0,s.jsxs)(l.F,{placement:"bottom-end",children:[s.jsx(o.S,{children:(0,s.jsxs)(d.A,{children:["select subtitle ",s.jsx(h.QBW,{})]})}),(0,s.jsxs)(c.a,{disallowEmptySelection:!0,className:"max-w-[300px]",selectionMode:"single",onSelectionChange:e=>{"no_translation"===e.currentKey?t(!1):t(!0),g.current?.click()},children:[s.jsx(u.W,{description:"This subtitle file does not contain translations.",children:"No Translation"},"no_translation"),s.jsx(u.W,{description:"This subtitle file contains translations.",children:"With Translation"},"with_translation")]})]})}),s.jsx(d.A,{color:"primary",variant:"solid",onPress:()=>{let e=new Blob([x],{type:"text/plain"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=_,document.body.appendChild(n),n.click(),URL.revokeObjectURL(t),document.body.removeChild(n)},isDisabled:!_||!x,children:"Download"})]}),n.length>0&&s.jsx("pre",{className:"my-4 items-center justify-center",children:n}),s.jsx("pre",{className:"my-4 items-center justify-center bg-slate-300 p-2",children:x})]})}},89381:(e,t,n)=>{"use strict";n.r(t),n.d(t,{$$typeof:()=>a,__esModule:()=>i,default:()=>l});var s=n(68570);let r=(0,s.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/listening/subtitle/prepare/page.tsx`),{__esModule:i,$$typeof:a}=r;r.default;let l=(0,s.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/listening/subtitle/prepare/page.tsx#default`)},33159:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});var s=n(66621);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),s=t.X(0,[948,136,372,621,980,340],()=>n(80249));module.exports=s})();