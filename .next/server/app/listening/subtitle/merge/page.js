(()=>{var e={};e.id=1915,e.ids=[1915],e.modules={53524:e=>{"use strict";e.exports=require("@prisma/client")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},65983:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(9759),s(49789),s(35866);var n=s(23191),r=s(88716),i=s(37922),l=s.n(i),a=s(95231),o={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);s.d(t,o);let d=["",{children:["listening",{children:["subtitle",{children:["merge",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,9759)),"/home/runner/work/als_next.js/als_next.js/src/app/listening/subtitle/merge/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,49789)),"/home/runner/work/als_next.js/als_next.js/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,33159))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/home/runner/work/als_next.js/als_next.js/src/app/listening/subtitle/merge/page.tsx"],u="/listening/subtitle/merge/page",h={require:s,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/listening/subtitle/merge/page",pathname:"/listening/subtitle/merge",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},56045:(e,t,s)=>{let n={"752d4765be8afd326d32b304cd957453103f93d0":()=>Promise.resolve().then(s.bind(s,1702)).then(e=>e.getUserByEmail),"7be741432e134b84b50ad1a2aed0d93168d824aa":()=>Promise.resolve().then(s.bind(s,1702)).then(e=>e.getUserByUsername),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:()=>Promise.resolve().then(s.bind(s,1702)).then(e=>e.signOutUser),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:()=>Promise.resolve().then(s.bind(s,1702)).then(e=>e.registerUser),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:()=>Promise.resolve().then(s.bind(s,1702)).then(e=>e.signInUser)};async function r(e,...t){return(await n[e]()).apply(null,t)}e.exports={"752d4765be8afd326d32b304cd957453103f93d0":r.bind(null,"752d4765be8afd326d32b304cd957453103f93d0"),"7be741432e134b84b50ad1a2aed0d93168d824aa":r.bind(null,"7be741432e134b84b50ad1a2aed0d93168d824aa"),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:r.bind(null,"ce85166cf1a23c9f2a22a49b4f82895537edcfe6"),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:r.bind(null,"ee535fd2e1d6ef6ab42586363f44c0cbea1161f9"),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:r.bind(null,"fe7b3552d9555bacd46a0fcf077d7272d19fd2c8")}},97344:(e,t,s)=>{Promise.resolve().then(s.bind(s,8647))},69562:(e,t,s)=>{"use strict";var n;s.d(t,{H:()=>n}),function(e){class t{constructor(e,t){if(this.init_status="error",this.init_error="not initialized",this.position=0,this.start_time="",this.end_time="",this.start_ms=0,this.end_ms=0,this.extend_start_ms=0,this.extend_end_ms=0,this.content_list=[],this.translation_list=[],e.length<2){this.init_status="error",this.init_error="too few lines";return}if(!e[0].match(/^\d+$/)){this.init_status="error",this.init_error=`invalid position number: ${e[0]}`;return}let s=r(e[1]);if(!s){this.init_status="error",this.init_error=`invalid time format: ${e[1]}`;return}this.init_status="success",this.init_error="",this.position=parseInt(e[0]),this.start_time=s.start_time,this.start_ms=s.start_ms,this.end_time=s.end_time,this.end_ms=s.end_ms,t?(e.length>2&&this.content_list.push(this.cleanStyle(e[2])),e.length>3&&e.slice(3).forEach(e=>this.translation_list.push(this.cleanStyle(e)))):e.length>2&&e.slice(2).forEach(e=>this.content_list.push(this.cleanStyle(e)))}append(e){this.end_time=e.end_time,this.end_ms=e.end_ms,this.content_list.push(...e.content_list),this.translation_list.push(...e.translation_list)}playMedia(e,t){e.paused||e.pause();let s=t?this.extend_start_ms:this.start_ms,n=t?this.extend_end_ms:this.end_ms;e.currentTime=s/1e3,e.play();let r=setTimeout(()=>{e.removeEventListener("pause",i),e.pause()},n-s);function i(){clearTimeout(r)}e.addEventListener("pause",i)}getTip(){let e=this.content_list.join(" ").replaceAll(/[a-zA-Z0-9äÄöÖüÜßé]/g,"_"),t=0,s="";for(let n of e)"_"===n?t++:t>0&&(s+=`${t}`,t=0),s+=n;return t>0&&(s+=`${t}`),s}cleanStyle(e){return e.replace(/^<font [^>]*>/,"").replace(/<\/font>$/,"")}content(){return this.content_list.join(" ")}translation(){return this.translation_list.join("\n")}first_line(){return this.content_list?this.content_list[0]:""}last_line(){return this.content_list?this.content_list[this.content_list.length-1]:""}time_str(){return`${this.start_time} --> ${this.end_time}`}}e.Item=t;let s=(e,t,s,n)=>36e5*parseInt(e)+6e4*parseInt(t)+1e3*parseInt(s)+parseInt(n),n=e=>{let t=`${Math.floor(e/1e3/60/60)}`.padStart(2,"0"),s=`${Math.floor(e/1e3/60%60)}`.padStart(2,"0"),n=`${Math.floor(e/1e3%60)}`.padStart(2,"0"),r=`${Math.floor(e%1e3)}`.padStart(2,"0");return`${t}:${s}:${n},${r}`},r=e=>{let t=e.match(/((\d{2}):(\d{2}):(\d{2}),(\d{3})) --> ((\d{2}):(\d{2}):(\d{2}),(\d{3}))/);return t?{start_time:t[1],start_ms:s(t[2],t[3],t[4],t[5]),end_time:t[6],end_ms:s(t[7],t[8],t[9],t[10])}:null},i=(e,t)=>`${n(e)} --> ${n(t)}`,l=e=>{let t=e.trim().replaceAll("\r\n","\n").replaceAll("\r","\n").split("\n"),s=[],n=[];for(let e of t){if(""===(e=e.trim())){n.length>0&&(s.push(n),n=[]);continue}n.push(e)}return n.length>0&&s.push(n),s},a=e=>{let t=[];for(let s of e){if(t.length>0&&t[t.length-1].last_line().match(/[a-zA-Z0-9äÄöÖüÜßé,:-]$/)&&s.first_line().match(/^[0-9a-z]/)){t[t.length-1].append(s);continue}t.push(s)}for(let e=0;e<t.length;e++)t[e].position=e+1;return t};e.parse_srt_content=(e,s)=>{let n=l(e),r=[],i=n.map(e=>{let n=new t(e,s);return"error"===n.init_status&&r.push(n.init_error),n}).filter(e=>e.content_list.length>0);if(0===r.length){let e=a(a(a(i)));for(let t=0;t<e.length;t++)e[t].position=t+1,e[t].extend_start_ms=t>0?e[t-1].start_ms:e[t].start_ms,e[t].extend_end_ms=t+1<e.length?e[t+1].end_ms:e[t].end_ms;return{status:"success",data:e}}return{status:"error",error:r.join("\n")}},e.build_srt_content=e=>{let t="";return e.forEach(e=>{t+=`${e.position}
${i(e.start_ms,e.end_ms)}
`,e.content_list.length>0&&(t+=`${e.content()}
`),e.translation_list.length>0&&(t+=`${e.translation()}
`),t+=`
`}),t},e.hideWord=e=>{let t=e.replaceAll(/[a-zA-Z0-9äÄöÖüÜßé]/g,"_"),s=0,n="";for(let e of t)"_"===e?s++:s>0&&(n+=`${s}`,s=0),n+=e;return s>0&&(n+=`${s}`),n},e.pureContent=e=>e.replaceAll(/[^a-zA-Z0-9äÄöÖüÜßé]/g,""),e.splitContent=(e,t)=>{let s=[],n="";for(let r of e){if(r.match(/[a-zA-Z0-9äÄöÖüÜßé]/)){n+=r;continue}""!==n&&(s.push({isWord:!0,content:n}),n=""),t||s.push({isWord:!1,content:r})}return""!==n&&s.push({isWord:!0,content:n}),s},e.from_breakpoints=e=>{let s=[];for(let n=1;n<e.length;n++){let r=[`${n}`,i(e[n-1],e[n]),"content"];s.push(new t(r,!1))}return s}}(n||(n={}))},8647:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var n=s(10326),r=s(17577),i=s(41316),l=s(1311),a=s(14509),o=s(69562),d=s(61980);function c(){let[e,t]=(0,r.useState)(""),[s,c]=(0,r.useState)(""),[u,h]=(0,r.useState)([]),[p,m]=(0,r.useState)([]),[f,_]=(0,r.useState)(""),[x,g]=(0,r.useState)(0),[b,j]=(0,r.useState)(!1),v=(0,r.useRef)(null),y=(0,r.useRef)(null),P=e=>{let t=o.H.parse_srt_content(e,!1);"success"===t.status?t.data.length>0&&(h(t.data),_("")):_(t.error)},$=e=>{let t=o.H.parse_srt_content(e,!1);"success"===t.status?t.data.length>0&&(m(t.data),_(""),w(u,t.data)):_(t.error)},w=(e,t)=>{j(!0);let s=e.map((e,s)=>{e.translation_list=[];let n=s+x;return n>=0&&n<t.length&&e.translation_list.push(...t[n].content_list),e});c(o.H.build_srt_content(s)),j(!1)};return(0,n.jsxs)("div",{className:"flex flex-col gap-4 my-2",children:[(0,n.jsxs)("div",{className:"flex flex-row my-1 items-center justify-center gap-4",children:[n.jsx(i.Y,{className:"hidden",type:"file",ref:v,onChange:async e=>{let s=e.target.files[0];t(s.name);let n=(await s.text()).trim().replaceAll("\r\n","\n").replaceAll("\r","\n"),r=[];for(let e of n.split("\n"))if(!(r.length<1)||"1"===e){if(r.length>0&&e.endsWith("`;"))break;r.push(e)}P(r.join("\n"))}}),n.jsx(l.A,{color:"primary",variant:"solid",isDisabled:u.length>0,onPress:()=>v.current?.click(),children:"select original subtitle"}),n.jsx(i.Y,{className:"hidden",type:"file",ref:y,onChange:async e=>{let t=e.target.files[0],s=(await t.text()).trim().replaceAll("\r\n","\n").replaceAll("\r","\n"),n=[];for(let e of s.split("\n"))if(!(n.length<1)||"1"===e){if(n.length>0&&e.endsWith("`;"))break;n.push(e)}$(n.join("\n"))}}),n.jsx(l.A,{color:"primary",variant:"solid",isDisabled:p.length>0,onPress:()=>y.current?.click(),children:"select translated subtitle"}),n.jsx(l.A,{color:"primary",variant:"solid",onPress:()=>{let t=new Blob([s],{type:"text/plain"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=e,document.body.appendChild(r),r.click(),URL.revokeObjectURL(n),document.body.removeChild(r)},isDisabled:!e||!s,children:"Download"})]}),(0,n.jsxs)("div",{className:"flex flex-row my-1 items-center justify-center gap-4",children:["Set offsite of the second subtitle",(0,n.jsxs)(a.g,{color:"primary",children:[n.jsx(l.A,{isIconOnly:!0,isDisabled:b,onPress:()=>{g(x-1),w(u,p)},children:n.jsx(d.pwh,{})}),n.jsx(i.Y,{className:"w-10",radius:"none",color:"primary",isDisabled:!0,classNames:{input:"text-lg font-bold text-black"},value:`${x}`}),n.jsx(l.A,{isIconOnly:!0,isDisabled:b,onPress:()=>{g(x+1),w(u,p)},children:n.jsx(d.poH,{})})]})]}),f.length>0&&n.jsx("pre",{className:"my-4 items-center justify-center",children:f}),n.jsx("pre",{className:"my-4 items-center justify-center bg-slate-300 p-2",children:s})]})}},9759:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>a});var n=s(68570);let r=(0,n.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/listening/subtitle/merge/page.tsx`),{__esModule:i,$$typeof:l}=r;r.default;let a=(0,n.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/app/listening/subtitle/merge/page.tsx#default`)},33159:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var n=s(66621);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},14509:(e,t,s)=>{"use strict";s.d(t,{g:()=>o});var n=s(82416),r=s(33657),i=s(98349),l=s(10326),a=(0,i.Gp)((e,t)=>{let{Component:s,domRef:i,context:a,children:o,classNames:d,getButtonGroupProps:c}=(0,n.i)({...e,ref:t});return(0,l.jsx)(r.D,{value:a,children:(0,l.jsx)(s,{ref:i,className:d,...c(),children:o})})});a.displayName="HeroUI.ButtonGroup";var o=a},82416:(e,t,s)=>{"use strict";s.d(t,{i:()=>d});var n=s(4601),r=s(19747),i=s(98349),l=s(58435),a=s(17577),o=s(92256);function d(e){var t,s;let d=(0,r.w)(),[c,u]=(0,i.oe)(e,n.D.variantKeys),{ref:h,as:p,children:m,color:f="default",size:_="md",variant:x="solid",radius:g,isDisabled:b=!1,isIconOnly:j=!1,disableRipple:v=null!=(t=null==d?void 0:d.disableRipple)&&t,disableAnimation:y=null!=(s=null==d?void 0:d.disableAnimation)&&s,className:P,...$}=c,w=(0,l.gy)(h),A=(0,a.useMemo)(()=>(0,n.D)({...u,className:P}),[(0,o.Xx)(u),P]);return{Component:p||"div",children:m,domRef:w,context:(0,a.useMemo)(()=>({size:_,color:f,variant:x,radius:g,isIconOnly:j,isDisabled:b,disableAnimation:y,disableRipple:v,fullWidth:!!(null==e?void 0:e.fullWidth)}),[_,f,x,g,b,j,y,v,null==e?void 0:e.fullWidth]),classNames:A,getButtonGroupProps:(0,a.useCallback)(()=>({role:"group",...$}),[$])}}},41316:(e,t,s)=>{"use strict";s.d(t,{Y:()=>d});var n=s(64382),r=s(88621),i=s(17577),l=s(98349),a=s(10326),o=(0,l.Gp)((e,t)=>{let{Component:s,label:l,description:o,isClearable:d,startContent:c,endContent:u,labelPlacement:h,hasHelper:p,isOutsideLeft:m,shouldLabelBeOutside:f,errorMessage:_,isInvalid:x,getBaseProps:g,getLabelProps:b,getInputProps:j,getInnerWrapperProps:v,getInputWrapperProps:y,getMainWrapperProps:P,getHelperWrapperProps:$,getDescriptionProps:w,getErrorMessageProps:A,getClearButtonProps:S}=(0,n.G)({...e,ref:t}),q=l?(0,a.jsx)("label",{...b(),children:l}):null,k=(0,i.useMemo)(()=>d?(0,a.jsx)("button",{...S(),children:u||(0,a.jsx)(r.f,{})}):u,[d,S]),M=(0,i.useMemo)(()=>{let e=x&&_,t=e||o;return p&&t?(0,a.jsx)("div",{...$(),children:e?(0,a.jsx)("div",{...A(),children:_}):(0,a.jsx)("div",{...w(),children:o})}):null},[p,x,_,o,$,A,w]),I=(0,i.useMemo)(()=>(0,a.jsxs)("div",{...v(),children:[c,(0,a.jsx)("input",{...j()}),k]}),[c,k,j,v]),N=(0,i.useMemo)(()=>f?(0,a.jsxs)("div",{...P(),children:[(0,a.jsxs)("div",{...y(),children:[m?null:q,I]}),M]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{...y(),children:[q,I]}),M]}),[h,M,f,q,I,_,o,P,y,A,w]);return(0,a.jsxs)(s,{...g(),children:[m?q:null,N]})});o.displayName="HeroUI.Input";var d=o}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[8948,2950,9588,6621,934,3656,1980,847],()=>s(65983));module.exports=n})();