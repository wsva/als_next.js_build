exports.id=847,exports.ids=[847],exports.modules={64306:(e,r,s)=>{Promise.resolve().then(s.t.bind(s,12994,23)),Promise.resolve().then(s.t.bind(s,96114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,79671,23)),Promise.resolve().then(s.t.bind(s,41868,23)),Promise.resolve().then(s.t.bind(s,84759,23))},25854:(e,r,s)=>{Promise.resolve().then(s.bind(s,99588)),Promise.resolve().then(s.bind(s,55596))},55596:(e,r,s)=>{"use strict";s.d(r,{default:()=>o});var t=s(10326);s(17577);var a=s(54824),n=s(35047),i=s(65825);function o({children:e}){let r=(0,n.useRouter)();return(0,t.jsxs)(a.p,{navigate:r.push,children:[t.jsx(i.Ix,{position:"bottom-right",hideProgressBar:!0,className:"z-50"}),e]})}s(45996)},99588:(e,r,s)=>{"use strict";s.d(r,{default:()=>y});var t=s(10326),a=s(39681),n=s(74474),i=s(2234),o=s(1311),d=s(90434);s(17577),s(15424);var l=s(46242),c=(0,l.$)("ce85166cf1a23c9f2a22a49b4f82895537edcfe6");(0,l.$)("7be741432e134b84b50ad1a2aed0d93168d824aa"),(0,l.$)("752d4765be8afd326d32b304cd957453103f93d0"),(0,l.$)("ee535fd2e1d6ef6ab42586363f44c0cbea1161f9"),(0,l.$)("fe7b3552d9555bacd46a0fcf077d7272d19fd2c8");var u=s(99884),h=s(70175),f=s(88336),g=s(23869);function p({session:e}){return(0,t.jsxs)(u.F,{placement:"bottom-start",children:[t.jsx(h.S,{children:t.jsx("div",{className:"text-lg rounded-lg bg-slate-200 px-2 py-0.5",children:e.user?.name})}),(0,t.jsxs)(f.a,{"aria-label":"User Actions",variant:"flat",children:[(0,t.jsxs)(g.W,{className:"h-14 gap-2",children:[t.jsx("p",{className:"font-bold",children:e.user?.name}),t.jsx("p",{className:"font-bold",children:e.user?.email})]},"profile"),t.jsx(g.W,{children:"My Settings"},"settings"),t.jsx(g.W,{className:"text-danger",color:"danger",onPress:async()=>{await c()},children:"Sign Out"},"logout")]})]})}var m=s(24088),x=s(35047);function b(){let e=(0,x.useRouter)();return(0,t.jsxs)(u.F,{children:[t.jsx(m.k,{children:t.jsx(h.S,{children:"Word"})}),(0,t.jsxs)(f.a,{children:[t.jsx(g.W,{href:"/word/store",description:"select words in store",onPress:()=>e.push("/word/store"),children:"Word Store"},"word_store"),t.jsx(g.W,{href:"/word/original",description:"view original texts",onPress:()=>e.push("/word/original"),children:"Original"},"word_original"),t.jsx(g.W,{href:"/word/text",description:"view preprocessed texts",onPress:()=>e.push("/word/text"),children:"Text"},"word_text"),t.jsx(g.W,{href:"/word/sentence",description:"search sentences",onPress:()=>e.push("/word/sentence"),children:"Sentence"},"word_sentence")]})]})}function j(){let e=(0,x.useRouter)();return(0,t.jsxs)(u.F,{children:[t.jsx(m.k,{children:t.jsx(h.S,{children:"Listening"})}),(0,t.jsxs)(f.a,{children:[t.jsx(g.W,{href:"/listening/dictation",description:"dictation",onPress:()=>e.push("/listening/dictation"),children:"dictation"},"listening_dictation"),t.jsx(g.W,{href:"/listening/subtitle/prepare",description:"clean up the styles and merge separated lines",onPress:()=>e.push("/listening/subtitle/prepare"),children:"prepare subtitle"},"listening_prepare"),t.jsx(g.W,{href:"/listening/subtitle/merge",description:"merge original and translated subtitles",onPress:()=>e.push("/listening/subtitle/merge"),children:"merge subtitles"},"listening_merge")]})]})}function v(){let e=(0,x.useRouter)();return(0,t.jsxs)(u.F,{children:[t.jsx(m.k,{children:t.jsx(h.S,{children:"Blog"})}),(0,t.jsxs)(f.a,{children:[t.jsx(g.W,{href:"/blog",description:"all blogs",onPress:()=>e.push("/blog"),children:"Blog"},"blog_index"),t.jsx(g.W,{href:"/blog/add",description:"add new blog",onPress:()=>e.push("/blog/add"),children:"Add Blog"},"blog_add"),t.jsx(g.W,{href:"/blog/all_of_others",description:"blogs by others",onPress:()=>e.push("/blog/all_of_others"),children:"View Blogs By Others"},"blog_all_of_others"),t.jsx(g.W,{href:"/blog/all_of_another",description:"blogs by another",onPress:()=>e.push("/blog/all_of_another"),children:"View Blogs By Another"},"blog_all_of_another")]})]})}function _(){let e=(0,x.useRouter)();return(0,t.jsxs)(u.F,{children:[t.jsx(m.k,{children:t.jsx(h.S,{children:"Card"})}),(0,t.jsxs)(f.a,{children:[t.jsx(g.W,{href:"/card/tag",description:"manage tags",onPress:()=>e.push("/card/tag"),children:"Manage Tags"},"card_tag"),t.jsx(g.W,{href:"/card/add?edit=y",description:"add new card",onPress:()=>e.push("/card/add?edit=y"),children:"Add Card"},"card_add"),t.jsx(g.W,{href:"/card/my",description:"my cards",onPress:()=>e.push("/card/my"),children:"My Cards"},"card_my"),t.jsx(g.W,{href:"/card/market",description:"cards by others",onPress:()=>e.push("/card/market"),children:"Card Market"},"card_market"),t.jsx(g.W,{href:"/card/test",description:"learn cards",onPress:()=>e.push("/card/test"),children:"Card Test"},"test")]})]})}var w=s(76715);function y({session:e}){return(0,t.jsxs)(a.R,{shouldHideOnScroll:!0,maxWidth:"full",className:"bg-gradient-to-b from-[#EBE1DA] to-[#FFF5EE]",classNames:{item:["text-sm","sm:text-xl","text-gray-500","uppercase","data-[active=true]:font-bold"]},children:[t.jsx(n.H,{className:"flex-grow-0 mr-1 sm:mr-4",children:t.jsx(d.default,{className:"font-bold text-sm sm:text-2xl text-red-500",href:"/",children:"ALS"})}),(0,t.jsxs)(i.U,{className:"flex gap-1 sm:gap-4",justify:"start",children:[t.jsx(b,{}),t.jsx(_,{}),t.jsx(j,{}),t.jsx(v,{})]}),t.jsx(i.U,{justify:"end",children:e?.user?t.jsx(p,{session:e}):t.jsx(o.A,{variant:"bordered",className:"text-gray-500",onPress:()=>(0,w.zB)("wsva_oauth2"),children:"Login"})})]})}},1702:(e,r,s)=>{"use strict";s.r(r),s.d(r,{getUserByEmail:()=>c,getUserByUsername:()=>l,registerUser:()=>u,signInUser:()=>h,signOutUser:()=>f});var t=s(27745);s(26461);var a=s(3656),n=s(58299),i=s(4205),o=s(34171),d=s(73978);async function l(e){try{let r=await n.prisma.auth_user.findFirst({where:{username:e}});if(!r)return{status:"error",error:"user not found"};return{status:"success",data:r}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function c(e){try{let r=await n.prisma.auth_user.findUnique({where:{email:e}});if(!r)return{status:"error",error:"user not found"};return{status:"success",data:r}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function u(e){try{let r=i.registerSchema.safeParse(e);if(!r.success)return{status:"error",error:r.error.errors};let{username:s,email:t,password:a}=r.data,d=await l(s);if("success"===d.status)return{status:"error",error:"username has been used"};let u=await c(t);if("success"===u.status)return{status:"error",error:"email has been used"};let h=(0,o.hashSync)(a,10),f=await n.prisma.auth_user.create({data:{password:h,is_superuser:!1,username:s,first_name:"",last_name:"",email:t,is_staff:!1,is_active:!0,date_joined:new Date}});return{status:"success",data:{name:f.username,email:f.email}}}catch(e){return console.log(e),{status:"error",error:"internal error"}}}async function h(e){try{let r=await (0,a.signIn)("credentials",{email:e.email,password:e.password,redirect:!1});return console.log(r),{status:"success",data:"signin successfully"}}catch(e){if(console.log(e),e instanceof d.AuthError){if("CredentialsSignin"===e.type)return{status:"error",error:"invalid credentials"};return{status:"error",error:"signin failed 1"}}return{status:"error",error:"signin failed 2"}}}async function f(){await (0,a.signOut)({redirectTo:"/"})}(0,s(85723).ensureServerEntryExports)([l,c,u,h,f]),(0,t.registerServerReference)("7be741432e134b84b50ad1a2aed0d93168d824aa",l),(0,t.registerServerReference)("752d4765be8afd326d32b304cd957453103f93d0",c),(0,t.registerServerReference)("ee535fd2e1d6ef6ab42586363f44c0cbea1161f9",u),(0,t.registerServerReference)("fe7b3552d9555bacd46a0fcf077d7272d19fd2c8",h),(0,t.registerServerReference)("ce85166cf1a23c9f2a22a49b4f82895537edcfe6",f)},49789:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>p,metadata:()=>g});var t=s(19510);s(5023);var a=s(68570);let n=(0,a.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/components/Providers.tsx`),{__esModule:i,$$typeof:o}=n;n.default;let d=(0,a.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/components/Providers.tsx#default`),l=(0,a.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/components/navbar/TopNav.tsx`),{__esModule:c,$$typeof:u}=l;l.default;let h=(0,a.createProxy)(String.raw`/home/runner/work/als_next.js/als_next.js/src/components/navbar/TopNav.tsx#default`);var f=s(35089);let g={title:"ALS",description:"Generated by create next app"};async function p({children:e}){let r=await (0,f.I8)();return t.jsx("html",{lang:"en",children:t.jsx("body",{className:"min-h-svh font-roboto bg-[#FFF5EE] pb-20",children:(0,t.jsxs)(d,{children:[t.jsx(h,{session:r}),t.jsx("main",{className:"container mx-auto",children:e})]})})})}},3656:(e,r,s)=>{"use strict";s.d(r,{signIn:()=>a,signOut:()=>n});let{handlers:t,signIn:a,signOut:n,auth:i}=(0,s(73978).default)({session:{strategy:"jwt"},providers:[{id:"wsva_oauth2",name:"WsvaProvider",type:"oauth",issuer:"wsva_oauth2",authorization:{url:process.env.OAUTH2_AUTHORIZATION,params:{scope:"openid profile email"}},token:process.env.OAUTH2_TOKEN,userinfo:process.env.OAUTH2_USERINFO,clientId:process.env.OAUTH2_CLIENT_ID,checks:["pkce","state"],profile:e=>({name:e.name,email:e.email})}],debug:!0})},35089:(e,r,s)=>{"use strict";s.d(r,{I8:()=>i,handlers:()=>t});let{handlers:t,signIn:a,signOut:n,auth:i}=(0,s(62950).ZP)({session:{strategy:"jwt"},providers:[{id:"wsva_oauth2",name:"WsvaProvider",type:"oauth",issuer:"wsva_oauth2",authorization:{url:process.env.OAUTH2_AUTHORIZATION,params:{scope:"openid profile email"}},token:process.env.OAUTH2_TOKEN,userinfo:process.env.OAUTH2_USERINFO,clientId:process.env.OAUTH2_CLIENT_ID,checks:["pkce","state"],profile:e=>({name:e.name,email:e.email})}],debug:!0})},58299:(e,r,s)=>{"use strict";s.d(r,{prisma:()=>a});var t=s(53524);let a=global.prisma||new t.PrismaClient({log:["query"]})},4205:(e,r,s)=>{"use strict";s.d(r,{registerSchema:()=>a});var t=s(10692);let a=t.z.object({username:t.z.string(),email:t.z.string().email(),password:t.z.string().min(6,{message:"Password must be at least 6 characters"})})},5023:()=>{}};