exports.id=3537,exports.ids=[3537],exports.modules={56045:(e,t,a)=>{let r={"752d4765be8afd326d32b304cd957453103f93d0":()=>Promise.resolve().then(a.bind(a,1702)).then(e=>e.getUserByEmail),"7be741432e134b84b50ad1a2aed0d93168d824aa":()=>Promise.resolve().then(a.bind(a,1702)).then(e=>e.getUserByUsername),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:()=>Promise.resolve().then(a.bind(a,1702)).then(e=>e.signOutUser),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:()=>Promise.resolve().then(a.bind(a,1702)).then(e=>e.registerUser),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:()=>Promise.resolve().then(a.bind(a,1702)).then(e=>e.signInUser)};async function s(e,...t){return(await r[e]()).apply(null,t)}e.exports={"752d4765be8afd326d32b304cd957453103f93d0":s.bind(null,"752d4765be8afd326d32b304cd957453103f93d0"),"7be741432e134b84b50ad1a2aed0d93168d824aa":s.bind(null,"7be741432e134b84b50ad1a2aed0d93168d824aa"),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:s.bind(null,"ce85166cf1a23c9f2a22a49b4f82895537edcfe6"),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:s.bind(null,"ee535fd2e1d6ef6ab42586363f44c0cbea1161f9"),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:s.bind(null,"fe7b3552d9555bacd46a0fcf077d7272d19fd2c8")}},9633:(e,t,a)=>{let r={"17626542b799ad55d66a61eb1c6c83387f0dcdc7":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getOriginalByDomain),"21dad0493aed015526a61d45c462822ff3dbe078":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.saveCorrectionMap),"27292e0db1ea049094aca5cea9ce727e7660c6ad":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getOriginalCategory),"50109cb65c1da634a1805882896e3f4b886dc3b6":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.trashWord),"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getTextByOriginal),"5fb9f8b82dcff8496f64ded8cf754dc38af18221":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getWordInStore),"8123b9003e0dd95f542ea2ad28583619676cff06":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getOriginal),"9ca37af446368f4f1c00eda88cedaf4a6ff1320d":()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.searchSentenceByKeyword),b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b:()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.searchWordInStore),d3974c3afa23da13df974e0a5eaa4527d6f92ffa:()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getTextByDomain),e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f:()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getText),e7f35a88891f29a76dee37b1ae73232f1f359a93:()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.getTextCategory),f85ba165a1d481d90f9bccb76e2b9271e773c70c:()=>Promise.resolve().then(a.bind(a,71774)).then(e=>e.searchSentenceByLemma)};async function s(e,...t){return(await r[e]()).apply(null,t)}e.exports={"17626542b799ad55d66a61eb1c6c83387f0dcdc7":s.bind(null,"17626542b799ad55d66a61eb1c6c83387f0dcdc7"),"21dad0493aed015526a61d45c462822ff3dbe078":s.bind(null,"21dad0493aed015526a61d45c462822ff3dbe078"),"27292e0db1ea049094aca5cea9ce727e7660c6ad":s.bind(null,"27292e0db1ea049094aca5cea9ce727e7660c6ad"),"50109cb65c1da634a1805882896e3f4b886dc3b6":s.bind(null,"50109cb65c1da634a1805882896e3f4b886dc3b6"),"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c":s.bind(null,"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c"),"5fb9f8b82dcff8496f64ded8cf754dc38af18221":s.bind(null,"5fb9f8b82dcff8496f64ded8cf754dc38af18221"),"8123b9003e0dd95f542ea2ad28583619676cff06":s.bind(null,"8123b9003e0dd95f542ea2ad28583619676cff06"),"9ca37af446368f4f1c00eda88cedaf4a6ff1320d":s.bind(null,"9ca37af446368f4f1c00eda88cedaf4a6ff1320d"),b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b:s.bind(null,"b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b"),d3974c3afa23da13df974e0a5eaa4527d6f92ffa:s.bind(null,"d3974c3afa23da13df974e0a5eaa4527d6f92ffa"),e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f:s.bind(null,"e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f"),e7f35a88891f29a76dee37b1ae73232f1f359a93:s.bind(null,"e7f35a88891f29a76dee37b1ae73232f1f359a93"),f85ba165a1d481d90f9bccb76e2b9271e773c70c:s.bind(null,"f85ba165a1d481d90f9bccb76e2b9271e773c70c")}},71774:(e,t,a)=>{"use strict";a.r(t),a.d(t,{getOriginal:()=>l,getOriginalByDomain:()=>f,getOriginalCategory:()=>o,getText:()=>m,getTextByDomain:()=>b,getTextByOriginal:()=>g,getTextCategory:()=>u,getWordInStore:()=>c,saveCorrectionMap:()=>w,searchSentenceByKeyword:()=>h,searchSentenceByLemma:()=>_,searchWordInStore:()=>i,trashWord:()=>y});var r=a(24330);a(60166);var s=a(13538),d=a(40644),n=a(53524);async function c(e,t,a,r){let d=n.Prisma.sql`
        select * from word_store t0 where 1 = 1
    `;n.Prisma.sql`
        select count(1) as total from word_store t0 where 1 = 1
    `;let c=n.Prisma.sql`
        and not exists(select 1 from word_trash t1 where t1.word = t0.word)
    `,i=e?n.Prisma.sql`
            and not exists(select 1 from qsa_card t1
                where (t1.question = t0.word or t1.suggestion = t0.word) and t1.user_id = ${e})
        `:n.Prisma.sql``,o=t?n.Prisma.sql`
            and t0.language = ${t}
        `:n.Prisma.sql``,f=n.Prisma.sql`
        order by count desc, word asc
    `,l=n.Prisma.sql`
        limit ${r} offset ${(a-1)*r}
    `;try{let e=n.Prisma.join([d,c,i,o,f,l]," "),t=await s._.$queryRaw(e),u=n.Prisma.sql`select count(1) as total from word_store`,b=await s._.$queryRaw(u),g=Number(b[0]?.total||0);return{status:"success",data:t,total_records:g,page:a,total_pages:Math.ceil(g/r)}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function i(e,t,a,r,d){let c=(e,t)=>e?n.Prisma.sql`
                select t0.*,
                (select string_agg(t1.uuid, ',') from qsa_card t1 where 1 =1 
                    and (t1.question = t0.word or t1.suggestion = t0.word)
                    and t1.user_id = ${e}
                ) as card_uuid,
                ${t} as sort_order
                from word_store t0 where 1 = 1
            `:n.Prisma.sql`
            select t0.*,
            null as card_uuid,
            ${t} as sort_order
            from word_store t0 where 1 = 1
        `,i=a.replaceAll(/\s+/g," ").replaceAll(/^\s+|\s+$/g,""),o=n.Prisma.sql`
        and lower(t0.word) = lower(${i})
    `,f=n.Prisma.sql`
        and lower(t0.word) != lower(${i})
        and lower(t0.word) like lower(${"%"+i+"%"})
    `,l=n.Prisma.join([c(e,1),o,n.Prisma.sql`union`,c(e,2),f]," ");try{let e=n.Prisma.join([n.Prisma.sql`select * from (`,l,n.Prisma.sql`) as t`,n.Prisma.sql`order by sort_order`,n.Prisma.sql`limit ${d} offset ${(r-1)*d}`]," "),t=await s._.$queryRaw(e),a=n.Prisma.join([n.Prisma.sql`select count(1) as total from (`,l,n.Prisma.sql`) as t`]," "),c=await s._.$queryRaw(a),i=Number(c[0]?.total||0);return{status:"success",data:t,total_records:i,page:r,total_pages:Math.ceil(i/d)}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function o(){try{let e=await s._.statistic_original.findMany({distinct:["domain","language"],select:{domain:!0,language:!0}});return{status:"success",data:e}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function f(e,t){try{let a=await s._.statistic_original.findMany({where:{domain:e,language:t},select:{uuid:!0,source:!0,domain:!0,language:!0}});return{status:"success",data:a}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function l(e){try{let t=await s._.statistic_original.findUnique({where:{uuid:e}});if(!t)return{status:"error",error:"no original found"};return{status:"success",data:t}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function u(){try{let e=await s._.$queryRaw(n.Prisma.sql`SELECT distinct t1.domain, t1.language
        FROM
        	statistic_text t0, statistic_original t1
        WHERE
            t0.original_uuid = t1.uuid
        `);return{status:"success",data:e}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function b(e,t){if(!(0,d.x)(e)||!(0,d.x)(t))return{status:"error",error:"invaid sql param"};try{let a=await s._.$queryRaw(n.Prisma.sql`SELECT t1.source source, t1.domain, t1.language,
        t0.uuid, t0.version, '' content, t0.created_by, t0.created_at, t0.updated_at
        FROM
        	statistic_text t0, statistic_original t1
        WHERE
            t0.original_uuid = t1.uuid
            and t1.domain = ${e}
            and t1.language = ${t}
        `);return{status:"success",data:a}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function g(e){if(!(0,d.x)(e))return{status:"error",error:"invaid sql param"};try{let t=await s._.$queryRaw(n.Prisma.sql`SELECT t1.source source, t1.domain, t1.language,
        t0.uuid, t0.version, '' content, t0.created_by, t0.created_at, t0.updated_at
        FROM
        	statistic_text t0, statistic_original t1
        WHERE
            t0.original_uuid = t1.uuid
            and t0.original_uuid = ${e}
        `);return{status:"success",data:t}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function m(e){if(!(0,d.x)(e))return{status:"error",error:"invaid sql param"};try{let t=await s._.$queryRaw(n.Prisma.sql`SELECT t1.source source, t0.* 
            FROM
                statistic_text t0, statistic_original t1
            WHERE
                t0.original_uuid = t1.uuid
                and t0.uuid=${e}
            `);return{status:"success",data:t}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function h(e){if(0==e.length)return{status:"error",error:"no keyword found"};try{let t=`SELECT t2.source source, t2.domain, t0.* 
            FROM
                statistic_sentence t0, statistic_text t1, statistic_original t2
            WHERE
                t0.text_uuid = t1.uuid
                and t1.original_uuid = t2.uuid
                ${e.map(e=>`and LOWER(t0.sentence) like '%${e.toLowerCase()}%'`).join(" ")}
                limit 100
            `,a=await s._.$queryRaw(n.Prisma.sql([t]));return{status:"success",data:a}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function _(e){if(0==e.length)return{status:"error",error:"no keyword found"};try{let t=`SELECT t2.source source, t2.domain, t0.* 
            FROM
                statistic_sentence t0, statistic_text t1, statistic_original t2
            WHERE
                t0.text_uuid = t1.uuid
                and t1.original_uuid = t2.uuid
                and exists (select 1 from statistic_lemma t3
                        where t3.sentence_uuid = t0.uuid
                        ${e.map(e=>`and t3.lemma = '${e}'`).join(" ")}
                    )
                limit 100
            `,a=await s._.$queryRaw(n.Prisma.sql([t]));return{status:"success",data:a}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function y(e,t){try{let a=await s._.word_trash.create({data:{uuid:(0,d.Fs)(),word:e,created_by:t,created_at:new Date,updated_at:new Date}});return{status:"success",data:a}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function w(e){try{let t=await s._.statistic_correction_map.create({data:e});return{status:"success",data:t}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}(0,a(40618).h)([c,i,o,f,l,u,b,g,m,h,_,y,w]),(0,r.j)("5fb9f8b82dcff8496f64ded8cf754dc38af18221",c),(0,r.j)("b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b",i),(0,r.j)("27292e0db1ea049094aca5cea9ce727e7660c6ad",o),(0,r.j)("17626542b799ad55d66a61eb1c6c83387f0dcdc7",f),(0,r.j)("8123b9003e0dd95f542ea2ad28583619676cff06",l),(0,r.j)("e7f35a88891f29a76dee37b1ae73232f1f359a93",u),(0,r.j)("d3974c3afa23da13df974e0a5eaa4527d6f92ffa",b),(0,r.j)("5d22d26a5bc6b5a20c845591229338f4b5ef7c4c",g),(0,r.j)("e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f",m),(0,r.j)("9ca37af446368f4f1c00eda88cedaf4a6ff1320d",h),(0,r.j)("f85ba165a1d481d90f9bccb76e2b9271e773c70c",_),(0,r.j)("50109cb65c1da634a1805882896e3f4b886dc3b6",y),(0,r.j)("21dad0493aed015526a61d45c462822ff3dbe078",w)},13538:(e,t,a)=>{"use strict";a.d(t,{_:()=>s});var r=a(53524);let s=global.prisma||new r.PrismaClient({log:["query"]})},40644:(e,t,a)=>{"use strict";a.d(t,{Fs:()=>d,p6:()=>s,u1:()=>c,x:()=>n}),a(16725),a(40525),a(37661);var r=a(9576);let s=e=>{let t=e.getFullYear(),a=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0"),s=e.getHours().toString().padStart(2,"0"),d=e.getMinutes().toString().padStart(2,"0"),n=e.getSeconds().toString().padStart(2,"0");return`${t}-${a}-${r} ${s}:${d}:${n}`},d=()=>(0,r.Z)().replaceAll("-",""),n=e=>!!e.match(/^[^'"=]+$/),c=e=>{let t=0;for(t=1;t<e.length;t++)e[t]+=e[t-1];let a=Math.random()*e[e.length-1];for(t=0;t<e.length&&!(e[t]>a);t++);return t}},33159:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(66621);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};