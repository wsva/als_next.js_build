exports.id=5020,exports.ids=[5020],exports.modules={81597:(e,a,t)=>{let r={"17626542b799ad55d66a61eb1c6c83387f0dcdc7":()=>Promise.resolve().then(t.bind(t,98956)).then(e=>e.getOriginalByDomain),"21dad0493aed015526a61d45c462822ff3dbe078":()=>Promise.resolve().then(t.bind(t,98956)).then(e=>e.saveCorrectionMap),"27292e0db1ea049094aca5cea9ce727e7660c6ad":()=>Promise.resolve().then(t.bind(t,98956)).then(e=>e.getOriginalCategory),"50109cb65c1da634a1805882896e3f4b886dc3b6":()=>Promise.resolve().then(t.bind(t,98956)).then(e=>e.trashWord),"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c":()=>Promise.resolve().then(t.bind(t,98956)).then(e=>e.getTextByOriginal),"5fb9f8b82dcff8496f64ded8cf754dc38af18221":()=>Promise.resolve().then(t.bind(t,98956)).then(e=>e.getWordInStore),"8123b9003e0dd95f542ea2ad28583619676cff06":()=>Promise.resolve().then(t.bind(t,98956)).then(e=>e.getOriginal),"9ca37af446368f4f1c00eda88cedaf4a6ff1320d":()=>Promise.resolve().then(t.bind(t,98956)).then(e=>e.searchSentenceByKeyword),b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b:()=>Promise.resolve().then(t.bind(t,98956)).then(e=>e.searchWordInStore),d3974c3afa23da13df974e0a5eaa4527d6f92ffa:()=>Promise.resolve().then(t.bind(t,98956)).then(e=>e.getTextByDomain),e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f:()=>Promise.resolve().then(t.bind(t,98956)).then(e=>e.getText),e7f35a88891f29a76dee37b1ae73232f1f359a93:()=>Promise.resolve().then(t.bind(t,98956)).then(e=>e.getTextCategory),f85ba165a1d481d90f9bccb76e2b9271e773c70c:()=>Promise.resolve().then(t.bind(t,98956)).then(e=>e.searchSentenceByLemma),"752d4765be8afd326d32b304cd957453103f93d0":()=>Promise.resolve().then(t.bind(t,1702)).then(e=>e.getUserByEmail),"7be741432e134b84b50ad1a2aed0d93168d824aa":()=>Promise.resolve().then(t.bind(t,1702)).then(e=>e.getUserByUsername),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:()=>Promise.resolve().then(t.bind(t,1702)).then(e=>e.signOutUser),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:()=>Promise.resolve().then(t.bind(t,1702)).then(e=>e.registerUser),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:()=>Promise.resolve().then(t.bind(t,1702)).then(e=>e.signInUser)};async function d(e,...a){return(await r[e]()).apply(null,a)}e.exports={"17626542b799ad55d66a61eb1c6c83387f0dcdc7":d.bind(null,"17626542b799ad55d66a61eb1c6c83387f0dcdc7"),"21dad0493aed015526a61d45c462822ff3dbe078":d.bind(null,"21dad0493aed015526a61d45c462822ff3dbe078"),"27292e0db1ea049094aca5cea9ce727e7660c6ad":d.bind(null,"27292e0db1ea049094aca5cea9ce727e7660c6ad"),"50109cb65c1da634a1805882896e3f4b886dc3b6":d.bind(null,"50109cb65c1da634a1805882896e3f4b886dc3b6"),"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c":d.bind(null,"5d22d26a5bc6b5a20c845591229338f4b5ef7c4c"),"5fb9f8b82dcff8496f64ded8cf754dc38af18221":d.bind(null,"5fb9f8b82dcff8496f64ded8cf754dc38af18221"),"8123b9003e0dd95f542ea2ad28583619676cff06":d.bind(null,"8123b9003e0dd95f542ea2ad28583619676cff06"),"9ca37af446368f4f1c00eda88cedaf4a6ff1320d":d.bind(null,"9ca37af446368f4f1c00eda88cedaf4a6ff1320d"),b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b:d.bind(null,"b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b"),d3974c3afa23da13df974e0a5eaa4527d6f92ffa:d.bind(null,"d3974c3afa23da13df974e0a5eaa4527d6f92ffa"),e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f:d.bind(null,"e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f"),e7f35a88891f29a76dee37b1ae73232f1f359a93:d.bind(null,"e7f35a88891f29a76dee37b1ae73232f1f359a93"),f85ba165a1d481d90f9bccb76e2b9271e773c70c:d.bind(null,"f85ba165a1d481d90f9bccb76e2b9271e773c70c"),"752d4765be8afd326d32b304cd957453103f93d0":d.bind(null,"752d4765be8afd326d32b304cd957453103f93d0"),"7be741432e134b84b50ad1a2aed0d93168d824aa":d.bind(null,"7be741432e134b84b50ad1a2aed0d93168d824aa"),ce85166cf1a23c9f2a22a49b4f82895537edcfe6:d.bind(null,"ce85166cf1a23c9f2a22a49b4f82895537edcfe6"),ee535fd2e1d6ef6ab42586363f44c0cbea1161f9:d.bind(null,"ee535fd2e1d6ef6ab42586363f44c0cbea1161f9"),fe7b3552d9555bacd46a0fcf077d7272d19fd2c8:d.bind(null,"fe7b3552d9555bacd46a0fcf077d7272d19fd2c8")}},60449:(e,a,t)=>{"use strict";t.d(a,{Cm:()=>c,Ml:()=>s,Sj:()=>f,f:()=>n,qS:()=>d,s7:()=>i}),t(15424);var r=t(46242),d=(0,r.$)("21dad0493aed015526a61d45c462822ff3dbe078"),s=(0,r.$)("5fb9f8b82dcff8496f64ded8cf754dc38af18221"),c=(0,r.$)("b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b");(0,r.$)("27292e0db1ea049094aca5cea9ce727e7660c6ad"),(0,r.$)("17626542b799ad55d66a61eb1c6c83387f0dcdc7"),(0,r.$)("8123b9003e0dd95f542ea2ad28583619676cff06"),(0,r.$)("e7f35a88891f29a76dee37b1ae73232f1f359a93"),(0,r.$)("d3974c3afa23da13df974e0a5eaa4527d6f92ffa"),(0,r.$)("5d22d26a5bc6b5a20c845591229338f4b5ef7c4c"),(0,r.$)("e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f");var n=(0,r.$)("9ca37af446368f4f1c00eda88cedaf4a6ff1320d"),i=(0,r.$)("f85ba165a1d481d90f9bccb76e2b9271e773c70c"),f=(0,r.$)("50109cb65c1da634a1805882896e3f4b886dc3b6")},82816:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});var r=t(10326),d=t(90434);function s({list:e,email:a}){return r.jsx("div",{className:"flex flex-col w-full gap-4 py-4",children:e.map(e=>(0,r.jsxs)("div",{className:"flex flex-col w-full items-start bg-slate-200 rounded-md p-1",children:[e.sentence&&r.jsx("div",{className:"text-xl whitespace-pre-wrap",children:e.sentence}),e.source&&r.jsx("div",{className:"text-base",children:e.source}),(0,r.jsxs)("div",{className:"flex flex-row w-full items-end justify-end gap-4",children:[r.jsx(d.default,{className:"text-blue-600 hover:underline",target:"_blank",href:`/word/text/${e.text_uuid}`,children:"View in Text"}),r.jsx(d.default,{className:"text-blue-600 hover:underline",target:"_blank",href:`/card/add?edit=y&content=${encodeURIComponent(e.sentence)}`,children:"Add to Cards"})]})]},e.uuid))})}t(17577)},98956:(e,a,t)=>{"use strict";t.r(a),t.d(a,{getOriginal:()=>l,getOriginalByDomain:()=>o,getOriginalCategory:()=>f,getText:()=>m,getTextByDomain:()=>b,getTextByOriginal:()=>g,getTextCategory:()=>u,getWordInStore:()=>n,saveCorrectionMap:()=>_,searchSentenceByKeyword:()=>h,searchSentenceByLemma:()=>w,searchWordInStore:()=>i,trashWord:()=>y});var r=t(27745);t(26461);var d=t(58299),s=t(43811),c=t(53524);async function n(e,a,t,r){let s=c.Prisma.sql`
        select * from word_store t0 where 1 = 1
    `;c.Prisma.sql`
        select count(1) as total from word_store t0 where 1 = 1
    `;let n=c.Prisma.sql`
        and not exists(select 1 from word_trash t1 where t1.word = t0.word)
    `,i=e?c.Prisma.sql`
            and not exists(select 1 from qsa_card t1
                where (t1.question = t0.word or t1.suggestion = t0.word) and t1.user_id = ${e})
        `:c.Prisma.sql``,f=a?c.Prisma.sql`
            and t0.language = ${a}
        `:c.Prisma.sql``,o=c.Prisma.sql`
        order by count desc, word asc
    `,l=c.Prisma.sql`
        limit ${r} offset ${(t-1)*r}
    `;try{let e=c.Prisma.join([s,n,i,f,o,l]," "),a=await d.prisma.$queryRaw(e),u=c.Prisma.sql`select count(1) as total from word_store`,b=await d.prisma.$queryRaw(u),g=Number(b[0]?.total||0);return{status:"success",data:a,total_records:g,page:t,total_pages:Math.ceil(g/r)}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function i(e,a,t,r,s){let n=(e,a)=>e?c.Prisma.sql`
                select t0.*,
                (select string_agg(t1.uuid, ',') from qsa_card t1 where 1 =1 
                    and (t1.question = t0.word or t1.suggestion = t0.word)
                    and t1.user_id = ${e}
                ) as card_uuid,
                ${a} as sort_order
                from word_store t0 where 1 = 1
            `:c.Prisma.sql`
            select t0.*,
            null as card_uuid,
            ${a} as sort_order
            from word_store t0 where 1 = 1
        `,i=t.replaceAll(/\s+/g," ").replaceAll(/^\s+|\s+$/g,""),f=c.Prisma.sql`
        and lower(t0.word) = lower(${i})
    `,o=c.Prisma.sql`
        and lower(t0.word) != lower(${i})
        and lower(t0.word) like lower(${"%"+i+"%"})
    `,l=c.Prisma.join([n(e,1),f,c.Prisma.sql`union`,n(e,2),o]," ");try{let e=c.Prisma.join([c.Prisma.sql`select * from (`,l,c.Prisma.sql`) as t`,c.Prisma.sql`order by sort_order`,c.Prisma.sql`limit ${s} offset ${(r-1)*s}`]," "),a=await d.prisma.$queryRaw(e),t=c.Prisma.join([c.Prisma.sql`select count(1) as total from (`,l,c.Prisma.sql`) as t`]," "),n=await d.prisma.$queryRaw(t),i=Number(n[0]?.total||0);return{status:"success",data:a,total_records:i,page:r,total_pages:Math.ceil(i/s)}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function f(){try{let e=await d.prisma.statistic_original.findMany({distinct:["domain","language"],select:{domain:!0,language:!0}});return{status:"success",data:e}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function o(e,a){try{let t=await d.prisma.statistic_original.findMany({where:{domain:e,language:a},select:{uuid:!0,source:!0,domain:!0,language:!0}});return{status:"success",data:t}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function l(e){try{let a=await d.prisma.statistic_original.findUnique({where:{uuid:e}});if(!a)return{status:"error",error:"no original found"};return{status:"success",data:a}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function u(){try{let e=await d.prisma.$queryRaw(c.Prisma.sql`SELECT distinct t1.domain, t1.language
        FROM
        	statistic_text t0, statistic_original t1
        WHERE
            t0.original_uuid = t1.uuid
        `);return{status:"success",data:e}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function b(e,a){if(!(0,s.checkSQLSafe)(e)||!(0,s.checkSQLSafe)(a))return{status:"error",error:"invaid sql param"};try{let t=await d.prisma.$queryRaw(c.Prisma.sql`SELECT t1.source source, t1.domain, t1.language,
        t0.uuid, t0.version, '' content, t0.created_by, t0.created_at, t0.updated_at
        FROM
        	statistic_text t0, statistic_original t1
        WHERE
            t0.original_uuid = t1.uuid
            and t1.domain = ${e}
            and t1.language = ${a}
        `);return{status:"success",data:t}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function g(e){if(!(0,s.checkSQLSafe)(e))return{status:"error",error:"invaid sql param"};try{let a=await d.prisma.$queryRaw(c.Prisma.sql`SELECT t1.source source, t1.domain, t1.language,
        t0.uuid, t0.version, '' content, t0.created_by, t0.created_at, t0.updated_at
        FROM
        	statistic_text t0, statistic_original t1
        WHERE
            t0.original_uuid = t1.uuid
            and t0.original_uuid = ${e}
        `);return{status:"success",data:a}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function m(e){if(!(0,s.checkSQLSafe)(e))return{status:"error",error:"invaid sql param"};try{let a=await d.prisma.$queryRaw(c.Prisma.sql`SELECT t1.source source, t0.* 
            FROM
                statistic_text t0, statistic_original t1
            WHERE
                t0.original_uuid = t1.uuid
                and t0.uuid=${e}
            `);return{status:"success",data:a}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function h(e){if(0==e.length)return{status:"error",error:"no keyword found"};try{let a=`SELECT t2.source source, t2.domain, t0.* 
            FROM
                statistic_sentence t0, statistic_text t1, statistic_original t2
            WHERE
                t0.text_uuid = t1.uuid
                and t1.original_uuid = t2.uuid
                ${e.map(e=>`and LOWER(t0.sentence) like '%${e.toLowerCase()}%'`).join(" ")}
                limit 100
            `,t=await d.prisma.$queryRaw(c.Prisma.sql([a]));return{status:"success",data:t}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function w(e){if(0==e.length)return{status:"error",error:"no keyword found"};try{let a=`SELECT t2.source source, t2.domain, t0.* 
            FROM
                statistic_sentence t0, statistic_text t1, statistic_original t2
            WHERE
                t0.text_uuid = t1.uuid
                and t1.original_uuid = t2.uuid
                and exists (select 1 from statistic_lemma t3
                        where t3.sentence_uuid = t0.uuid
                        ${e.map(e=>`and t3.lemma = '${e}'`).join(" ")}
                    )
                limit 100
            `,t=await d.prisma.$queryRaw(c.Prisma.sql([a]));return{status:"success",data:t}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function y(e,a){try{let t=await d.prisma.word_trash.create({data:{uuid:(0,s.getUUID)(),word:e,created_by:a,created_at:new Date,updated_at:new Date}});return{status:"success",data:t}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}async function _(e){try{let a=await d.prisma.statistic_correction_map.create({data:e});return{status:"success",data:a}}catch(e){return console.log(e),{status:"error",error:e.toString()}}}(0,t(85723).ensureServerEntryExports)([n,i,f,o,l,u,b,g,m,h,w,y,_]),(0,r.registerServerReference)("5fb9f8b82dcff8496f64ded8cf754dc38af18221",n),(0,r.registerServerReference)("b8b1a6dfe5222788dead20e81fc3b2e67f2fd00b",i),(0,r.registerServerReference)("27292e0db1ea049094aca5cea9ce727e7660c6ad",f),(0,r.registerServerReference)("17626542b799ad55d66a61eb1c6c83387f0dcdc7",o),(0,r.registerServerReference)("8123b9003e0dd95f542ea2ad28583619676cff06",l),(0,r.registerServerReference)("e7f35a88891f29a76dee37b1ae73232f1f359a93",u),(0,r.registerServerReference)("d3974c3afa23da13df974e0a5eaa4527d6f92ffa",b),(0,r.registerServerReference)("5d22d26a5bc6b5a20c845591229338f4b5ef7c4c",g),(0,r.registerServerReference)("e5dbf3bb47056ca07728ecfa957e5fca01fb4a8f",m),(0,r.registerServerReference)("9ca37af446368f4f1c00eda88cedaf4a6ff1320d",h),(0,r.registerServerReference)("f85ba165a1d481d90f9bccb76e2b9271e773c70c",w),(0,r.registerServerReference)("50109cb65c1da634a1805882896e3f4b886dc3b6",y),(0,r.registerServerReference)("21dad0493aed015526a61d45c462822ff3dbe078",_)},43811:(e,a,t)=>{"use strict";t.d(a,{checkSQLSafe:()=>s,getUUID:()=>d,getWeightedRandom:()=>c}),t(20610),t(97308),t(94997);var r=t(38608);let d=()=>(0,r.v4)().replaceAll("-",""),s=e=>!!e.match(/^[^'"=]+$/),c=e=>{let a=0;for(a=1;a<e.length;a++)e[a]+=e[a-1];let t=Math.random()*e[e.length-1];for(a=0;a<e.length&&!(e[a]>t);a++);return a}}};