(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5432],{56794:function(t,e,n){Promise.resolve().then(n.bind(n,68725))},20021:function(t,e,n){"use strict";var s;n.d(e,{H:function(){return s}}),function(t){class e{append(t){this.end_time=t.end_time,this.end_ms=t.end_ms,this.content_list.push(...t.content_list),this.translation_list.push(...t.translation_list)}playMedia(t,e){t.paused||t.pause();let n=e?this.extend_start_ms:this.start_ms,s=e?this.extend_end_ms:this.end_ms;t.currentTime=n/1e3,t.play();let r=setTimeout(()=>{t.removeEventListener("pause",i),t.pause()},s-n);function i(){clearTimeout(r)}t.addEventListener("pause",i)}getTip(){let t=this.content_list.join(" ").replaceAll(/[a-zA-Z0-9äÄöÖüÜßé]/g,"_"),e=0,n="";for(let s of t)"_"===s?e++:e>0&&(n+="".concat(e),e=0),n+=s;return e>0&&(n+="".concat(e)),n}cleanStyle(t){return t.replace(/^<font [^>]*>/,"").replace(/<\/font>$/,"")}content(){return this.content_list.join(" ")}translation(){return this.translation_list.join("\n")}first_line(){return this.content_list?this.content_list[0]:""}last_line(){return this.content_list?this.content_list[this.content_list.length-1]:""}time_str(){return"".concat(this.start_time," --> ").concat(this.end_time)}constructor(t,e){if(this.init_status="error",this.init_error="not initialized",this.position=0,this.start_time="",this.end_time="",this.start_ms=0,this.end_ms=0,this.extend_start_ms=0,this.extend_end_ms=0,this.content_list=[],this.translation_list=[],t.length<2){this.init_status="error",this.init_error="too few lines";return}if(!t[0].match(/^\d+$/)){this.init_status="error",this.init_error="invalid position number: ".concat(t[0]);return}let n=r(t[1]);if(!n){this.init_status="error",this.init_error="invalid time format: ".concat(t[1]);return}this.init_status="success",this.init_error="",this.position=parseInt(t[0]),this.start_time=n.start_time,this.start_ms=n.start_ms,this.end_time=n.end_time,this.end_ms=n.end_ms,e?(t.length>2&&this.content_list.push(this.cleanStyle(t[2])),t.length>3&&t.slice(3).forEach(t=>this.translation_list.push(this.cleanStyle(t)))):t.length>2&&t.slice(2).forEach(t=>this.content_list.push(this.cleanStyle(t)))}}t.Item=e;let n=(t,e,n,s)=>36e5*parseInt(t)+6e4*parseInt(e)+1e3*parseInt(n)+parseInt(s),s=t=>{let e="".concat(Math.floor(t/1e3/60/60)).padStart(2,"0"),n="".concat(Math.floor(t/1e3/60%60)).padStart(2,"0"),s="".concat(Math.floor(t/1e3%60)).padStart(2,"0"),r="".concat(Math.floor(t%1e3)).padStart(2,"0");return"".concat(e,":").concat(n,":").concat(s,",").concat(r)},r=t=>{let e=t.match(/((\d{2}):(\d{2}):(\d{2}),(\d{3})) --> ((\d{2}):(\d{2}):(\d{2}),(\d{3}))/);return e?{start_time:e[1],start_ms:n(e[2],e[3],e[4],e[5]),end_time:e[6],end_ms:n(e[7],e[8],e[9],e[10])}:null},i=(t,e)=>"".concat(s(t)," --> ").concat(s(e)),l=t=>{let e=t.trim().replaceAll("\r\n","\n").replaceAll("\r","\n").split("\n"),n=[],s=[];for(let t of e){if(""===(t=t.trim())){s.length>0&&(n.push(s),s=[]);continue}s.push(t)}return s.length>0&&n.push(s),n},a=t=>{let e=[];for(let n of t){if(e.length>0&&e[e.length-1].last_line().match(/[a-zA-Z0-9äÄöÖüÜßé,:-]$/)&&n.first_line().match(/^[0-9a-z]/)){e[e.length-1].append(n);continue}e.push(n)}for(let t=0;t<e.length;t++)e[t].position=t+1;return e};t.parse_srt_content=(t,n)=>{let s=l(t),r=[],i=s.map(t=>{let s=new e(t,n);return"error"===s.init_status&&r.push(s.init_error),s}).filter(t=>t.content_list.length>0);if(0===r.length){let t=a(a(a(i)));for(let e=0;e<t.length;e++)t[e].position=e+1,t[e].extend_start_ms=e>0?t[e-1].start_ms:t[e].start_ms,t[e].extend_end_ms=e+1<t.length?t[e+1].end_ms:t[e].end_ms;return{status:"success",data:t}}return{status:"error",error:r.join("\n")}},t.build_srt_content=t=>{let e="";return t.forEach(t=>{e+="".concat(t.position,"\n")+"".concat(i(t.start_ms,t.end_ms),"\n"),t.content_list.length>0&&(e+="".concat(t.content(),"\n")),t.translation_list.length>0&&(e+="".concat(t.translation(),"\n")),e+="\n"}),e},t.hideWord=t=>{let e=t.replaceAll(/[a-zA-Z0-9äÄöÖüÜßé]/g,"_"),n=0,s="";for(let t of e)"_"===t?n++:n>0&&(s+="".concat(n),n=0),s+=t;return n>0&&(s+="".concat(n)),s},t.pureContent=t=>t.replaceAll(/[^a-zA-Z0-9äÄöÖüÜßé]/g,""),t.splitContent=(t,e)=>{let n=[],s="";for(let r of t){if(r.match(/[a-zA-Z0-9äÄöÖüÜßé]/)){s+=r;continue}""!==s&&(n.push({isWord:!0,content:s}),s=""),e||n.push({isWord:!1,content:r})}return""!==s&&n.push({isWord:!0,content:s}),n},t.from_breakpoints=t=>{let n=[];for(let s=1;s<t.length;s++){let r=["".concat(s),i(t[s-1],t[s]),"content"];n.push(new e(r,!1))}return n}}(s||(s={}))},68725:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return o}});var s,r=n(57437),i=n(69813),l=n(84459),a=n(2265);function o(){var t,e;let[n,o]=(0,a.useState)(),[c,u]=(0,a.useState)(""),[d,h]=(0,a.useState)(""),[_,m]=(0,a.useState)([]),[p,f]=(0,a.useState)([]),v=(0,a.useRef)(null),g=(0,a.useRef)(null),x=()=>{if(!g.current)return;let t=1e3*g.current.currentTime;for(let e=0;e<_.length;e++)if(t<=_[e].end_ms){let t=document.getElementById("d-s-i-".concat(e));null==t||t.scrollIntoView({behavior:"smooth",block:"center"}),null==t||t.focus();break}};return null===(t=g.current)||void 0===t||t.addEventListener("timeupdate",x),null===(e=g.current)||void 0===e||e.addEventListener("seeking",x),(0,r.jsxs)("div",{children:[(0,r.jsx)("pre",{children:"design:\n1, upload a audio/video file, save to server disk\n2, use shortcut to set breakpoints\n3, generade srt edit view according to breakpoints\n4, generate srt file\n\n1, custom audio player, show wave\n2, can manually set breakpoints using time-string\n                "}),n&&(0,r.jsxs)("div",{className:"flex flex-col items-start justify-start w-full gap-4 py-4 sticky top-0 z-50",onMouseOver:t=>{g.current.focus()},onKeyDown:t=>{if(t.ctrlKey&&"bB".includes(t.key)){let e=1e3*g.current.currentTime;f(s.add(p,e)),t.preventDefault()}},children:[(0,r.jsx)("audio",{className:"w-full",ref:g,controls:!0,src:n}),(0,r.jsx)("div",{className:"text-sm text-red-400",children:"press Ctrl + B to set breakpoint"}),(0,r.jsx)("div",{children:p.map((t,e)=>(0,r.jsx)("div",{children:t},e))})]}),(0,r.jsxs)("div",{className:"flex flex-row items-center justify-center gap-4",children:[(0,r.jsx)(i.Y,{className:"hidden",type:"file",ref:v,onChange:t=>{o(URL.createObjectURL(t.target.files[0]))}}),(0,r.jsx)(l.A,{variant:"solid",color:"primary",onPress:()=>{var t;return null===(t=v.current)||void 0===t?void 0:t.click()},children:"upload audio/video"})]}),c.length>0&&(0,r.jsx)("pre",{className:"my-4",children:c})]})}n(20021),(s||(s={})).add=(t,e)=>{for(let n=0;n<t.length;n++)if(t[n]>e){if(0===n)return[e,...t];return t.slice(0,n).concat(e,...t.slice(n))}return t.concat(e)}},69813:function(t,e,n){"use strict";n.d(e,{Y:function(){return c}});var s=n(56075),r=n(77100),i=n(2265),l=n(46135),a=n(57437),o=(0,l.Gp)((t,e)=>{let{Component:n,label:l,description:o,isClearable:c,startContent:u,endContent:d,labelPlacement:h,hasHelper:_,isOutsideLeft:m,shouldLabelBeOutside:p,errorMessage:f,isInvalid:v,getBaseProps:g,getLabelProps:x,getInputProps:j,getInnerWrapperProps:y,getInputWrapperProps:b,getMainWrapperProps:k,getHelperWrapperProps:w,getDescriptionProps:S,getErrorMessageProps:A,getClearButtonProps:E}=(0,s.G)({...t,ref:e}),I=l?(0,a.jsx)("label",{...x(),children:l}):null,M=(0,i.useMemo)(()=>c?(0,a.jsx)("button",{...E(),children:d||(0,a.jsx)(r.f,{})}):d,[c,E]),N=(0,i.useMemo)(()=>{let t=v&&f,e=t||o;return _&&e?(0,a.jsx)("div",{...w(),children:t?(0,a.jsx)("div",{...A(),children:f}):(0,a.jsx)("div",{...S(),children:o})}):null},[_,v,f,o,w,A,S]),z=(0,i.useMemo)(()=>(0,a.jsxs)("div",{...y(),children:[u,(0,a.jsx)("input",{...j()}),M]}),[u,M,j,y]),C=(0,i.useMemo)(()=>p?(0,a.jsxs)("div",{...k(),children:[(0,a.jsxs)("div",{...b(),children:[m?null:I,z]}),N]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{...b(),children:[I,z]}),N]}),[h,N,p,I,z,f,o,k,b,A,S]);return(0,a.jsxs)(n,{...g(),children:[m?I:null,C]})});o.displayName="HeroUI.Input";var c=o}},function(t){t.O(0,[5569,4966,4459,7669,2971,7023,1744],function(){return t(t.s=56794)}),_N_E=t.O()}]);